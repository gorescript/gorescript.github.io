(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)})([function(module,exports,__webpack_require__){"use strict";__webpack_require__(1);var _JsonStorageService=__webpack_require__(3);var _JsonStorageService2=_interopRequireDefault(_JsonStorageService);var _convertToNumber=__webpack_require__(4);var _convertToNumber2=_interopRequireDefault(_convertToNumber);var _multiSelect=__webpack_require__(5);var _multiSelect2=_interopRequireDefault(_multiSelect);var _collapsiblePanel=__webpack_require__(7);var _collapsiblePanel2=_interopRequireDefault(_collapsiblePanel);var _validate=__webpack_require__(8);var _validate2=_interopRequireDefault(_validate);var _segmentTools=__webpack_require__(9);var _segmentTools2=_interopRequireDefault(_segmentTools);var _sectorTools=__webpack_require__(16);var _sectorTools2=_interopRequireDefault(_sectorTools);var _entityTools=__webpack_require__(20);var _entityTools2=_interopRequireDefault(_entityTools);var _zoneTools=__webpack_require__(23);var _zoneTools2=_interopRequireDefault(_zoneTools);var _toolbox=__webpack_require__(26);var _toolbox2=_interopRequireDefault(_toolbox);var _cookieLawWarning=__webpack_require__(33);var _cookieLawWarning2=_interopRequireDefault(_cookieLawWarning);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var app=angular.module("map-editor",["ui.bootstrap"]);app.service("JsonStorageService",_JsonStorageService2.default);app.directive("convertToNumber",_convertToNumber2.default);app.directive("multiSelect",_multiSelect2.default);app.directive("collapsiblePanel",_collapsiblePanel2.default);app.directive("validate",_validate2.default);app.directive("segmentTools",_segmentTools2.default);app.directive("sectorTools",_sectorTools2.default);app.directive("entityTools",_entityTools2.default);app.directive("zoneTools",_zoneTools2.default);app.component("toolbox",_toolbox2.default);app.component("cookieLawWarning",_cookieLawWarning2.default);app.config(function(){});app.run(function(){$(document).on("contextmenu",function(){return false})})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2);module.exports="ui.bootstrap"},function(module,exports){"use strict";angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]);angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/popup.html","uib/template/datepicker/year.html","uib/template/modal/backdrop.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]);angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$injector",function($animate,$injector){var $animateCss=$injector.has("$animateCss")?$injector.get("$animateCss"):null;return{link:function link(scope,element,attrs){if(!scope.$eval(attrs.uibCollapse)){element.addClass("in").addClass("collapse").css({height:"auto"})}function expand(){element.removeClass("collapse").addClass("collapsing").attr("aria-expanded",true).attr("aria-hidden",false);if($animateCss){$animateCss(element,{addClass:"in",easing:"ease",to:{height:element[0].scrollHeight+"px"}}).start()["finally"](expandDone)}else{$animate.addClass(element,"in",{to:{height:element[0].scrollHeight+"px"}}).then(expandDone)}}function expandDone(){element.removeClass("collapsing").addClass("collapse").css({height:"auto"})}function collapse(){if(!element.hasClass("collapse")&&!element.hasClass("in")){return collapseDone()}element.css({height:element[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",false).attr("aria-hidden",true);if($animateCss){$animateCss(element,{removeClass:"in",to:{height:"0"}}).start()["finally"](collapseDone)}else{$animate.removeClass(element,"in",{to:{height:"0"}}).then(collapseDone)}}function collapseDone(){element.css({height:"0"});element.removeClass("collapsing").addClass("collapse")}scope.$watch(attrs.uibCollapse,function(shouldCollapse){if(shouldCollapse){collapse()}else{expand()}})}}}]);angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:true}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function($scope,$attrs,accordionConfig){this.groups=[];this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;if(closeOthers){angular.forEach(this.groups,function(group){if(group!==openGroup){group.isOpen=false}})}};this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope);groupScope.$on("$destroy",function(event){that.removeGroup(groupScope)})};this.removeGroup=function(group){var index=this.groups.indexOf(group);if(index!==-1){this.groups.splice(index,1)}}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:true,templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:true,replace:true,templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function controller(){this.setHeading=function(element){this.heading=element}},link:function link(scope,element,attrs,accordionCtrl){accordionCtrl.addGroup(scope);scope.openClass=attrs.openClass||"panel-open";scope.panelClass=attrs.panelClass||"panel-default";scope.$watch("isOpen",function(value){element.toggleClass(scope.openClass,!!value);if(value){accordionCtrl.closeOthers(scope)}});scope.toggleOpen=function($event){if(!scope.isDisabled){if(!$event||$event.which===32){scope.isOpen=!scope.isOpen}}}}}}).directive("uibAccordionHeading",function(){return{transclude:true,template:"",replace:true,require:"^uibAccordionGroup",link:function link(scope,element,attrs,accordionGroupCtrl,transclude){accordionGroupCtrl.setHeading(transclude(scope,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function link(scope,element,attrs,controller){scope.$watch(function(){return controller[attrs.uibAccordionTransclude]},function(heading){if(heading){element.find("span").html("");element.find("span").append(heading)}})}}});angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function($scope,$attrs,$interpolate,$timeout){$scope.closeable=!!$attrs.close;var dismissOnTimeout=angular.isDefined($attrs.dismissOnTimeout)?$interpolate($attrs.dismissOnTimeout)($scope.$parent):null;if(dismissOnTimeout){$timeout(function(){$scope.close()},parseInt(dismissOnTimeout,10))}}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/alert/alert.html"},transclude:true,replace:true,scope:{type:"@",close:"&"}}});angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active";this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function($parse){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function link(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];var uncheckableExpr=$parse(attrs.uibUncheckable);element.find("input").css({display:"none"});ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.uibBtnRadio)))};element.on(buttonsCtrl.toggleEvent,function(){if(attrs.disabled){return}var isActive=element.hasClass(buttonsCtrl.activeClass);if(!isActive||angular.isDefined(attrs.uncheckable)){scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.uibBtnRadio));ngModelCtrl.$render()})}});if(attrs.uibUncheckable){scope.$watch(uncheckableExpr,function(uncheckable){attrs.$set("uncheckable",uncheckable?"":null)})}}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function link(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];element.find("input").css({display:"none"});function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,true)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,false)}function getCheckboxValue(attribute,defaultValue){return angular.isDefined(attribute)?scope.$eval(attribute):defaultValue}ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))};element.on(buttonsCtrl.toggleEvent,function(){if(attrs.disabled){return}scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue());ngModelCtrl.$render()})})}}});angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function($scope,$element,$interval,$timeout,$animate){var self=this,slides=self.slides=$scope.slides=[],SLIDE_DIRECTION="uib-slideDirection",currentIndex=-1,currentInterval,isPlaying,bufferedTransitions=[];self.currentSlide=null;var destroyed=false;self.addSlide=function(slide,element){slide.$element=element;slides.push(slide);if(slides.length===1||slide.active){if($scope.$currentTransition){$scope.$currentTransition=null}self.select(slides[slides.length-1]);if(slides.length===1){$scope.play()}}else{slide.active=false}};self.getCurrentIndex=function(){if(self.currentSlide&&angular.isDefined(self.currentSlide.index)){return+self.currentSlide.index}return currentIndex};self.next=$scope.next=function(){var newIndex=(self.getCurrentIndex()+1)%slides.length;if(newIndex===0&&$scope.noWrap()){$scope.pause();return}return self.select(getSlideByIndex(newIndex),"next")};self.prev=$scope.prev=function(){var newIndex=self.getCurrentIndex()-1<0?slides.length-1:self.getCurrentIndex()-1;if($scope.noWrap()&&newIndex===slides.length-1){$scope.pause();return}return self.select(getSlideByIndex(newIndex),"prev")};self.removeSlide=function(slide){if(angular.isDefined(slide.index)){slides.sort(function(a,b){return+a.index>+b.index})}var bufferedIndex=bufferedTransitions.indexOf(slide);if(bufferedIndex!==-1){bufferedTransitions.splice(bufferedIndex,1)}var index=slides.indexOf(slide);slides.splice(index,1);$timeout(function(){if(slides.length>0&&slide.active){if(index>=slides.length){self.select(slides[index-1])}else{self.select(slides[index])}}else if(currentIndex>index){currentIndex--}});if(slides.length===0){self.currentSlide=null;clearBufferedTransitions()}};self.select=$scope.select=function(nextSlide,direction){var nextIndex=$scope.indexOfSlide(nextSlide);if(direction===undefined){direction=nextIndex>self.getCurrentIndex()?"next":"prev"}if(nextSlide&&nextSlide!==self.currentSlide&&!$scope.$currentTransition){goNext(nextSlide,nextIndex,direction)}else if(nextSlide&&nextSlide!==self.currentSlide&&$scope.$currentTransition){bufferedTransitions.push(nextSlide);nextSlide.active=false}};$scope.indexOfSlide=function(slide){return angular.isDefined(slide.index)?+slide.index:slides.indexOf(slide)};$scope.isActive=function(slide){return self.currentSlide===slide};$scope.pause=function(){if(!$scope.noPause){isPlaying=false;resetTimer()}};$scope.play=function(){if(!isPlaying){isPlaying=true;restartTimer()}};$scope.$on("$destroy",function(){destroyed=true;resetTimer()});$scope.$watch("noTransition",function(noTransition){$animate.enabled($element,!noTransition)});$scope.$watch("interval",restartTimer);$scope.$watchCollection("slides",resetTransition);function clearBufferedTransitions(){while(bufferedTransitions.length){bufferedTransitions.shift()}}function getSlideByIndex(index){if(angular.isUndefined(slides[index].index)){return slides[index]}for(var i=0,l=slides.length;i<l;++i){if(slides[i].index===index){return slides[i]}}}function goNext(slide,index,direction){if(destroyed){return}angular.extend(slide,{direction:direction,active:true});angular.extend(self.currentSlide||{},{direction:direction,active:false});if($animate.enabled($element)&&!$scope.$currentTransition&&slide.$element&&self.slides.length>1){slide.$element.data(SLIDE_DIRECTION,slide.direction);if(self.currentSlide&&self.currentSlide.$element){self.currentSlide.$element.data(SLIDE_DIRECTION,slide.direction)}$scope.$currentTransition=true;$animate.on("addClass",slide.$element,function(element,phase){if(phase==="close"){$scope.$currentTransition=null;$animate.off("addClass",element);if(bufferedTransitions.length){var nextSlide=bufferedTransitions.pop();var nextIndex=$scope.indexOfSlide(nextSlide);var nextDirection=nextIndex>self.getCurrentIndex()?"next":"prev";clearBufferedTransitions();goNext(nextSlide,nextIndex,nextDirection)}}})}self.currentSlide=slide;currentIndex=index;restartTimer()}function resetTimer(){if(currentInterval){$interval.cancel(currentInterval);currentInterval=null}}function resetTransition(slides){if(!slides.length){$scope.$currentTransition=null;clearBufferedTransitions()}}function restartTimer(){resetTimer();var interval=+$scope.interval;if(!isNaN(interval)&&interval>0){currentInterval=$interval(timerFn,interval)}}function timerFn(){var interval=+$scope.interval;if(isPlaying&&!isNaN(interval)&&interval>0&&slides.length){$scope.next()}else{$scope.pause()}}}]).directive("uibCarousel",function(){return{transclude:true,replace:true,controller:"UibCarouselController",controllerAs:"carousel",templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",function(){return{require:"^uibCarousel",transclude:true,replace:true,templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function link(scope,element,attrs,carouselCtrl){carouselCtrl.addSlide(scope,element);scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)});scope.$watch("active",function(active){if(active){carouselCtrl.select(scope)}})}}}).animation(".item",["$animateCss",function($animateCss){var SLIDE_DIRECTION="uib-slideDirection";function removeClass(element,className,callback){element.removeClass(className);if(callback){callback()}}return{beforeAddClass:function beforeAddClass(element,className,done){if(className==="active"){var stopped=false;var direction=element.data(SLIDE_DIRECTION);var directionClass=direction==="next"?"left":"right";var removeClassFn=removeClass.bind(this,element,directionClass+" "+direction,done);element.addClass(direction);$animateCss(element,{addClass:directionClass}).start().done(removeClassFn);return function(){stopped=true}}done()},beforeRemoveClass:function beforeRemoveClass(element,className,done){if(className==="active"){var stopped=false;var direction=element.data(SLIDE_DIRECTION);var directionClass=direction==="next"?"left":"right";var removeClassFn=removeClass.bind(this,element,directionClass,done);$animateCss(element,{addClass:directionClass}).start().done(removeClassFn);return function(){stopped=true}}done()}}}]);angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","orderByFilter",function($log,$locale,orderByFilter){var SPECIAL_CHARACTERS_REGEXP=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var localeId;var formatCodeToRegex;this.init=function(){localeId=$locale.id;this.parsers={};formatCodeToRegex=[{key:"yyyy",regex:"\\d{4}",apply:function apply(value){this.year=+value}},{key:"yy",regex:"\\d{2}",apply:function apply(value){this.year=+value+2e3}},{key:"y",regex:"\\d{1,4}",apply:function apply(value){this.year=+value}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function apply(value){this.month=value-1}},{key:"MMMM",regex:$locale.DATETIME_FORMATS.MONTH.join("|"),apply:function apply(value){this.month=$locale.DATETIME_FORMATS.MONTH.indexOf(value)}},{key:"MMM",regex:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function apply(value){this.month=$locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value)}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function apply(value){this.month=value-1}},{key:"M",regex:"[1-9]|1[0-2]",apply:function apply(value){this.month=value-1}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function apply(value){this.date=+value}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function apply(value){this.date=+value}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function apply(value){this.date=+value}},{key:"EEEE",regex:$locale.DATETIME_FORMATS.DAY.join("|")},{key:"EEE",regex:$locale.DATETIME_FORMATS.SHORTDAY.join("|")},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function apply(value){this.hours=+value}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function apply(value){this.hours=+value}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function apply(value){this.hours=+value}},{key:"h",regex:"[0-9]|1[0-2]",apply:function apply(value){this.hours=+value}},{key:"mm",regex:"[0-5][0-9]",apply:function apply(value){this.minutes=+value}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function apply(value){this.minutes=+value}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function apply(value){this.milliseconds=+value}},{key:"ss",regex:"[0-5][0-9]",apply:function apply(value){this.seconds=+value}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function apply(value){this.seconds=+value}},{key:"a",regex:$locale.DATETIME_FORMATS.AMPMS.join("|"),apply:function apply(value){if(this.hours===12){this.hours=0}if(value==="PM"){this.hours+=12}}},{key:"Z",regex:"[+-]\\d{4}",apply:function apply(value){var matches=value.match(/([+-])(\d{2})(\d{2})/),sign=matches[1],hours=matches[2],minutes=matches[3];this.hours+=toInt(sign+hours);this.minutes+=toInt(sign+minutes)}},{key:"ww",regex:"[0-4][0-9]|5[0-3]"},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]"},{key:"GGGG",regex:$locale.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s")},{key:"GGG",regex:$locale.DATETIME_FORMATS.ERAS.join("|")},{key:"GG",regex:$locale.DATETIME_FORMATS.ERAS.join("|")},{key:"G",regex:$locale.DATETIME_FORMATS.ERAS.join("|")}]};this.init();function createParser(format){var map=[],regex=format.split("");var quoteIndex=format.indexOf("'");if(quoteIndex>-1){var inLiteral=false;format=format.split("");for(var i=quoteIndex;i<format.length;i++){if(inLiteral){if(format[i]==="'"){if(i+1<format.length&&format[i+1]==="'"){format[i+1]="$";regex[i+1]=""}else{regex[i]="";inLiteral=false}}format[i]="$"}else{if(format[i]==="'"){format[i]="$";regex[i]="";inLiteral=true}}}format=format.join("")}angular.forEach(formatCodeToRegex,function(data){var index=format.indexOf(data.key);if(index>-1){format=format.split("");regex[index]="("+data.regex+")";format[index]="$";for(var i=index+1,n=index+data.key.length;i<n;i++){regex[i]="";format[i]="$"}format=format.join("");map.push({index:index,apply:data.apply,matcher:data.regex})}});return{regex:new RegExp("^"+regex.join("")+"$"),map:orderByFilter(map,"index")}}this.parse=function(input,format,baseDate){if(!angular.isString(input)||!format){return input}format=$locale.DATETIME_FORMATS[format]||format;format=format.replace(SPECIAL_CHARACTERS_REGEXP,"\\$&");if($locale.id!==localeId){this.init()}if(!this.parsers[format]){this.parsers[format]=createParser(format)}var parser=this.parsers[format],regex=parser.regex,map=parser.map,results=input.match(regex),tzOffset=false;if(results&&results.length){var fields,dt;if(angular.isDate(baseDate)&&!isNaN(baseDate.getTime())){fields={year:baseDate.getFullYear(),month:baseDate.getMonth(),date:baseDate.getDate(),hours:baseDate.getHours(),minutes:baseDate.getMinutes(),seconds:baseDate.getSeconds(),milliseconds:baseDate.getMilliseconds()}}else{if(baseDate){$log.warn("dateparser:","baseDate is not a valid date")}fields={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0}}for(var i=1,n=results.length;i<n;i++){var mapper=map[i-1];if(mapper.matcher==="Z"){tzOffset=true}if(mapper.apply){mapper.apply.call(fields,results[i])}}var datesetter=tzOffset?Date.prototype.setUTCFullYear:Date.prototype.setFullYear;var timesetter=tzOffset?Date.prototype.setUTCHours:Date.prototype.setHours;if(isValid(fields.year,fields.month,fields.date)){if(angular.isDate(baseDate)&&!isNaN(baseDate.getTime())&&!tzOffset){dt=new Date(baseDate);datesetter.call(dt,fields.year,fields.month,fields.date);timesetter.call(dt,fields.hours,fields.minutes,fields.seconds,fields.milliseconds)}else{dt=new Date(0);datesetter.call(dt,fields.year,fields.month,fields.date);timesetter.call(dt,fields.hours||0,fields.minutes||0,fields.seconds||0,fields.milliseconds||0)}}return dt}};function isValid(year,month,date){if(date<1){return false}if(month===1&&date>28){return date===29&&(year%4===0&&year%100!==0||year%400===0)}if(month===3||month===5||month===8||month===10){return date<31}return true}function toInt(str){return parseInt(str,10)}this.toTimezone=toTimezone;this.fromTimezone=fromTimezone;this.timezoneToOffset=timezoneToOffset;this.addDateMinutes=addDateMinutes;this.convertTimezoneToLocal=convertTimezoneToLocal;function toTimezone(date,timezone){return date&&timezone?convertTimezoneToLocal(date,timezone):date}function fromTimezone(date,timezone){return date&&timezone?convertTimezoneToLocal(date,timezone,true):date}function timezoneToOffset(timezone,fallback){var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){date=new Date(date.getTime());date.setMinutes(date.getMinutes()+minutes);return date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var timezoneOffset=timezoneToOffset(timezone,date.getTimezoneOffset());return addDateMinutes(date,reverse*(timezoneOffset-date.getTimezoneOffset()))}}]);angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function($animate){var ON_REGEXP=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/;var IS_REGEXP=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;var dataPerTracked={};return{restrict:"A",compile:function compile(tElement,tAttrs){var linkedScopes=[];var instances=[];var expToData={};var lastActivated=null;var onExpMatches=tAttrs.uibIsClass.match(ON_REGEXP);var onExp=onExpMatches[2];var expsStr=onExpMatches[1];var exps=expsStr.split(",");return linkFn;function linkFn(scope,element,attrs){linkedScopes.push(scope);instances.push({scope:scope,element:element});exps.forEach(function(exp,k){addForExp(exp,scope)});scope.$on("$destroy",removeScope)}function addForExp(exp,scope){var matches=exp.match(IS_REGEXP);var clazz=scope.$eval(matches[1]);var compareWithExp=matches[2];var data=expToData[exp];if(!data){var watchFn=function watchFn(compareWithVal){var newActivated=null;instances.some(function(instance){var thisVal=instance.scope.$eval(onExp);if(thisVal===compareWithVal){newActivated=instance;return true}});if(data.lastActivated!==newActivated){if(data.lastActivated){$animate.removeClass(data.lastActivated.element,clazz)}if(newActivated){$animate.addClass(newActivated.element,clazz)}data.lastActivated=newActivated}};expToData[exp]=data={lastActivated:null,scope:scope,watchFn:watchFn,compareWithExp:compareWithExp,watcher:scope.$watch(compareWithExp,watchFn)}}data.watchFn(scope.$eval(compareWithExp))}function removeScope(e){var removedScope=e.targetScope;var index=linkedScopes.indexOf(removedScope);linkedScopes.splice(index,1);instances.splice(index,1);if(linkedScopes.length){var newWatchScope=linkedScopes[0];angular.forEach(expToData,function(data){if(data.scope===removedScope){data.watcher=newWatchScope.$watch(data.compareWithExp,data.watchFn);data.scope=newWatchScope}})}else{expToData={}}}}}}]);angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function($document,$window){var SCROLLBAR_WIDTH;var OVERFLOW_REGEX={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/};var PLACEMENT_REGEX={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/};return{getRawNode:function getRawNode(elem){return elem[0]||elem},parseStyle:function parseStyle(value){value=parseFloat(value);return isFinite(value)?value:0},offsetParent:function offsetParent(elem){elem=this.getRawNode(elem);var offsetParent=elem.offsetParent||$document[0].documentElement;function isStaticPositioned(el){return($window.getComputedStyle(el).position||"static")==="static"}while(offsetParent&&offsetParent!==$document[0].documentElement&&isStaticPositioned(offsetParent)){offsetParent=offsetParent.offsetParent}return offsetParent||$document[0].documentElement},scrollbarWidth:function scrollbarWidth(){if(angular.isUndefined(SCROLLBAR_WIDTH)){var scrollElem=angular.element('<div style="position: absolute; top: -9999px; width: 50px; height: 50px; overflow: scroll;"></div>');$document.find("body").append(scrollElem);SCROLLBAR_WIDTH=scrollElem[0].offsetWidth-scrollElem[0].clientWidth;SCROLLBAR_WIDTH=isFinite(SCROLLBAR_WIDTH)?SCROLLBAR_WIDTH:0;scrollElem.remove()}return SCROLLBAR_WIDTH},scrollParent:function scrollParent(elem,includeHidden){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal;var documentEl=$document[0].documentElement;var elemStyle=$window.getComputedStyle(elem);var excludeStatic=elemStyle.position==="absolute";var scrollParent=elem.parentElement||documentEl;if(scrollParent===documentEl||elemStyle.position==="fixed"){return documentEl}while(scrollParent.parentElement&&scrollParent!==documentEl){var spStyle=$window.getComputedStyle(scrollParent);if(excludeStatic&&spStyle.position!=="static"){excludeStatic=false}if(!excludeStatic&&overflowRegex.test(spStyle.overflow+spStyle.overflowY+spStyle.overflowX)){break}scrollParent=scrollParent.parentElement}return scrollParent},position:function position(elem,includeMagins){elem=this.getRawNode(elem);var elemOffset=this.offset(elem);if(includeMagins){var elemStyle=$window.getComputedStyle(elem);elemOffset.top-=this.parseStyle(elemStyle.marginTop);elemOffset.left-=this.parseStyle(elemStyle.marginLeft)}var parent=this.offsetParent(elem);var parentOffset={top:0,left:0};if(parent!==$document[0].documentElement){parentOffset=this.offset(parent);parentOffset.top+=parent.clientTop-parent.scrollTop;parentOffset.left+=parent.clientLeft-parent.scrollLeft}return{width:Math.round(angular.isNumber(elemOffset.width)?elemOffset.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemOffset.height)?elemOffset.height:elem.offsetHeight),top:Math.round(elemOffset.top-parentOffset.top),left:Math.round(elemOffset.left-parentOffset.left)}},offset:function offset(elem){elem=this.getRawNode(elem);var elemBCR=elem.getBoundingClientRect();return{width:Math.round(angular.isNumber(elemBCR.width)?elemBCR.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemBCR.height)?elemBCR.height:elem.offsetHeight),top:Math.round(elemBCR.top+($window.pageYOffset||$document[0].documentElement.scrollTop)),left:Math.round(elemBCR.left+($window.pageXOffset||$document[0].documentElement.scrollLeft))}},viewportOffset:function viewportOffset(elem,useDocument,includePadding){elem=this.getRawNode(elem);includePadding=includePadding!==false?true:false;var elemBCR=elem.getBoundingClientRect();var offsetBCR={top:0,left:0,bottom:0,right:0};var offsetParent=useDocument?$document[0].documentElement:this.scrollParent(elem);var offsetParentBCR=offsetParent.getBoundingClientRect();offsetBCR.top=offsetParentBCR.top+offsetParent.clientTop;offsetBCR.left=offsetParentBCR.left+offsetParent.clientLeft;if(offsetParent===$document[0].documentElement){offsetBCR.top+=$window.pageYOffset;offsetBCR.left+=$window.pageXOffset}offsetBCR.bottom=offsetBCR.top+offsetParent.clientHeight;offsetBCR.right=offsetBCR.left+offsetParent.clientWidth;if(includePadding){var offsetParentStyle=$window.getComputedStyle(offsetParent);offsetBCR.top+=this.parseStyle(offsetParentStyle.paddingTop);offsetBCR.bottom-=this.parseStyle(offsetParentStyle.paddingBottom);offsetBCR.left+=this.parseStyle(offsetParentStyle.paddingLeft);offsetBCR.right-=this.parseStyle(offsetParentStyle.paddingRight)}return{top:Math.round(elemBCR.top-offsetBCR.top),bottom:Math.round(offsetBCR.bottom-elemBCR.bottom),left:Math.round(elemBCR.left-offsetBCR.left),right:Math.round(offsetBCR.right-elemBCR.right)}},parsePlacement:function parsePlacement(placement){var autoPlace=PLACEMENT_REGEX.auto.test(placement);if(autoPlace){placement=placement.replace(PLACEMENT_REGEX.auto,"")}placement=placement.split("-");placement[0]=placement[0]||"top";if(!PLACEMENT_REGEX.primary.test(placement[0])){placement[0]="top"}placement[1]=placement[1]||"center";if(!PLACEMENT_REGEX.secondary.test(placement[1])){placement[1]="center"}if(autoPlace){placement[2]=true}else{placement[2]=false}return placement},positionElements:function positionElements(hostElem,targetElem,placement,appendToBody){hostElem=this.getRawNode(hostElem);targetElem=this.getRawNode(targetElem);var targetWidth=angular.isDefined(targetElem.offsetWidth)?targetElem.offsetWidth:targetElem.prop("offsetWidth");var targetHeight=angular.isDefined(targetElem.offsetHeight)?targetElem.offsetHeight:targetElem.prop("offsetHeight");placement=this.parsePlacement(placement);var hostElemPos=appendToBody?this.offset(hostElem):this.position(hostElem);var targetElemPos={top:0,left:0,placement:""};if(placement[2]){var viewportOffset=this.viewportOffset(hostElem);var targetElemStyle=$window.getComputedStyle(targetElem);var adjustedSize={width:targetWidth+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginLeft)+this.parseStyle(targetElemStyle.marginRight))),height:targetHeight+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginTop)+this.parseStyle(targetElemStyle.marginBottom)))};placement[0]=placement[0]==="top"&&adjustedSize.height>viewportOffset.top&&adjustedSize.height<=viewportOffset.bottom?"bottom":placement[0]==="bottom"&&adjustedSize.height>viewportOffset.bottom&&adjustedSize.height<=viewportOffset.top?"top":placement[0]==="left"&&adjustedSize.width>viewportOffset.left&&adjustedSize.width<=viewportOffset.right?"right":placement[0]==="right"&&adjustedSize.width>viewportOffset.right&&adjustedSize.width<=viewportOffset.left?"left":placement[0];
placement[1]=placement[1]==="top"&&adjustedSize.height-hostElemPos.height>viewportOffset.bottom&&adjustedSize.height-hostElemPos.height<=viewportOffset.top?"bottom":placement[1]==="bottom"&&adjustedSize.height-hostElemPos.height>viewportOffset.top&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom?"top":placement[1]==="left"&&adjustedSize.width-hostElemPos.width>viewportOffset.right&&adjustedSize.width-hostElemPos.width<=viewportOffset.left?"right":placement[1]==="right"&&adjustedSize.width-hostElemPos.width>viewportOffset.left&&adjustedSize.width-hostElemPos.width<=viewportOffset.right?"left":placement[1];if(placement[1]==="center"){if(PLACEMENT_REGEX.vertical.test(placement[0])){var xOverflow=hostElemPos.width/2-targetWidth/2;if(viewportOffset.left+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.right){placement[1]="left"}else if(viewportOffset.right+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.left){placement[1]="right"}}else{var yOverflow=hostElemPos.height/2-adjustedSize.height/2;if(viewportOffset.top+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom){placement[1]="top"}else if(viewportOffset.bottom+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.top){placement[1]="bottom"}}}}switch(placement[0]){case"top":targetElemPos.top=hostElemPos.top-targetHeight;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height;break;case"left":targetElemPos.left=hostElemPos.left-targetWidth;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width;break}switch(placement[1]){case"top":targetElemPos.top=hostElemPos.top;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height-targetHeight;break;case"left":targetElemPos.left=hostElemPos.left;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width-targetWidth;break;case"center":if(PLACEMENT_REGEX.vertical.test(placement[0])){targetElemPos.left=hostElemPos.left+hostElemPos.width/2-targetWidth/2}else{targetElemPos.top=hostElemPos.top+hostElemPos.height/2-targetHeight/2}break}targetElemPos.top=Math.round(targetElemPos.top);targetElemPos.left=Math.round(targetElemPos.left);targetElemPos.placement=placement[1]==="center"?placement[0]:placement[0]+"-"+placement[1];return targetElemPos},positionArrow:function positionArrow(elem,placement){elem=this.getRawNode(elem);var isTooltip=true;var innerElem=elem.querySelector(".tooltip-inner");if(!innerElem){isTooltip=false;innerElem=elem.querySelector(".popover-inner")}if(!innerElem){return}var arrowElem=isTooltip?elem.querySelector(".tooltip-arrow"):elem.querySelector(".arrow");if(!arrowElem){return}placement=this.parsePlacement(placement);if(placement[1]==="center"){angular.element(arrowElem).css({top:"",bottom:"",right:"",left:"",margin:""});return}var borderProp="border-"+placement[0]+"-width";var borderWidth=$window.getComputedStyle(arrowElem)[borderProp];var borderRadiusProp="border-";if(PLACEMENT_REGEX.vertical.test(placement[0])){borderRadiusProp+=placement[0]+"-"+placement[1]}else{borderRadiusProp+=placement[1]+"-"+placement[0]}borderRadiusProp+="-radius";var borderRadius=$window.getComputedStyle(isTooltip?innerElem:elem)[borderRadiusProp];var arrowCss={top:"auto",bottom:"auto",left:"auto",right:"auto",margin:0};switch(placement[0]){case"top":arrowCss.bottom=isTooltip?"0":"-"+borderWidth;break;case"bottom":arrowCss.top=isTooltip?"0":"-"+borderWidth;break;case"left":arrowCss.right=isTooltip?"0":"-"+borderWidth;break;case"right":arrowCss.left=isTooltip?"0":"-"+borderWidth;break}arrowCss[placement[1]]=borderRadius;angular.element(arrowElem).css(arrowCss)}}}]);angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position"]).value("$datepickerSuppressError",false).constant("uibDatepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:true,startingDay:0,yearRows:4,yearColumns:5,minDate:null,maxDate:null,shortcutPropagation:false,ngModelOptions:{}}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError","uibDateParser",function($scope,$attrs,$parse,$interpolate,$log,dateFilter,datepickerConfig,$datepickerSuppressError,dateParser){var self=this,ngModelCtrl={$setViewValue:angular.noop},ngModelOptions={};this.modes=["day","month","year"];angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle"],function(key){self[key]=angular.isDefined($attrs[key])?$interpolate($attrs[key])($scope.$parent):datepickerConfig[key]});angular.forEach(["showWeeks","startingDay","yearRows","yearColumns","shortcutPropagation"],function(key){self[key]=angular.isDefined($attrs[key])?$scope.$parent.$eval($attrs[key]):datepickerConfig[key]});angular.forEach(["minDate","maxDate"],function(key){if($attrs[key]){$scope.$parent.$watch($attrs[key],function(value){self[key]=value?angular.isDate(value)?dateParser.fromTimezone(new Date(value),ngModelOptions.timezone):new Date(dateFilter(value,"medium")):null;self.refreshView()})}else{self[key]=datepickerConfig[key]?dateParser.fromTimezone(new Date(datepickerConfig[key]),ngModelOptions.timezone):null}});angular.forEach(["minMode","maxMode"],function(key){if($attrs[key]){$scope.$parent.$watch($attrs[key],function(value){self[key]=$scope[key]=angular.isDefined(value)?value:$attrs[key];if(key==="minMode"&&self.modes.indexOf($scope.datepickerMode)<self.modes.indexOf(self[key])||key==="maxMode"&&self.modes.indexOf($scope.datepickerMode)>self.modes.indexOf(self[key])){$scope.datepickerMode=self[key]}})}else{self[key]=$scope[key]=datepickerConfig[key]||null}});$scope.datepickerMode=$scope.datepickerMode||datepickerConfig.datepickerMode;$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(Math.random()*1e4);if(angular.isDefined($attrs.initDate)){this.activeDate=dateParser.fromTimezone($scope.$parent.$eval($attrs.initDate),ngModelOptions.timezone)||new Date;$scope.$parent.$watch($attrs.initDate,function(initDate){if(initDate&&(ngModelCtrl.$isEmpty(ngModelCtrl.$modelValue)||ngModelCtrl.$invalid)){self.activeDate=dateParser.fromTimezone(initDate,ngModelOptions.timezone);self.refreshView()}})}else{this.activeDate=new Date}$scope.disabled=angular.isDefined($attrs.disabled)||false;if(angular.isDefined($attrs.ngDisabled)){$scope.$parent.$watch($attrs.ngDisabled,function(disabled){$scope.disabled=disabled;self.refreshView()})}$scope.isActive=function(dateObject){if(self.compare(dateObject.date,self.activeDate)===0){$scope.activeDateId=dateObject.uid;return true}return false};this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_;ngModelOptions=ngModelCtrl_.$options||datepickerConfig.ngModelOptions;if(ngModelCtrl.$modelValue){this.activeDate=ngModelCtrl.$modelValue}ngModelCtrl.$render=function(){self.render()}};this.render=function(){if(ngModelCtrl.$viewValue){var date=new Date(ngModelCtrl.$viewValue),isValid=!isNaN(date);if(isValid){this.activeDate=dateParser.fromTimezone(date,ngModelOptions.timezone)}else if(!$datepickerSuppressError){$log.error('Datepicker directive: "ng-model" value must be a Date object')}}this.refreshView()};this.refreshView=function(){if(this.element){$scope.selectedDt=null;this._refreshView();if($scope.activeDt){$scope.activeDateId=$scope.activeDt.uid}var date=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;date=dateParser.fromTimezone(date,ngModelOptions.timezone);ngModelCtrl.$setValidity("dateDisabled",!date||this.element&&!this.isDisabled(date))}};this.createDateObject=function(date,format){var model=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;model=dateParser.fromTimezone(model,ngModelOptions.timezone);var dt={date:date,label:dateFilter(date,format.replace(/d!/,"dd")).replace(/M!/,"MM"),selected:model&&this.compare(date,model)===0,disabled:this.isDisabled(date),current:this.compare(date,new Date)===0,customClass:this.customClass(date)||null};if(model&&this.compare(date,model)===0){$scope.selectedDt=dt}if(self.activeDate&&this.compare(dt.date,self.activeDate)===0){$scope.activeDt=dt}return dt};this.isDisabled=function(date){return $scope.disabled||this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$attrs.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})};this.customClass=function(date){return $scope.customClass({date:date,mode:$scope.datepickerMode})};this.split=function(arr,size){var arrays=[];while(arr.length>0){arrays.push(arr.splice(0,size))}return arrays};$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$viewValue?dateParser.fromTimezone(new Date(ngModelCtrl.$viewValue),ngModelOptions.timezone):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate());dt=dateParser.toTimezone(dt,ngModelOptions.timezone);ngModelCtrl.$setViewValue(dt);ngModelCtrl.$render()}else{self.activeDate=date;$scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)-1]}};$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1);self.refreshView()};$scope.toggleMode=function(direction){direction=direction||1;if($scope.datepickerMode===self.maxMode&&direction===1||$scope.datepickerMode===self.minMode&&direction===-1){return}$scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)+direction]};$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function focusElement(){self.element[0].focus()};$scope.$on("uib:datepicker.focus",focusElement);$scope.keydown=function(evt){var key=$scope.keys[evt.which];if(!key||evt.shiftKey||evt.altKey||$scope.disabled){return}evt.preventDefault();if(!self.shortcutPropagation){evt.stopPropagation()}if(key==="enter"||key==="space"){if(self.isDisabled(self.activeDate)){return}$scope.select(self.activeDate)}else if(evt.ctrlKey&&(key==="up"||key==="down")){$scope.toggleMode(key==="up"?1:-1)}else{self.handleKeyDown(key,evt);self.refreshView()}}}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1};this.element=$element;function getDaysInMonth(year,month){return month===1&&year%4===0&&(year%100!==0||year%400===0)?29:DAYS_IN_MONTH[month]}this.init=function(ctrl){angular.extend(ctrl,this);scope.showWeeks=ctrl.showWeeks;ctrl.refreshView()};this.getDates=function(startDate,n){var dates=new Array(n),current=new Date(startDate),i=0,date;while(i<n){date=new Date(current);dates[i++]=date;current.setDate(current.getDate()+1)}return dates};this._refreshView=function(){var year=this.activeDate.getFullYear(),month=this.activeDate.getMonth(),firstDayOfMonth=new Date(this.activeDate);firstDayOfMonth.setFullYear(year,month,1);var difference=this.startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth);if(numDisplayedFromPreviousMonth>0){firstDate.setDate(-numDisplayedFromPreviousMonth+1)}var days=this.getDates(firstDate,42);for(var i=0;i<42;i++){days[i]=angular.extend(this.createDateObject(days[i],this.formatDay),{secondary:days[i].getMonth()!==month,uid:scope.uniqueId+"-"+i})}scope.labels=new Array(7);for(var j=0;j<7;j++){scope.labels[j]={abbr:dateFilter(days[j].date,this.formatDayHeader),full:dateFilter(days[j].date,"EEEE")}}scope.title=dateFilter(this.activeDate,this.formatDayTitle);scope.rows=this.split(days,7);if(scope.showWeeks){scope.weekNumbers=[];var thursdayIndex=(4+7-this.startingDay)%7,numWeeks=scope.rows.length;for(var curWeek=0;curWeek<numWeeks;curWeek++){scope.weekNumbers.push(getISO8601WeekNumber(scope.rows[curWeek][thursdayIndex].date))}}};this.compare=function(date1,date2){var _date1=new Date(date1.getFullYear(),date1.getMonth(),date1.getDate());var _date2=new Date(date2.getFullYear(),date2.getMonth(),date2.getDate());_date1.setFullYear(date1.getFullYear());_date2.setFullYear(date2.getFullYear());return _date1-_date2};function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/864e5)/7)+1}this.handleKeyDown=function(key,evt){var date=this.activeDate.getDate();if(key==="left"){date=date-1}else if(key==="up"){date=date-7}else if(key==="right"){date=date+1}else if(key==="down"){date=date+7}else if(key==="pageup"||key==="pagedown"){var month=this.activeDate.getMonth()+(key==="pageup"?-1:1);this.activeDate.setMonth(month,1);date=Math.min(getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth()),date)}else if(key==="home"){date=1}else if(key==="end"){date=getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth())}this.activeDate.setDate(date)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){this.step={years:1};this.element=$element;this.init=function(ctrl){angular.extend(ctrl,this);ctrl.refreshView()};this._refreshView=function(){var months=new Array(12),year=this.activeDate.getFullYear(),date;for(var i=0;i<12;i++){date=new Date(this.activeDate);date.setFullYear(year,i,1);months[i]=angular.extend(this.createDateObject(date,this.formatMonth),{uid:scope.uniqueId+"-"+i})}scope.title=dateFilter(this.activeDate,this.formatMonthTitle);scope.rows=this.split(months,3)};this.compare=function(date1,date2){var _date1=new Date(date1.getFullYear(),date1.getMonth());var _date2=new Date(date2.getFullYear(),date2.getMonth());_date1.setFullYear(date1.getFullYear());_date2.setFullYear(date2.getFullYear());return _date1-_date2};this.handleKeyDown=function(key,evt){var date=this.activeDate.getMonth();if(key==="left"){date=date-1}else if(key==="up"){date=date-3}else if(key==="right"){date=date+1}else if(key==="down"){date=date+3}else if(key==="pageup"||key==="pagedown"){var year=this.activeDate.getFullYear()+(key==="pageup"?-1:1);this.activeDate.setFullYear(year)}else if(key==="home"){date=0}else if(key==="end"){date=11}this.activeDate.setMonth(date)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){var columns,range;this.element=$element;function getStartingYear(year){return parseInt((year-1)/range,10)*range+1}this.yearpickerInit=function(){columns=this.yearColumns;range=this.yearRows*columns;this.step={years:range}};this._refreshView=function(){var years=new Array(range),date;for(var i=0,start=getStartingYear(this.activeDate.getFullYear());i<range;i++){date=new Date(this.activeDate);date.setFullYear(start+i,0,1);years[i]=angular.extend(this.createDateObject(date,this.formatYear),{uid:scope.uniqueId+"-"+i})}scope.title=[years[0].label,years[range-1].label].join(" - ");scope.rows=this.split(years,columns);scope.columns=columns};this.compare=function(date1,date2){return date1.getFullYear()-date2.getFullYear()};this.handleKeyDown=function(key,evt){var date=this.activeDate.getFullYear();if(key==="left"){date=date-1}else if(key==="up"){date=date-columns}else if(key==="right"){date=date+1}else if(key==="down"){date=date+columns}else if(key==="pageup"||key==="pagedown"){date+=(key==="pageup"?-1:1)*range}else if(key==="home"){date=getStartingYear(this.activeDate.getFullYear())}else if(key==="end"){date=getStartingYear(this.activeDate.getFullYear())+range-1}this.activeDate.setFullYear(date)}}]).directive("uibDatepicker",function(){return{replace:true,templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function link(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];datepickerCtrl.init(ngModelCtrl)}}}).directive("uibDaypicker",function(){return{replace:true,templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],controller:"UibDaypickerController",link:function link(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],daypickerCtrl=ctrls[1];daypickerCtrl.init(datepickerCtrl)}}}).directive("uibMonthpicker",function(){return{replace:true,templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],controller:"UibMonthpickerController",link:function link(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],monthpickerCtrl=ctrls[1];monthpickerCtrl.init(datepickerCtrl)}}}).directive("uibYearpicker",function(){return{replace:true,templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],controller:"UibYearpickerController",link:function link(scope,element,attrs,ctrls){var ctrl=ctrls[0];angular.extend(ctrl,ctrls[1]);ctrl.yearpickerInit();ctrl.refreshView()}}}).constant("uibDatepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepicker/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:true,appendToBody:false,showButtonBar:true,onOpenFocus:true,altInputFormats:[]}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$parse","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig",function(scope,element,attrs,$compile,$parse,$document,$rootScope,$position,dateFilter,dateParser,datepickerPopupConfig,$timeout,datepickerConfig){var self=this;var cache={},isHtml5DateInput=false;var dateFormat,closeOnDateSelection,appendToBody,onOpenFocus,datepickerPopupTemplateUrl,datepickerTemplateUrl,popupEl,datepickerEl,ngModel,ngModelOptions,$popup,altInputFormats;scope.watchData={};this.init=function(_ngModel_){ngModel=_ngModel_;ngModelOptions=_ngModel_.$options||datepickerConfig.ngModelOptions;closeOnDateSelection=angular.isDefined(attrs.closeOnDateSelection)?scope.$parent.$eval(attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection;appendToBody=angular.isDefined(attrs.datepickerAppendToBody)?scope.$parent.$eval(attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody;onOpenFocus=angular.isDefined(attrs.onOpenFocus)?scope.$parent.$eval(attrs.onOpenFocus):datepickerPopupConfig.onOpenFocus;datepickerPopupTemplateUrl=angular.isDefined(attrs.datepickerPopupTemplateUrl)?attrs.datepickerPopupTemplateUrl:datepickerPopupConfig.datepickerPopupTemplateUrl;datepickerTemplateUrl=angular.isDefined(attrs.datepickerTemplateUrl)?attrs.datepickerTemplateUrl:datepickerPopupConfig.datepickerTemplateUrl;altInputFormats=angular.isDefined(attrs.altInputFormats)?scope.$parent.$eval(attrs.altInputFormats):datepickerPopupConfig.altInputFormats;scope.showButtonBar=angular.isDefined(attrs.showButtonBar)?scope.$parent.$eval(attrs.showButtonBar):datepickerPopupConfig.showButtonBar;if(datepickerPopupConfig.html5Types[attrs.type]){dateFormat=datepickerPopupConfig.html5Types[attrs.type];isHtml5DateInput=true}else{dateFormat=attrs.uibDatepickerPopup||datepickerPopupConfig.datepickerPopup;attrs.$observe("uibDatepickerPopup",function(value,oldValue){var newDateFormat=value||datepickerPopupConfig.datepickerPopup;if(newDateFormat!==dateFormat){dateFormat=newDateFormat;ngModel.$modelValue=null;if(!dateFormat){throw new Error("uibDatepickerPopup must have a date format specified.")}}})}if(!dateFormat){throw new Error("uibDatepickerPopup must have a date format specified.")}if(isHtml5DateInput&&attrs.uibDatepickerPopup){throw new Error("HTML5 date input types do not support custom formats.")}popupEl=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>");scope.ngModelOptions=angular.copy(ngModelOptions);scope.ngModelOptions.timezone=null;popupEl.attr({"ng-model":"date","ng-model-options":"ngModelOptions","ng-change":"dateSelection(date)","template-url":datepickerPopupTemplateUrl});datepickerEl=angular.element(popupEl.children()[0]);datepickerEl.attr("template-url",datepickerTemplateUrl);if(isHtml5DateInput){if(attrs.type==="month"){datepickerEl.attr("datepicker-mode",'"month"');datepickerEl.attr("min-mode","month")}}if(attrs.datepickerOptions){var options=scope.$parent.$eval(attrs.datepickerOptions);if(options&&options.initDate){scope.initDate=dateParser.fromTimezone(options.initDate,ngModelOptions.timezone);datepickerEl.attr("init-date","initDate");delete options.initDate}angular.forEach(options,function(value,option){datepickerEl.attr(cameltoDash(option),value)})}angular.forEach(["minMode","maxMode"],function(key){if(attrs[key]){scope.$parent.$watch(function(){return attrs[key]},function(value){scope.watchData[key]=value});datepickerEl.attr(cameltoDash(key),"watchData."+key)}});angular.forEach(["datepickerMode","shortcutPropagation"],function(key){if(attrs[key]){var getAttribute=$parse(attrs[key]);var propConfig={get:function get(){return getAttribute(scope.$parent)}};datepickerEl.attr(cameltoDash(key),"watchData."+key);if(key==="datepickerMode"){var setAttribute=getAttribute.assign;propConfig.set=function(v){setAttribute(scope.$parent,v)}}Object.defineProperty(scope.watchData,key,propConfig)}});angular.forEach(["minDate","maxDate","initDate"],function(key){if(attrs[key]){var getAttribute=$parse(attrs[key]);scope.$parent.$watch(getAttribute,function(value){if(key==="minDate"||key==="maxDate"){cache[key]=angular.isDate(value)?dateParser.fromTimezone(new Date(value),ngModelOptions.timezone):new Date(dateFilter(value,"medium"))}scope.watchData[key]=cache[key]||dateParser.fromTimezone(new Date(value),ngModelOptions.timezone)});datepickerEl.attr(cameltoDash(key),"watchData."+key)}});if(attrs.dateDisabled){datepickerEl.attr("date-disabled","dateDisabled({ date: date, mode: mode })")}angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRows","yearColumns"],function(key){if(angular.isDefined(attrs[key])){datepickerEl.attr(cameltoDash(key),attrs[key])}});if(attrs.customClass){datepickerEl.attr("custom-class","customClass({ date: date, mode: mode })")}if(!isHtml5DateInput){ngModel.$$parserName="date";ngModel.$validators.date=validator;ngModel.$parsers.unshift(parseDate);ngModel.$formatters.push(function(value){if(ngModel.$isEmpty(value)){scope.date=value;return value}scope.date=dateParser.fromTimezone(value,ngModelOptions.timezone);dateFormat=dateFormat.replace(/M!/,"MM").replace(/d!/,"dd");return dateFilter(scope.date,dateFormat)})}else{ngModel.$formatters.push(function(value){scope.date=dateParser.fromTimezone(value,ngModelOptions.timezone);return value})}ngModel.$viewChangeListeners.push(function(){scope.date=parseDateString(ngModel.$viewValue)});element.bind("keydown",inputKeydownBind);$popup=$compile(popupEl)(scope);popupEl.remove();if(appendToBody){$document.find("body").append($popup)}else{element.after($popup)}scope.$on("$destroy",function(){if(scope.isOpen===true){if(!$rootScope.$$phase){scope.$apply(function(){scope.isOpen=false})}}$popup.remove();element.unbind("keydown",inputKeydownBind);$document.unbind("click",documentClickBind)})};scope.getText=function(key){return scope[key+"Text"]||datepickerPopupConfig[key+"Text"]};scope.isDisabled=function(date){if(date==="today"){date=new Date}return scope.watchData.minDate&&scope.compare(date,cache.minDate)<0||scope.watchData.maxDate&&scope.compare(date,cache.maxDate)>0};scope.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())};scope.dateSelection=function(dt){if(angular.isDefined(dt)){scope.date=dt}var date=scope.date?dateFilter(scope.date,dateFormat):null;element.val(date);ngModel.$setViewValue(date);if(closeOnDateSelection){scope.isOpen=false;element[0].focus()}};scope.keydown=function(evt){if(evt.which===27){evt.stopPropagation();scope.isOpen=false;element[0].focus()}};scope.select=function(date){if(date==="today"){var today=new Date;if(angular.isDate(scope.date)){date=new Date(scope.date);date.setFullYear(today.getFullYear(),today.getMonth(),today.getDate())}else{date=new Date(today.setHours(0,0,0,0))}}scope.dateSelection(date)};scope.close=function(){scope.isOpen=false;element[0].focus()};scope.disabled=angular.isDefined(attrs.disabled)||false;if(attrs.ngDisabled){scope.$parent.$watch($parse(attrs.ngDisabled),function(disabled){scope.disabled=disabled})}scope.$watch("isOpen",function(value){if(value){if(!scope.disabled){scope.position=appendToBody?$position.offset(element):$position.position(element);scope.position.top=scope.position.top+element.prop("offsetHeight");$timeout(function(){if(onOpenFocus){scope.$broadcast("uib:datepicker.focus")}$document.bind("click",documentClickBind)},0,false)}else{scope.isOpen=false}}else{$document.unbind("click",documentClickBind)}});function cameltoDash(string){return string.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function parseDateString(viewValue){var date=dateParser.parse(viewValue,dateFormat,scope.date);if(isNaN(date)){for(var i=0;i<altInputFormats.length;i++){date=dateParser.parse(viewValue,altInputFormats[i],scope.date);if(!isNaN(date)){return date}}}return date}function parseDate(viewValue){if(angular.isNumber(viewValue)){viewValue=new Date(viewValue)}if(!viewValue){return null}if(angular.isDate(viewValue)&&!isNaN(viewValue)){return viewValue}if(angular.isString(viewValue)){var date=parseDateString(viewValue);if(!isNaN(date)){return dateParser.toTimezone(date,ngModelOptions.timezone)}}return ngModel.$options&&ngModel.$options.allowInvalid?viewValue:undefined}function validator(modelValue,viewValue){var value=modelValue||viewValue;if(!attrs.ngRequired&&!value){return true}if(angular.isNumber(value)){value=new Date(value)}if(!value){return true}if(angular.isDate(value)&&!isNaN(value)){return true}if(angular.isString(value)){return!isNaN(parseDateString(viewValue))}return false}function documentClickBind(event){if(!scope.isOpen&&scope.disabled){return}var popup=$popup[0];var dpContainsTarget=element[0].contains(event.target);var popupContainsTarget=popup.contains!==undefined&&popup.contains(event.target);if(scope.isOpen&&!(dpContainsTarget||popupContainsTarget)){scope.$apply(function(){scope.isOpen=false})}}function inputKeydownBind(evt){if(evt.which===27&&scope.isOpen){evt.preventDefault();evt.stopPropagation();scope.$apply(function(){scope.isOpen=false});element[0].focus()}else if(evt.which===40&&!scope.isOpen){evt.preventDefault();evt.stopPropagation();scope.$apply(function(){scope.isOpen=true})}}}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function link(scope,element,attrs,ctrls){var ngModel=ctrls[0],ctrl=ctrls[1];ctrl.init(ngModel)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:true,transclude:true,templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/datepicker/popup.html"}}});angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function($timeout){return function(callback,debounceTime){var timeoutPromise;return function(){var self=this;var args=Array.prototype.slice.call(arguments);if(timeoutPromise){$timeout.cancel(timeoutPromise)}timeoutPromise=$timeout(function(){callback.apply(self,args)},debounceTime)}}}]);angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function($document,$rootScope){var openScope=null;this.open=function(dropdownScope){if(!openScope){$document.on("click",closeDropdown);$document.on("keydown",keybindFilter)}if(openScope&&openScope!==dropdownScope){openScope.isOpen=false}openScope=dropdownScope};this.close=function(dropdownScope){if(openScope===dropdownScope){openScope=null;$document.off("click",closeDropdown);$document.off("keydown",keybindFilter)}};var closeDropdown=function closeDropdown(evt){if(!openScope){return}if(evt&&openScope.getAutoClose()==="disabled"){return}if(evt&&evt.which===3){return}var toggleElement=openScope.getToggleElement();if(evt&&toggleElement&&toggleElement[0].contains(evt.target)){return}var dropdownElement=openScope.getDropdownElement();if(evt&&openScope.getAutoClose()==="outsideClick"&&dropdownElement&&dropdownElement[0].contains(evt.target)){return}openScope.isOpen=false;if(!$rootScope.$$phase){openScope.$apply()}};var keybindFilter=function keybindFilter(evt){if(evt.which===27){openScope.focusToggleElement();closeDropdown()}else if(openScope.isKeynavEnabled()&&[38,40].indexOf(evt.which)!==-1&&openScope.isOpen){evt.preventDefault();evt.stopPropagation();openScope.focusDropdownEntry(evt.which)}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function($scope,$element,$attrs,$parse,dropdownConfig,uibDropdownService,$animate,$position,$document,$compile,$templateRequest){var self=this,scope=$scope.$new(),templateScope,appendToOpenClass=dropdownConfig.appendToOpenClass,openClass=dropdownConfig.openClass,getIsOpen,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop,appendToBody=false,appendTo=null,keynavEnabled=false,selectedOption=null,body=$document.find("body");$element.addClass("dropdown");this.init=function(){if($attrs.isOpen){getIsOpen=$parse($attrs.isOpen);setIsOpen=getIsOpen.assign;$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value})}if(angular.isDefined($attrs.dropdownAppendTo)){var appendToEl=$parse($attrs.dropdownAppendTo)(scope);if(appendToEl){appendTo=angular.element(appendToEl)}}appendToBody=angular.isDefined($attrs.dropdownAppendToBody);keynavEnabled=angular.isDefined($attrs.keyboardNav);if(appendToBody&&!appendTo){appendTo=body}if(appendTo&&self.dropdownMenu){appendTo.append(self.dropdownMenu);$element.on("$destroy",function handleDestroyEvent(){self.dropdownMenu.remove()})}};this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen};this.isOpen=function(){return scope.isOpen};scope.getToggleElement=function(){return self.toggleElement};scope.getAutoClose=function(){return $attrs.autoClose||"always"};scope.getElement=function(){return $element};scope.isKeynavEnabled=function(){return keynavEnabled};scope.focusDropdownEntry=function(keyCode){var elems=self.dropdownMenu?angular.element(self.dropdownMenu).find("a"):$element.find("ul").eq(0).find("a");switch(keyCode){case 40:{if(!angular.isNumber(self.selectedOption)){self.selectedOption=0}else{self.selectedOption=self.selectedOption===elems.length-1?self.selectedOption:self.selectedOption+1}break}case 38:{if(!angular.isNumber(self.selectedOption)){self.selectedOption=elems.length-1}else{self.selectedOption=self.selectedOption===0?0:self.selectedOption-1}break}}elems[self.selectedOption].focus()};scope.getDropdownElement=function(){return self.dropdownMenu};scope.focusToggleElement=function(){if(self.toggleElement){self.toggleElement[0].focus();
}};scope.$watch("isOpen",function(isOpen,wasOpen){if(appendTo&&self.dropdownMenu){var pos=$position.positionElements($element,self.dropdownMenu,"bottom-left",true),css,rightalign;css={top:pos.top+"px",display:isOpen?"block":"none"};rightalign=self.dropdownMenu.hasClass("dropdown-menu-right");if(!rightalign){css.left=pos.left+"px";css.right="auto"}else{css.left="auto";css.right=window.innerWidth-(pos.left+$element.prop("offsetWidth"))+"px"}if(!appendToBody){var appendOffset=$position.offset(appendTo);css.top=pos.top-appendOffset.top+"px";if(!rightalign){css.left=pos.left-appendOffset.left+"px"}else{css.right=window.innerWidth-(pos.left-appendOffset.left+$element.prop("offsetWidth"))+"px"}}self.dropdownMenu.css(css)}var openContainer=appendTo?appendTo:$element;$animate[isOpen?"addClass":"removeClass"](openContainer,appendTo?appendToOpenClass:openClass).then(function(){if(angular.isDefined(isOpen)&&isOpen!==wasOpen){toggleInvoker($scope,{open:!!isOpen})}});if(isOpen){if(self.dropdownMenuTemplateUrl){$templateRequest(self.dropdownMenuTemplateUrl).then(function(tplContent){templateScope=scope.$new();$compile(tplContent.trim())(templateScope,function(dropdownElement){var newEl=dropdownElement;self.dropdownMenu.replaceWith(newEl);self.dropdownMenu=newEl})})}scope.focusToggleElement();uibDropdownService.open(scope)}else{if(self.dropdownMenuTemplateUrl){if(templateScope){templateScope.$destroy()}var newEl=angular.element('<ul class="dropdown-menu"></ul>');self.dropdownMenu.replaceWith(newEl);self.dropdownMenu=newEl}uibDropdownService.close(scope);self.selectedOption=null}if(angular.isFunction(setIsOpen)){setIsOpen($scope,isOpen)}});$scope.$on("$locationChangeSuccess",function(){if(scope.getAutoClose()!=="disabled"){scope.isOpen=false}})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function link(scope,element,attrs,dropdownCtrl){dropdownCtrl.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function link(scope,element,attrs,dropdownCtrl){if(!dropdownCtrl||angular.isDefined(attrs.dropdownNested)){return}element.addClass("dropdown-menu");var tplUrl=attrs.templateUrl;if(tplUrl){dropdownCtrl.dropdownMenuTemplateUrl=tplUrl}if(!dropdownCtrl.dropdownMenu){dropdownCtrl.dropdownMenu=element}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function link(scope,element,attrs,dropdownCtrl){if(!dropdownCtrl){return}element.addClass("dropdown-toggle");dropdownCtrl.toggleElement=element;var toggleDropdown=function toggleDropdown(event){event.preventDefault();if(!element.hasClass("disabled")&&!attrs.disabled){scope.$apply(function(){dropdownCtrl.toggle()})}};element.bind("click",toggleDropdown);element.attr({"aria-haspopup":true,"aria-expanded":false});scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)});scope.$on("$destroy",function(){element.unbind("click",toggleDropdown)})}}});angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function createNew(){var stack=[];return{add:function add(key,value){stack.push({key:key,value:value})},get:function get(key){for(var i=0;i<stack.length;i++){if(key===stack[i].key){return stack[i]}}},keys:function keys(){var keys=[];for(var i=0;i<stack.length;i++){keys.push(stack[i].key)}return keys},top:function top(){return stack[stack.length-1]},remove:function remove(key){var idx=-1;for(var i=0;i<stack.length;i++){if(key===stack[i].key){idx=i;break}}return stack.splice(idx,1)[0]},removeTop:function removeTop(){return stack.splice(stack.length-1,1)[0]},length:function length(){return stack.length}}}}});angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function createNew(){var map={};return{entries:function entries(){return Object.keys(map).map(function(key){return{key:key,value:map[key]}})},get:function get(key){return map[key]},hasKey:function hasKey(key){return!!map[key]},keys:function keys(){return Object.keys(map)},put:function put(key,value){if(!map[key]){map[key]=[]}map[key].push(value)},remove:function remove(key,value){var values=map[key];if(!values){return}var idx=values.indexOf(value);if(idx!==-1){values.splice(idx,1)}if(!values.length){delete map[key]}}}}}}).provider("$uibResolve",function(){var resolve=this;this.resolver=null;this.setResolver=function(resolver){this.resolver=resolver};this.$get=["$injector","$q",function($injector,$q){var resolver=resolve.resolver?$injector.get(resolve.resolver):null;return{resolve:function resolve(invocables,locals,parent,self){if(resolver){return resolver.resolve(invocables,locals,parent,self)}var promises=[];angular.forEach(invocables,function(value){if(angular.isFunction(value)||angular.isArray(value)){promises.push($q.resolve($injector.invoke(value)))}else if(angular.isString(value)){promises.push($q.resolve($injector.get(value)))}else{promises.push($q.resolve(value))}});return $q.all(promises).then(function(resolves){var resolveObj={};var resolveIter=0;angular.forEach(invocables,function(value,key){resolveObj[key]=resolves[resolveIter++]});return resolveObj})}}}]}).directive("uibModalBackdrop",["$animateCss","$injector","$uibModalStack",function($animateCss,$injector,$modalStack){return{replace:true,templateUrl:"uib/template/modal/backdrop.html",compile:function compile(tElement,tAttrs){tElement.addClass(tAttrs.backdropClass);return linkFn}};function linkFn(scope,element,attrs){if(attrs.modalInClass){$animateCss(element,{addClass:attrs.modalInClass}).start();scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();if(scope.modalOptions.animation){$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done)}else{done()}})}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animate","$animateCss","$document",function($modalStack,$q,$animate,$animateCss,$document){return{scope:{index:"@"},replace:true,transclude:true,templateUrl:function templateUrl(tElement,tAttrs){return tAttrs.templateUrl||"uib/template/modal/window.html"},link:function link(scope,element,attrs){element.addClass(attrs.windowClass||"");element.addClass(attrs.windowTopClass||"");scope.size=attrs.size;scope.close=function(evt){var modal=$modalStack.getTop();if(modal&&modal.value.backdrop&&modal.value.backdrop!=="static"&&evt.target===evt.currentTarget){evt.preventDefault();evt.stopPropagation();$modalStack.dismiss(modal.key,"backdrop click")}};element.on("click",scope.close);scope.$isRendered=true;var modalRenderDeferObj=$q.defer();attrs.$observe("modalRender",function(value){if(value==="true"){modalRenderDeferObj.resolve()}});modalRenderDeferObj.promise.then(function(){var animationPromise=null;if(attrs.modalInClass){animationPromise=$animateCss(element,{addClass:attrs.modalInClass}).start();scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();if($animateCss){$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done)}else{$animate.removeClass(element,attrs.modalInClass).then(done)}})}$q.when(animationPromise).then(function(){if(!($document[0].activeElement&&element[0].contains($document[0].activeElement))){var inputWithAutofocus=element[0].querySelector("[autofocus]");if(inputWithAutofocus){inputWithAutofocus.focus()}else{element[0].focus()}}});var modal=$modalStack.getTop();if(modal){$modalStack.modalRendered(modal.key)}})}}}]).directive("uibModalAnimationClass",function(){return{compile:function compile(tElement,tAttrs){if(tAttrs.modalAnimation){tElement.addClass(tAttrs.uibModalAnimationClass)}}}}).directive("uibModalTransclude",function(){return{link:function link(scope,element,attrs,controller,transclude){transclude(scope.$parent,function(clone){element.empty();element.append(clone)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap",function($animate,$animateCss,$document,$compile,$rootScope,$q,$$multiMap,$$stackedMap){var OPENED_MODAL_CLASS="modal-open";var backdropDomEl,backdropScope;var openedWindows=$$stackedMap.createNew();var openedClasses=$$multiMap.createNew();var $modalStack={NOW_CLOSING_EVENT:"modal.stack.now-closing"};var focusableElementList;var focusIndex=0;var tababbleSelector="a[href], area[href], input:not([disabled]), "+"button:not([disabled]),select:not([disabled]), textarea:not([disabled]), "+"iframe, object, embed, *[tabindex], *[contenteditable=true]";function backdropIndex(){var topBackdropIndex=-1;var opened=openedWindows.keys();for(var i=0;i<opened.length;i++){if(openedWindows.get(opened[i]).value.backdrop){topBackdropIndex=i}}return topBackdropIndex}$rootScope.$watch(backdropIndex,function(newBackdropIndex){if(backdropScope){backdropScope.index=newBackdropIndex}});function removeModalWindow(modalInstance,elementToReceiveFocus){var modalWindow=openedWindows.get(modalInstance).value;var appendToElement=modalWindow.appendTo;openedWindows.remove(modalInstance);removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,function(){var modalBodyClass=modalWindow.openedClass||OPENED_MODAL_CLASS;openedClasses.remove(modalBodyClass,modalInstance);appendToElement.toggleClass(modalBodyClass,openedClasses.hasKey(modalBodyClass));toggleTopWindowClass(true)});checkRemoveBackdrop();if(elementToReceiveFocus&&elementToReceiveFocus.focus){elementToReceiveFocus.focus()}else if(appendToElement.focus){appendToElement.focus()}}function toggleTopWindowClass(toggleSwitch){var modalWindow;if(openedWindows.length()>0){modalWindow=openedWindows.top().value;modalWindow.modalDomEl.toggleClass(modalWindow.windowTopClass||"",toggleSwitch)}}function checkRemoveBackdrop(){if(backdropDomEl&&backdropIndex()===-1){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,function(){backdropScopeRef=null});backdropDomEl=undefined;backdropScope=undefined}}function removeAfterAnimate(domEl,scope,done,closedDeferred){var asyncDeferred;var asyncPromise=null;var setIsAsync=function setIsAsync(){if(!asyncDeferred){asyncDeferred=$q.defer();asyncPromise=asyncDeferred.promise}return function asyncDone(){asyncDeferred.resolve()}};scope.$broadcast($modalStack.NOW_CLOSING_EVENT,setIsAsync);return $q.when(asyncPromise).then(afterAnimating);function afterAnimating(){if(afterAnimating.done){return}afterAnimating.done=true;$animateCss(domEl,{event:"leave"}).start().then(function(){domEl.remove();if(closedDeferred){closedDeferred.resolve()}});scope.$destroy();if(done){done()}}}$document.on("keydown",keydownListener);$rootScope.$on("$destroy",function(){$document.off("keydown",keydownListener)});function keydownListener(evt){if(evt.isDefaultPrevented()){return evt}var modal=openedWindows.top();if(modal){switch(evt.which){case 27:{if(modal.value.keyboard){evt.preventDefault();$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")})}break}case 9:{$modalStack.loadFocusElementList(modal);var focusChanged=false;if(evt.shiftKey){if($modalStack.isFocusInFirstItem(evt)){focusChanged=$modalStack.focusLastFocusableElement()}}else{if($modalStack.isFocusInLastItem(evt)){focusChanged=$modalStack.focusFirstFocusableElement()}}if(focusChanged){evt.preventDefault();evt.stopPropagation()}break}}}}$modalStack.open=function(modalInstance,modal){var modalOpener=$document[0].activeElement,modalBodyClass=modal.openedClass||OPENED_MODAL_CLASS;toggleTopWindowClass(false);openedWindows.add(modalInstance,{deferred:modal.deferred,renderDeferred:modal.renderDeferred,closedDeferred:modal.closedDeferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard,openedClass:modal.openedClass,windowTopClass:modal.windowTopClass,animation:modal.animation,appendTo:modal.appendTo});openedClasses.put(modalBodyClass,modalInstance);var appendToElement=modal.appendTo,currBackdropIndex=backdropIndex();if(!appendToElement.length){throw new Error("appendTo element not found. Make sure that the element passed is in DOM.")}if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(true);backdropScope.modalOptions=modal;backdropScope.index=currBackdropIndex;backdropDomEl=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>');backdropDomEl.attr("backdrop-class",modal.backdropClass);if(modal.animation){backdropDomEl.attr("modal-animation","true")}$compile(backdropDomEl)(backdropScope);$animate.enter(backdropDomEl,appendToElement)}var angularDomEl=angular.element('<div uib-modal-window="modal-window"></div>');angularDomEl.attr({"template-url":modal.windowTemplateUrl,"window-class":modal.windowClass,"window-top-class":modal.windowTopClass,size:modal.size,index:openedWindows.length()-1,animate:"animate"}).html(modal.content);if(modal.animation){angularDomEl.attr("modal-animation","true")}$animate.enter(angularDomEl,appendToElement).then(function(){$compile(angularDomEl)(modal.scope);$animate.addClass(appendToElement,modalBodyClass)});openedWindows.top().value.modalDomEl=angularDomEl;openedWindows.top().value.modalOpener=modalOpener;$modalStack.clearFocusListCache()};function broadcastClosing(modalWindow,resultOrReason,closing){return!modalWindow.value.modalScope.$broadcast("modal.closing",resultOrReason,closing).defaultPrevented}$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);if(modalWindow&&broadcastClosing(modalWindow,result,true)){modalWindow.value.modalScope.$$uibDestructionScheduled=true;modalWindow.value.deferred.resolve(result);removeModalWindow(modalInstance,modalWindow.value.modalOpener);return true}return!modalWindow};$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);if(modalWindow&&broadcastClosing(modalWindow,reason,false)){modalWindow.value.modalScope.$$uibDestructionScheduled=true;modalWindow.value.deferred.reject(reason);removeModalWindow(modalInstance,modalWindow.value.modalOpener);return true}return!modalWindow};$modalStack.dismissAll=function(reason){var topModal=this.getTop();while(topModal&&this.dismiss(topModal.key,reason)){topModal=this.getTop()}};$modalStack.getTop=function(){return openedWindows.top()};$modalStack.modalRendered=function(modalInstance){var modalWindow=openedWindows.get(modalInstance);if(modalWindow){modalWindow.value.renderDeferred.resolve()}};$modalStack.focusFirstFocusableElement=function(){if(focusableElementList.length>0){focusableElementList[0].focus();return true}return false};$modalStack.focusLastFocusableElement=function(){if(focusableElementList.length>0){focusableElementList[focusableElementList.length-1].focus();return true}return false};$modalStack.isFocusInFirstItem=function(evt){if(focusableElementList.length>0){return(evt.target||evt.srcElement)===focusableElementList[0]}return false};$modalStack.isFocusInLastItem=function(evt){if(focusableElementList.length>0){return(evt.target||evt.srcElement)===focusableElementList[focusableElementList.length-1]}return false};$modalStack.clearFocusListCache=function(){focusableElementList=[];focusIndex=0};$modalStack.loadFocusElementList=function(modalWindow){if(focusableElementList===undefined||!focusableElementList.length){if(modalWindow){var modalDomE1=modalWindow.value.modalDomEl;if(modalDomE1&&modalDomE1.length){focusableElementList=modalDomE1[0].querySelectorAll(tababbleSelector)}}}};return $modalStack}]).provider("$uibModal",function(){var $modalProvider={options:{animation:true,backdrop:true,keyboard:true},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function($rootScope,$q,$document,$templateRequest,$controller,$uibResolve,$modalStack){var $modal={};function getTemplatePromise(options){return options.template?$q.when(options.template):$templateRequest(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl)}var promiseChain=null;$modal.getPromiseChain=function(){return promiseChain};$modal.open=function(modalOptions){var modalResultDeferred=$q.defer();var modalOpenedDeferred=$q.defer();var modalClosedDeferred=$q.defer();var modalRenderDeferred=$q.defer();var modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,closed:modalClosedDeferred.promise,rendered:modalRenderDeferred.promise,close:function close(result){return $modalStack.close(modalInstance,result)},dismiss:function dismiss(reason){return $modalStack.dismiss(modalInstance,reason)}};modalOptions=angular.extend({},$modalProvider.options,modalOptions);modalOptions.resolve=modalOptions.resolve||{};modalOptions.appendTo=modalOptions.appendTo||$document.find("body").eq(0);if(!modalOptions.template&&!modalOptions.templateUrl){throw new Error("One of template or templateUrl options is required.")}var templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions),$uibResolve.resolve(modalOptions.resolve,{},null,null)]);function resolveWithTemplate(){return templateAndResolvePromise}var samePromise;samePromise=promiseChain=$q.all([promiseChain]).then(resolveWithTemplate,resolveWithTemplate).then(function resolveSuccess(tplAndVars){var providedScope=modalOptions.scope||$rootScope;var modalScope=providedScope.$new();modalScope.$close=modalInstance.close;modalScope.$dismiss=modalInstance.dismiss;modalScope.$on("$destroy",function(){if(!modalScope.$$uibDestructionScheduled){modalScope.$dismiss("$uibUnscheduledDestruction")}});var ctrlInstance,ctrlLocals={};if(modalOptions.controller){ctrlLocals.$scope=modalScope;ctrlLocals.$uibModalInstance=modalInstance;angular.forEach(tplAndVars[1],function(value,key){ctrlLocals[key]=value});ctrlInstance=$controller(modalOptions.controller,ctrlLocals);if(modalOptions.controllerAs){if(modalOptions.bindToController){ctrlInstance.$close=modalScope.$close;ctrlInstance.$dismiss=modalScope.$dismiss;angular.extend(ctrlInstance,providedScope)}modalScope[modalOptions.controllerAs]=ctrlInstance}}$modalStack.open(modalInstance,{scope:modalScope,deferred:modalResultDeferred,renderDeferred:modalRenderDeferred,closedDeferred:modalClosedDeferred,content:tplAndVars[0],animation:modalOptions.animation,backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowTopClass:modalOptions.windowTopClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,size:modalOptions.size,openedClass:modalOptions.openedClass,appendTo:modalOptions.appendTo});modalOpenedDeferred.resolve(true)},function resolveError(reason){modalOpenedDeferred.reject(reason);modalResultDeferred.reject(reason)})["finally"](function(){if(promiseChain===samePromise){promiseChain=null}});return modalInstance};return $modal}]};return $modalProvider});angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function($parse){return{create:function create(ctrl,$scope,$attrs){ctrl.setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop;ctrl.ngModelCtrl={$setViewValue:angular.noop};ctrl.init=function(ngModelCtrl,config){ctrl.ngModelCtrl=ngModelCtrl;ctrl.config=config;ngModelCtrl.$render=function(){ctrl.render()};if($attrs.itemsPerPage){$scope.$parent.$watch($parse($attrs.itemsPerPage),function(value){ctrl.itemsPerPage=parseInt(value,10);$scope.totalPages=ctrl.calculateTotalPages();ctrl.updatePage()})}else{ctrl.itemsPerPage=config.itemsPerPage}$scope.$watch("totalItems",function(newTotal,oldTotal){if(angular.isDefined(newTotal)||newTotal!==oldTotal){$scope.totalPages=ctrl.calculateTotalPages();ctrl.updatePage()}})};ctrl.calculateTotalPages=function(){var totalPages=ctrl.itemsPerPage<1?1:Math.ceil($scope.totalItems/ctrl.itemsPerPage);return Math.max(totalPages||0,1)};ctrl.render=function(){$scope.page=parseInt(ctrl.ngModelCtrl.$viewValue,10)||1};$scope.selectPage=function(page,evt){if(evt){evt.preventDefault()}var clickAllowed=!$scope.ngDisabled||!evt;if(clickAllowed&&$scope.page!==page&&page>0&&page<=$scope.totalPages){if(evt&&evt.target){evt.target.blur()}ctrl.ngModelCtrl.$setViewValue(page);ctrl.ngModelCtrl.$render()}};$scope.getText=function(key){return $scope[key+"Text"]||ctrl.config[key+"Text"]};$scope.noPrevious=function(){return $scope.page===1};$scope.noNext=function(){return $scope.page===$scope.totalPages};ctrl.updatePage=function(){ctrl.setNumPages($scope.$parent,$scope.totalPages);if($scope.page>$scope.totalPages){$scope.selectPage($scope.totalPages)}else{ctrl.ngModelCtrl.$render()}}}}}]);angular.module("ui.bootstrap.pager",["ui.bootstrap.paging"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function($scope,$attrs,uibPaging,uibPagerConfig){$scope.align=angular.isDefined($attrs.align)?$scope.$parent.$eval($attrs.align):uibPagerConfig.align;uibPaging.create(this,$scope,$attrs)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:true}).directive("uibPager",["uibPagerConfig",function(uibPagerConfig){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPagerController",controllerAs:"pager",templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/pager/pager.html"},replace:true,link:function link(scope,element,attrs,ctrls){var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(!ngModelCtrl){return}paginationCtrl.init(ngModelCtrl,uibPagerConfig)}}}]);angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function($scope,$attrs,$parse,uibPaging,uibPaginationConfig){var ctrl=this;var maxSize=angular.isDefined($attrs.maxSize)?$scope.$parent.$eval($attrs.maxSize):uibPaginationConfig.maxSize,rotate=angular.isDefined($attrs.rotate)?$scope.$parent.$eval($attrs.rotate):uibPaginationConfig.rotate,forceEllipses=angular.isDefined($attrs.forceEllipses)?$scope.$parent.$eval($attrs.forceEllipses):uibPaginationConfig.forceEllipses,boundaryLinkNumbers=angular.isDefined($attrs.boundaryLinkNumbers)?$scope.$parent.$eval($attrs.boundaryLinkNumbers):uibPaginationConfig.boundaryLinkNumbers;$scope.boundaryLinks=angular.isDefined($attrs.boundaryLinks)?$scope.$parent.$eval($attrs.boundaryLinks):uibPaginationConfig.boundaryLinks;$scope.directionLinks=angular.isDefined($attrs.directionLinks)?$scope.$parent.$eval($attrs.directionLinks):uibPaginationConfig.directionLinks;uibPaging.create(this,$scope,$attrs);if($attrs.maxSize){$scope.$parent.$watch($parse($attrs.maxSize),function(value){maxSize=parseInt(value,10);ctrl.render()})}function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[];var startPage=1,endPage=totalPages;var isMaxSized=angular.isDefined(maxSize)&&maxSize<totalPages;if(isMaxSized){if(rotate){startPage=Math.max(currentPage-Math.floor(maxSize/2),1);endPage=startPage+maxSize-1;if(endPage>totalPages){endPage=totalPages;startPage=endPage-maxSize+1}}else{startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1;endPage=Math.min(startPage+maxSize-1,totalPages)}}for(var number=startPage;number<=endPage;number++){var page=makePage(number,number,number===currentPage);pages.push(page)}if(isMaxSized&&maxSize>0&&(!rotate||forceEllipses||boundaryLinkNumbers)){if(startPage>1){if(!boundaryLinkNumbers||startPage>3){var previousPageSet=makePage(startPage-1,"...",false);pages.unshift(previousPageSet)}if(boundaryLinkNumbers){if(startPage===3){var secondPageLink=makePage(2,"2",false);pages.unshift(secondPageLink)}var firstPageLink=makePage(1,"1",false);pages.unshift(firstPageLink)}}if(endPage<totalPages){if(!boundaryLinkNumbers||endPage<totalPages-2){var nextPageSet=makePage(endPage+1,"...",false);pages.push(nextPageSet)}if(boundaryLinkNumbers){if(endPage===totalPages-2){var secondToLastPageLink=makePage(totalPages-1,totalPages-1,false);pages.push(secondToLastPageLink)}var lastPageLink=makePage(totalPages,totalPages,false);pages.push(lastPageLink)}}}return pages}var originalRender=this.render;this.render=function(){originalRender();if($scope.page>0&&$scope.page<=$scope.totalPages){$scope.pages=getPages($scope.page,$scope.totalPages)}}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:false,boundaryLinkNumbers:false,directionLinks:true,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:true,forceEllipses:false}).directive("uibPagination",["$parse","uibPaginationConfig",function($parse,uibPaginationConfig){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||"uib/template/pagination/pagination.html"},replace:true,link:function link(scope,element,attrs,ctrls){var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(!ngModelCtrl){return}paginationCtrl.init(ngModelCtrl,uibPaginationConfig)}}}]);angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){var defaultOptions={placement:"top",placementClassPrefix:"",animation:true,popupDelay:0,popupCloseDelay:0,useContentExp:false};var triggerMap={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""};var globalOptions={};this.options=function(value){angular.extend(globalOptions,value)};this.setTriggers=function setTriggers(triggers){angular.extend(triggerMap,triggers)};function snake_case(name){var regexp=/[A-Z]/g;var separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function($window,$compile,$timeout,$document,$position,$interpolate,$rootScope,$parse,$$stackedMap){var openedTooltips=$$stackedMap.createNew();$document.on("keypress",keypressListener);$rootScope.$on("$destroy",function(){$document.off("keypress",keypressListener)});function keypressListener(e){if(e.which===27){var last=openedTooltips.top();if(last){last.value.close();openedTooltips.removeTop();last=null}}}return function $tooltip(ttType,prefix,defaultTriggerShow,options){options=angular.extend({},defaultOptions,globalOptions,options);function getTriggers(trigger){var show=(trigger||options.trigger||defaultTriggerShow).split(" ");var hide=show.map(function(trigger){return triggerMap[trigger]||trigger});return{show:show,hide:hide}}var directiveName=snake_case(ttType);var startSym=$interpolate.startSymbol();var endSym=$interpolate.endSymbol();var template="<div "+directiveName+"-popup "+'title="'+startSym+"title"+endSym+'" '+(options.useContentExp?'content-exp="contentExp()" ':'content="'+startSym+"content"+endSym+'" ')+'placement="'+startSym+"placement"+endSym+'" '+'popup-class="'+startSym+"popupClass"+endSym+'" '+'animation="animation" '+'is-open="isOpen"'+'origin-scope="origScope" '+'style="visibility: hidden; display: block; top: -9999px; left: -9999px;"'+">"+"</div>";return{compile:function compile(tElem,tAttrs){var tooltipLinker=$compile(template);return function link(scope,element,attrs,tooltipCtrl){var tooltip;var tooltipLinkedScope;var transitionTimeout;var showTimeout;var hideTimeout;var positionTimeout;var appendToBody=angular.isDefined(options.appendToBody)?options.appendToBody:false;var triggers=getTriggers(undefined);var hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]);var ttScope=scope.$new(true);var repositionScheduled=false;var isOpenParse=angular.isDefined(attrs[prefix+"IsOpen"])?$parse(attrs[prefix+"IsOpen"]):false;var contentParse=options.useContentExp?$parse(attrs[ttType]):false;var observers=[];var positionTooltip=function positionTooltip(){if(!tooltip||!tooltip.html()){return}if(!positionTimeout){positionTimeout=$timeout(function(){tooltip.css({top:0,left:0});var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);tooltip.css({top:ttPosition.top+"px",left:ttPosition.left+"px",visibility:"visible"});if(options.placementClassPrefix){tooltip.removeClass("top bottom left right")}tooltip.removeClass(options.placementClassPrefix+"top "+options.placementClassPrefix+"top-left "+options.placementClassPrefix+"top-right "+options.placementClassPrefix+"bottom "+options.placementClassPrefix+"bottom-left "+options.placementClassPrefix+"bottom-right "+options.placementClassPrefix+"left "+options.placementClassPrefix+"left-top "+options.placementClassPrefix+"left-bottom "+options.placementClassPrefix+"right "+options.placementClassPrefix+"right-top "+options.placementClassPrefix+"right-bottom");var placement=ttPosition.placement.split("-");tooltip.addClass(placement[0],options.placementClassPrefix+ttPosition.placement);$position.positionArrow(tooltip,ttPosition.placement);positionTimeout=null},0,false)}};ttScope.origScope=scope;ttScope.isOpen=false;openedTooltips.add(ttScope,{close:hide});function toggleTooltipBind(){if(!ttScope.isOpen){showTooltipBind()}else{hideTooltipBind()}}function showTooltipBind(){if(hasEnableExp&&!scope.$eval(attrs[prefix+"Enable"])){return}cancelHide();prepareTooltip();if(ttScope.popupDelay){if(!showTimeout){showTimeout=$timeout(show,ttScope.popupDelay,false)}}else{show()}}function hideTooltipBind(){cancelShow();if(ttScope.popupCloseDelay){if(!hideTimeout){hideTimeout=$timeout(hide,ttScope.popupCloseDelay,false)}}else{hide()}}function show(){cancelShow();cancelHide();if(!ttScope.content){return angular.noop}createTooltip();ttScope.$evalAsync(function(){ttScope.isOpen=true;assignIsOpen(true);positionTooltip()})}function cancelShow(){if(showTimeout){$timeout.cancel(showTimeout);showTimeout=null}if(positionTimeout){$timeout.cancel(positionTimeout);positionTimeout=null}}function hide(){if(!ttScope){return}ttScope.$evalAsync(function(){ttScope.isOpen=false;assignIsOpen(false);if(ttScope.animation){if(!transitionTimeout){transitionTimeout=$timeout(removeTooltip,150,false)}}else{removeTooltip()}})}function cancelHide(){if(hideTimeout){$timeout.cancel(hideTimeout);hideTimeout=null}if(transitionTimeout){$timeout.cancel(transitionTimeout);transitionTimeout=null}}function createTooltip(){if(tooltip){return}tooltipLinkedScope=ttScope.$new();tooltip=tooltipLinker(tooltipLinkedScope,function(tooltip){if(appendToBody){$document.find("body").append(tooltip)}else{element.after(tooltip)}});prepObservers()}function removeTooltip(){cancelShow();cancelHide();unregisterObservers();if(tooltip){tooltip.remove();tooltip=null}if(tooltipLinkedScope){tooltipLinkedScope.$destroy();tooltipLinkedScope=null}}function prepareTooltip(){ttScope.title=attrs[prefix+"Title"];if(contentParse){ttScope.content=contentParse(scope)}else{ttScope.content=attrs[ttType]}ttScope.popupClass=attrs[prefix+"Class"];ttScope.placement=angular.isDefined(attrs[prefix+"Placement"])?attrs[prefix+"Placement"]:options.placement;var delay=parseInt(attrs[prefix+"PopupDelay"],10);var closeDelay=parseInt(attrs[prefix+"PopupCloseDelay"],10);ttScope.popupDelay=!isNaN(delay)?delay:options.popupDelay;ttScope.popupCloseDelay=!isNaN(closeDelay)?closeDelay:options.popupCloseDelay}function assignIsOpen(isOpen){if(isOpenParse&&angular.isFunction(isOpenParse.assign)){isOpenParse.assign(scope,isOpen)}}ttScope.contentExp=function(){return ttScope.content};attrs.$observe("disabled",function(val){if(val){cancelShow()}if(val&&ttScope.isOpen){hide()}});if(isOpenParse){scope.$watch(isOpenParse,function(val){if(ttScope&&!val===ttScope.isOpen){toggleTooltipBind()}})}function prepObservers(){observers.length=0;if(contentParse){observers.push(scope.$watch(contentParse,function(val){ttScope.content=val;if(!val&&ttScope.isOpen){hide()}}));observers.push(tooltipLinkedScope.$watch(function(){if(!repositionScheduled){repositionScheduled=true;tooltipLinkedScope.$$postDigest(function(){repositionScheduled=false;if(ttScope&&ttScope.isOpen){positionTooltip()}})}}))}else{observers.push(attrs.$observe(ttType,function(val){ttScope.content=val;if(!val&&ttScope.isOpen){
hide()}else{positionTooltip()}}))}observers.push(attrs.$observe(prefix+"Title",function(val){ttScope.title=val;if(ttScope.isOpen){positionTooltip()}}));observers.push(attrs.$observe(prefix+"Placement",function(val){ttScope.placement=val?val:options.placement;if(ttScope.isOpen){positionTooltip()}}))}function unregisterObservers(){if(observers.length){angular.forEach(observers,function(observer){observer()});observers.length=0}}function bodyHideTooltipBind(e){if(!ttScope||!ttScope.isOpen||!tooltip){return}if(!element[0].contains(e.target)&&!tooltip[0].contains(e.target)){hideTooltipBind()}}var unregisterTriggers=function unregisterTriggers(){triggers.show.forEach(function(trigger){if(trigger==="outsideClick"){element.off("click",toggleTooltipBind)}else{element.off(trigger,showTooltipBind);element.off(trigger,toggleTooltipBind)}});triggers.hide.forEach(function(trigger){if(trigger==="outsideClick"){$document.off("click",bodyHideTooltipBind)}else{element.off(trigger,hideTooltipBind)}})};function prepTriggers(){var val=attrs[prefix+"Trigger"];unregisterTriggers();triggers=getTriggers(val);if(triggers.show!=="none"){triggers.show.forEach(function(trigger,idx){if(trigger==="outsideClick"){element.on("click",toggleTooltipBind);$document.on("click",bodyHideTooltipBind)}else if(trigger===triggers.hide[idx]){element.on(trigger,toggleTooltipBind)}else if(trigger){element.on(trigger,showTooltipBind);element.on(triggers.hide[idx],hideTooltipBind)}element.on("keypress",function(e){if(e.which===27){hideTooltipBind()}})})}}prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal;var appendKey=prefix+"AppendToBody";if(appendKey in attrs&&attrs[appendKey]===undefined){appendToBodyVal=true}else{appendToBodyVal=scope.$eval(attrs[appendKey])}appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody;if(appendToBody){scope.$on("$locationChangeSuccess",function closeTooltipOnLocationChangeSuccess(){if(ttScope.isOpen){hide()}})}scope.$on("$destroy",function onDestroyTooltip(){unregisterTriggers();removeTooltip();openedTooltips.remove(ttScope);ttScope=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function($animate,$sce,$compile,$templateRequest){return{link:function link(scope,elem,attrs){var origScope=scope.$eval(attrs.tooltipTemplateTranscludeScope);var changeCounter=0,currentScope,previousElement,currentElement;var cleanupLastIncludeContent=function cleanupLastIncludeContent(){if(previousElement){previousElement.remove();previousElement=null}if(currentScope){currentScope.$destroy();currentScope=null}if(currentElement){$animate.leave(currentElement).then(function(){previousElement=null});previousElement=currentElement;currentElement=null}};scope.$watch($sce.parseAsResourceUrl(attrs.uibTooltipTemplateTransclude),function(src){var thisChangeId=++changeCounter;if(src){$templateRequest(src,true).then(function(response){if(thisChangeId!==changeCounter){return}var newScope=origScope.$new();var template=response;var clone=$compile(template)(newScope,function(clone){cleanupLastIncludeContent();$animate.enter(clone,elem)});currentScope=newScope;currentElement=clone;currentScope.$emit("$includeContentLoaded",src)},function(){if(thisChangeId===changeCounter){cleanupLastIncludeContent();scope.$emit("$includeContentError",src)}});scope.$emit("$includeContentRequested",src)}else{cleanupLastIncludeContent()}});scope.$on("$destroy",cleanupLastIncludeContent)}}}]).directive("uibTooltipClasses",["$uibPosition",function($uibPosition){return{restrict:"A",link:function link(scope,element,attrs){if(scope.placement){var position=$uibPosition.parsePlacement(scope.placement);element.addClass(position[0])}else{element.addClass("top")}if(scope.popupClass){element.addClass(scope.popupClass)}if(scope.animation()){element.addClass(attrs.tooltipAnimationClass)}}}}]).directive("uibTooltipPopup",function(){return{replace:true,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:true,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:true})}]).directive("uibTooltipHtmlPopup",function(){return{replace:true,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipHtml","tooltip","mouseenter",{useContentExp:true})}]);angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:true,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverTemplate","popover","click",{useContentExp:true})}]).directive("uibPopoverHtmlPopup",function(){return{replace:true,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverHtml","popover","click",{useContentExp:true})}]).directive("uibPopoverPopup",function(){return{replace:true,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopover","popover","click")}]);angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:true,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function($scope,$attrs,progressConfig){var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[];$scope.max=angular.isDefined($scope.max)?$scope.max:progressConfig.max;this.addBar=function(bar,element,attrs){if(!animate){element.css({transition:"none"})}this.bars.push(bar);bar.max=$scope.max;bar.title=attrs&&angular.isDefined(attrs.title)?attrs.title:"progressbar";bar.$watch("value",function(value){bar.recalculatePercentage()});bar.recalculatePercentage=function(){var totalPercentage=self.bars.reduce(function(total,bar){bar.percent=+(100*bar.value/bar.max).toFixed(2);return total+bar.percent},0);if(totalPercentage>100){bar.percent-=totalPercentage-100}};bar.$on("$destroy",function(){element=null;self.removeBar(bar)})};this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1);this.bars.forEach(function(bar){bar.recalculatePercentage()})};$scope.$watch("max",function(max){self.bars.forEach(function(bar){bar.max=$scope.max;bar.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:true,transclude:true,controller:"UibProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:true,transclude:true,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function link(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element,attrs)}}}).directive("uibProgressbar",function(){return{replace:true,transclude:true,controller:"UibProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function link(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]),{title:attrs.title})}}});angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function($scope,$attrs,ratingConfig){var ngModelCtrl={$setViewValue:angular.noop};this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_;ngModelCtrl.$render=this.render;ngModelCtrl.$formatters.push(function(value){if(angular.isNumber(value)&&value<<0!==value){value=Math.round(value)}return value});this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn;this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff;var tmpTitles=angular.isDefined($attrs.titles)?$scope.$parent.$eval($attrs.titles):ratingConfig.titles;this.titles=angular.isArray(tmpTitles)&&tmpTitles.length>0?tmpTitles:ratingConfig.titles;var ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max);$scope.range=this.buildTemplateObjects(ratingStates)};this.buildTemplateObjects=function(states){for(var i=0,n=states.length;i<n;i++){states[i]=angular.extend({index:i},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(i)},states[i])}return states};this.getTitle=function(index){if(index>=this.titles.length){return index+1}return this.titles[index]};$scope.rate=function(value){if(!$scope.readonly&&value>=0&&value<=$scope.range.length){ngModelCtrl.$setViewValue(ngModelCtrl.$viewValue===value?0:value);ngModelCtrl.$render()}};$scope.enter=function(value){if(!$scope.readonly){$scope.value=value}$scope.onHover({value:value})};$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue;$scope.onLeave()};$scope.onKeydown=function(evt){if(/(37|38|39|40)/.test(evt.which)){evt.preventDefault();evt.stopPropagation();$scope.rate($scope.value+(evt.which===38||evt.which===39?1:-1))}};this.render=function(){$scope.value=ngModelCtrl.$viewValue}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",replace:true,link:function link(scope,element,attrs,ctrls){var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ratingCtrl.init(ngModelCtrl)}}});angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function($scope){var ctrl=this,tabs=ctrl.tabs=$scope.tabs=[];ctrl.select=function(selectedTab){angular.forEach(tabs,function(tab){if(tab.active&&tab!==selectedTab){tab.active=false;tab.onDeselect();selectedTab.selectCalled=false}});selectedTab.active=true;if(!selectedTab.selectCalled){selectedTab.onSelect();selectedTab.selectCalled=true}};ctrl.addTab=function addTab(tab){tabs.push(tab);if(tabs.length===1&&tab.active!==false){tab.active=true}else if(tab.active){ctrl.select(tab)}else{tab.active=false}};ctrl.removeTab=function removeTab(tab){var index=tabs.indexOf(tab);if(tab.active&&tabs.length>1&&!destroyed){var newActiveIndex=index===tabs.length-1?index-1:index+1;ctrl.select(tabs[newActiveIndex])}tabs.splice(index,1)};var destroyed;$scope.$on("$destroy",function(){destroyed=true})}]).directive("uibTabset",function(){return{transclude:true,replace:true,scope:{type:"@"},controller:"UibTabsetController",templateUrl:"uib/template/tabs/tabset.html",link:function link(scope,element,attrs){scope.vertical=angular.isDefined(attrs.vertical)?scope.$parent.$eval(attrs.vertical):false;scope.justified=angular.isDefined(attrs.justified)?scope.$parent.$eval(attrs.justified):false}}}).directive("uibTab",["$parse",function($parse){return{require:"^uibTabset",replace:true,templateUrl:"uib/template/tabs/tab.html",transclude:true,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function controller(){},controllerAs:"tab",link:function link(scope,elm,attrs,tabsetCtrl,transclude){scope.$watch("active",function(active){if(active){tabsetCtrl.select(scope)}});scope.disabled=false;if(attrs.disable){scope.$parent.$watch($parse(attrs.disable),function(value){scope.disabled=!!value})}scope.select=function(){if(!scope.disabled){scope.active=true}};tabsetCtrl.addTab(scope);scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)});scope.$transcludeFn=transclude}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function link(scope,elm){scope.$watch("headingElement",function updateHeadingElement(heading){if(heading){elm.html("");elm.append(heading)}})}}}).directive("uibTabContentTransclude",function(){return{restrict:"A",require:"^uibTabset",link:function link(scope,elm,attrs){var tab=scope.$eval(attrs.uibTabContentTransclude);tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){if(isTabHeading(node)){tab.headingElement=node}else{elm.append(node)}})})}};function isTabHeading(node){return node.tagName&&(node.hasAttribute("uib-tab-heading")||node.hasAttribute("data-uib-tab-heading")||node.hasAttribute("x-uib-tab-heading")||node.tagName.toLowerCase()==="uib-tab-heading"||node.tagName.toLowerCase()==="data-uib-tab-heading"||node.tagName.toLowerCase()==="x-uib-tab-heading")}});angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:true,showSeconds:false,meridians:null,readonlyInput:false,mousewheel:true,arrowkeys:true,showSpinners:true,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function($scope,$element,$attrs,$parse,$log,$locale,timepickerConfig){var selected=new Date,ngModelCtrl={$setViewValue:angular.noop},meridians=angular.isDefined($attrs.meridians)?$scope.$parent.$eval($attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS;$scope.tabindex=angular.isDefined($attrs.tabindex)?$attrs.tabindex:0;$element.removeAttr("tabindex");this.init=function(ngModelCtrl_,inputs){ngModelCtrl=ngModelCtrl_;ngModelCtrl.$render=this.render;ngModelCtrl.$formatters.unshift(function(modelValue){return modelValue?new Date(modelValue):null});var hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1),secondsInputEl=inputs.eq(2);var mousewheel=angular.isDefined($attrs.mousewheel)?$scope.$parent.$eval($attrs.mousewheel):timepickerConfig.mousewheel;if(mousewheel){this.setupMousewheelEvents(hoursInputEl,minutesInputEl,secondsInputEl)}var arrowkeys=angular.isDefined($attrs.arrowkeys)?$scope.$parent.$eval($attrs.arrowkeys):timepickerConfig.arrowkeys;if(arrowkeys){this.setupArrowkeyEvents(hoursInputEl,minutesInputEl,secondsInputEl)}$scope.readonlyInput=angular.isDefined($attrs.readonlyInput)?$scope.$parent.$eval($attrs.readonlyInput):timepickerConfig.readonlyInput;this.setupInputEvents(hoursInputEl,minutesInputEl,secondsInputEl)};var hourStep=timepickerConfig.hourStep;if($attrs.hourStep){$scope.$parent.$watch($parse($attrs.hourStep),function(value){hourStep=+value})}var minuteStep=timepickerConfig.minuteStep;if($attrs.minuteStep){$scope.$parent.$watch($parse($attrs.minuteStep),function(value){minuteStep=+value})}var min;$scope.$parent.$watch($parse($attrs.min),function(value){var dt=new Date(value);min=isNaN(dt)?undefined:dt});var max;$scope.$parent.$watch($parse($attrs.max),function(value){var dt=new Date(value);max=isNaN(dt)?undefined:dt});var disabled=false;if($attrs.ngDisabled){$scope.$parent.$watch($parse($attrs.ngDisabled),function(value){disabled=value})}$scope.noIncrementHours=function(){var incrementedSelected=addMinutes(selected,hourStep*60);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min};$scope.noDecrementHours=function(){var decrementedSelected=addMinutes(selected,-hourStep*60);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max};$scope.noIncrementMinutes=function(){var incrementedSelected=addMinutes(selected,minuteStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min};$scope.noDecrementMinutes=function(){var decrementedSelected=addMinutes(selected,-minuteStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max};$scope.noIncrementSeconds=function(){var incrementedSelected=addSeconds(selected,secondStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min};$scope.noDecrementSeconds=function(){var decrementedSelected=addSeconds(selected,-secondStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max};$scope.noToggleMeridian=function(){if(selected.getHours()<12){return disabled||addMinutes(selected,12*60)>max}return disabled||addMinutes(selected,-12*60)<min};var secondStep=timepickerConfig.secondStep;if($attrs.secondStep){$scope.$parent.$watch($parse($attrs.secondStep),function(value){secondStep=+value})}$scope.showSeconds=timepickerConfig.showSeconds;if($attrs.showSeconds){$scope.$parent.$watch($parse($attrs.showSeconds),function(value){$scope.showSeconds=!!value})}$scope.showMeridian=timepickerConfig.showMeridian;if($attrs.showMeridian){$scope.$parent.$watch($parse($attrs.showMeridian),function(value){$scope.showMeridian=!!value;if(ngModelCtrl.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();if(angular.isDefined(hours)&&angular.isDefined(minutes)){selected.setHours(hours);refresh()}}else{updateTemplate()}})}function getHoursFromTemplate(){var hours=+$scope.hours;var valid=$scope.showMeridian?hours>0&&hours<13:hours>=0&&hours<24;if(!valid){return undefined}if($scope.showMeridian){if(hours===12){hours=0}if($scope.meridian===meridians[1]){hours=hours+12}}return hours}function getMinutesFromTemplate(){var minutes=+$scope.minutes;return minutes>=0&&minutes<60?minutes:undefined}function getSecondsFromTemplate(){var seconds=+$scope.seconds;return seconds>=0&&seconds<60?seconds:undefined}function pad(value){if(value===null){return""}return angular.isDefined(value)&&value.toString().length<2?"0"+value:value.toString()}this.setupMousewheelEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){var isScrollingUp=function isScrollingUp(e){if(e.originalEvent){e=e.originalEvent}var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.bind("mousewheel wheel",function(e){if(!disabled){$scope.$apply(isScrollingUp(e)?$scope.incrementHours():$scope.decrementHours())}e.preventDefault()});minutesInputEl.bind("mousewheel wheel",function(e){if(!disabled){$scope.$apply(isScrollingUp(e)?$scope.incrementMinutes():$scope.decrementMinutes())}e.preventDefault()});secondsInputEl.bind("mousewheel wheel",function(e){if(!disabled){$scope.$apply(isScrollingUp(e)?$scope.incrementSeconds():$scope.decrementSeconds())}e.preventDefault()})};this.setupArrowkeyEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){hoursInputEl.bind("keydown",function(e){if(!disabled){if(e.which===38){e.preventDefault();$scope.incrementHours();$scope.$apply()}else if(e.which===40){e.preventDefault();$scope.decrementHours();$scope.$apply()}}});minutesInputEl.bind("keydown",function(e){if(!disabled){if(e.which===38){e.preventDefault();$scope.incrementMinutes();$scope.$apply()}else if(e.which===40){e.preventDefault();$scope.decrementMinutes();$scope.$apply()}}});secondsInputEl.bind("keydown",function(e){if(!disabled){if(e.which===38){e.preventDefault();$scope.incrementSeconds();$scope.$apply()}else if(e.which===40){e.preventDefault();$scope.decrementSeconds();$scope.$apply()}}})};this.setupInputEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){if($scope.readonlyInput){$scope.updateHours=angular.noop;$scope.updateMinutes=angular.noop;$scope.updateSeconds=angular.noop;return}var invalidate=function invalidate(invalidHours,invalidMinutes,invalidSeconds){ngModelCtrl.$setViewValue(null);ngModelCtrl.$setValidity("time",false);if(angular.isDefined(invalidHours)){$scope.invalidHours=invalidHours}if(angular.isDefined(invalidMinutes)){$scope.invalidMinutes=invalidMinutes}if(angular.isDefined(invalidSeconds)){$scope.invalidSeconds=invalidSeconds}};$scope.updateHours=function(){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();ngModelCtrl.$setDirty();if(angular.isDefined(hours)&&angular.isDefined(minutes)){selected.setHours(hours);selected.setMinutes(minutes);if(selected<min||selected>max){invalidate(true)}else{refresh("h")}}else{invalidate(true)}};hoursInputEl.bind("blur",function(e){ngModelCtrl.$setTouched();if($scope.hours===null||$scope.hours===""){invalidate(true)}else if(!$scope.invalidHours&&$scope.hours<10){$scope.$apply(function(){$scope.hours=pad($scope.hours)})}});$scope.updateMinutes=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();ngModelCtrl.$setDirty();if(angular.isDefined(minutes)&&angular.isDefined(hours)){selected.setHours(hours);selected.setMinutes(minutes);if(selected<min||selected>max){invalidate(undefined,true)}else{refresh("m")}}else{invalidate(undefined,true)}};minutesInputEl.bind("blur",function(e){ngModelCtrl.$setTouched();if($scope.minutes===null){invalidate(undefined,true)}else if(!$scope.invalidMinutes&&$scope.minutes<10){$scope.$apply(function(){$scope.minutes=pad($scope.minutes)})}});$scope.updateSeconds=function(){var seconds=getSecondsFromTemplate();ngModelCtrl.$setDirty();if(angular.isDefined(seconds)){selected.setSeconds(seconds);refresh("s")}else{invalidate(undefined,undefined,true)}};secondsInputEl.bind("blur",function(e){if(!$scope.invalidSeconds&&$scope.seconds<10){$scope.$apply(function(){$scope.seconds=pad($scope.seconds)})}})};this.render=function(){var date=ngModelCtrl.$viewValue;if(isNaN(date)){ngModelCtrl.$setValidity("time",false);$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}else{if(date){selected=date}if(selected<min||selected>max){ngModelCtrl.$setValidity("time",false);$scope.invalidHours=true;$scope.invalidMinutes=true}else{makeValid()}updateTemplate()}};function refresh(keyboardChange){makeValid();ngModelCtrl.$setViewValue(new Date(selected));updateTemplate(keyboardChange)}function makeValid(){ngModelCtrl.$setValidity("time",true);$scope.invalidHours=false;$scope.invalidMinutes=false;$scope.invalidSeconds=false}function updateTemplate(keyboardChange){if(!ngModelCtrl.$modelValue){$scope.hours=null;$scope.minutes=null;$scope.seconds=null;$scope.meridian=meridians[0]}else{var hours=selected.getHours(),minutes=selected.getMinutes(),seconds=selected.getSeconds();if($scope.showMeridian){hours=hours===0||hours===12?12:hours%12}$scope.hours=keyboardChange==="h"?hours:pad(hours);if(keyboardChange!=="m"){$scope.minutes=pad(minutes)}$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1];if(keyboardChange!=="s"){$scope.seconds=pad(seconds)}$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}}function addSecondsToSelected(seconds){selected=addSeconds(selected,seconds);refresh()}function addMinutes(selected,minutes){return addSeconds(selected,minutes*60)}function addSeconds(date,seconds){var dt=new Date(date.getTime()+seconds*1e3);var newDate=new Date(date);newDate.setHours(dt.getHours(),dt.getMinutes(),dt.getSeconds());return newDate}$scope.showSpinners=angular.isDefined($attrs.showSpinners)?$scope.$parent.$eval($attrs.showSpinners):timepickerConfig.showSpinners;$scope.incrementHours=function(){if(!$scope.noIncrementHours()){addSecondsToSelected(hourStep*60*60)}};$scope.decrementHours=function(){if(!$scope.noDecrementHours()){addSecondsToSelected(-hourStep*60*60)}};$scope.incrementMinutes=function(){if(!$scope.noIncrementMinutes()){addSecondsToSelected(minuteStep*60)}};$scope.decrementMinutes=function(){if(!$scope.noDecrementMinutes()){addSecondsToSelected(-minuteStep*60)}};$scope.incrementSeconds=function(){if(!$scope.noIncrementSeconds()){addSecondsToSelected(secondStep)}};$scope.decrementSeconds=function(){if(!$scope.noDecrementSeconds()){addSecondsToSelected(-secondStep)}};$scope.toggleMeridian=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();if(!$scope.noToggleMeridian()){if(angular.isDefined(minutes)&&angular.isDefined(hours)){addSecondsToSelected(12*60*(selected.getHours()<12?60:-60))}else{$scope.meridian=$scope.meridian===meridians[0]?meridians[1]:meridians[0]}}};$scope.blur=function(){ngModelCtrl.$setTouched()}}]).directive("uibTimepicker",["uibTimepickerConfig",function(uibTimepickerConfig){return{require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:true,scope:{},templateUrl:function templateUrl(element,attrs){return attrs.templateUrl||uibTimepickerConfig.templateUrl},link:function link(scope,element,attrs,ctrls){var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(ngModelCtrl){timepickerCtrl.init(ngModelCtrl,element.find("input"))}}}}]);angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function parse(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match){throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_"'+' but got "'+input+'".')}return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(originalScope,element,attrs,$compile,$parse,$q,$timeout,$document,$window,$rootScope,$$debounce,$position,typeaheadParser){var HOT_KEYS=[9,13,27,38,40];var eventDebounceTime=200;var modelCtrl,ngModelOptions;var minLength=originalScope.$eval(attrs.typeaheadMinLength);if(!minLength&&minLength!==0){minLength=1}var waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0;var isEditable=originalScope.$eval(attrs.typeaheadEditable)!==false;originalScope.$watch(attrs.typeaheadEditable,function(newVal){isEditable=newVal!==false});var isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop;var onSelectCallback=$parse(attrs.typeaheadOnSelect);var isSelectOnBlur=angular.isDefined(attrs.typeaheadSelectOnBlur)?originalScope.$eval(attrs.typeaheadSelectOnBlur):false;var isNoResultsSetter=$parse(attrs.typeaheadNoResults).assign||angular.noop;var inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):undefined;var appendToBody=attrs.typeaheadAppendToBody?originalScope.$eval(attrs.typeaheadAppendToBody):false;var appendTo=attrs.typeaheadAppendTo?originalScope.$eval(attrs.typeaheadAppendTo):null;var focusFirst=originalScope.$eval(attrs.typeaheadFocusFirst)!==false;var selectOnExact=attrs.typeaheadSelectOnExact?originalScope.$eval(attrs.typeaheadSelectOnExact):false;var isOpenSetter=$parse(attrs.typeaheadIsOpen).assign||angular.noop;var showHint=originalScope.$eval(attrs.typeaheadShowHint)||false;var parsedModel=$parse(attrs.ngModel);var invokeModelSetter=$parse(attrs.ngModel+"($$$p)");var $setModelValue=function $setModelValue(scope,newValue){if(angular.isFunction(parsedModel(originalScope))&&ngModelOptions&&ngModelOptions.$options&&ngModelOptions.$options.getterSetter){return invokeModelSetter(scope,{$$$p:newValue})}return parsedModel.assign(scope,newValue)};var parserResult=typeaheadParser.parse(attrs.uibTypeahead);var hasFocus;var selected;var scope=originalScope.$new();var offDestroy=originalScope.$on("$destroy",function(){scope.$destroy()});scope.$on("$destroy",offDestroy);var popupId="typeahead-"+scope.$id+"-"+Math.floor(Math.random()*1e4);element.attr({"aria-autocomplete":"list","aria-expanded":false,"aria-owns":popupId});var inputsContainer,hintInputElem;if(showHint){inputsContainer=angular.element("<div></div>");inputsContainer.css("position","relative");element.after(inputsContainer);hintInputElem=element.clone();hintInputElem.attr("placeholder","");hintInputElem.val("");hintInputElem.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"});element.css({position:"relative","vertical-align":"top","background-color":"transparent"});inputsContainer.append(hintInputElem);hintInputElem.after(element)}var popUpEl=angular.element("<div uib-typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"});if(angular.isDefined(attrs.typeaheadTemplateUrl)){popUpEl.attr("template-url",attrs.typeaheadTemplateUrl)}if(angular.isDefined(attrs.typeaheadPopupTemplateUrl)){popUpEl.attr("popup-template-url",attrs.typeaheadPopupTemplateUrl)}var resetHint=function resetHint(){if(showHint){hintInputElem.val("")}};var resetMatches=function resetMatches(){scope.matches=[];scope.activeIdx=-1;element.attr("aria-expanded",false);resetHint()};var getMatchId=function getMatchId(index){return popupId+"-option-"+index};scope.$watch("activeIdx",function(index){if(index<0){element.removeAttr("aria-activedescendant")}else{element.attr("aria-activedescendant",getMatchId(index))}});var inputIsExactMatch=function inputIsExactMatch(inputValue,index){if(scope.matches.length>index&&inputValue){return inputValue.toUpperCase()===scope.matches[index].label.toUpperCase()}return false};var getMatchesAsync=function getMatchesAsync(inputValue,evt){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,true);isNoResultsSetter(originalScope,false);$q.when(parserResult.source(originalScope,locals)).then(function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus){if(matches&&matches.length>0){scope.activeIdx=focusFirst?0:-1;isNoResultsSetter(originalScope,false);scope.matches.length=0;for(var i=0;i<matches.length;i++){locals[parserResult.itemName]=matches[i];scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]})}scope.query=inputValue;recalculatePosition();element.attr("aria-expanded",true);if(selectOnExact&&scope.matches.length===1&&inputIsExactMatch(inputValue,0)){if(angular.isNumber(scope.debounceUpdate)||angular.isObject(scope.debounceUpdate)){$$debounce(function(){scope.select(0,evt)},angular.isNumber(scope.debounceUpdate)?scope.debounceUpdate:scope.debounceUpdate["default"])}else{scope.select(0,evt)}}if(showHint){var firstLabel=scope.matches[0].label;if(inputValue.length>0&&firstLabel.slice(0,inputValue.length).toUpperCase()===inputValue.toUpperCase()){hintInputElem.val(inputValue+firstLabel.slice(inputValue.length))}else{hintInputElem.val("")}}}else{resetMatches();isNoResultsSetter(originalScope,true)}}if(onCurrentRequest){isLoadingSetter(originalScope,false)}},function(){resetMatches();isLoadingSetter(originalScope,false);isNoResultsSetter(originalScope,true)})};if(appendToBody){angular.element($window).on("resize",fireRecalculating);$document.find("body").on("scroll",fireRecalculating)}var debouncedRecalculate=$$debounce(function(){if(scope.matches.length){recalculatePosition()}scope.moveInProgress=false},eventDebounceTime);scope.moveInProgress=false;function fireRecalculating(){if(!scope.moveInProgress){scope.moveInProgress=true;scope.$digest()}debouncedRecalculate()}function recalculatePosition(){scope.position=appendToBody?$position.offset(element):$position.position(element);
scope.position.top+=element.prop("offsetHeight")}scope.query=undefined;var timeoutPromise;var scheduleSearchWithTimeout=function scheduleSearchWithTimeout(inputValue){timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)};var cancelPreviousTimeout=function cancelPreviousTimeout(){if(timeoutPromise){$timeout.cancel(timeoutPromise)}};resetMatches();scope.assignIsOpen=function(isOpen){isOpenSetter(originalScope,isOpen)};scope.select=function(activeIdx,evt){var locals={};var model,item;selected=true;locals[parserResult.itemName]=item=scope.matches[activeIdx].model;model=parserResult.modelMapper(originalScope,locals);$setModelValue(originalScope,model);modelCtrl.$setValidity("editable",true);modelCtrl.$setValidity("parse",true);onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals),$event:evt});resetMatches();if(scope.$eval(attrs.typeaheadFocusOnSelect)!==false){$timeout(function(){element[0].focus()},0,false)}};element.on("keydown",function(evt){if(scope.matches.length===0||HOT_KEYS.indexOf(evt.which)===-1){return}if(scope.activeIdx===-1&&(evt.which===9||evt.which===13)){resetMatches();scope.$digest();return}evt.preventDefault();var target;switch(evt.which){case 9:case 13:scope.$apply(function(){if(angular.isNumber(scope.debounceUpdate)||angular.isObject(scope.debounceUpdate)){$$debounce(function(){scope.select(scope.activeIdx,evt)},angular.isNumber(scope.debounceUpdate)?scope.debounceUpdate:scope.debounceUpdate["default"])}else{scope.select(scope.activeIdx,evt)}});break;case 27:evt.stopPropagation();resetMatches();scope.$digest();break;case 38:scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1;scope.$digest();target=popUpEl.find("li")[scope.activeIdx];target.parentNode.scrollTop=target.offsetTop;break;case 40:scope.activeIdx=(scope.activeIdx+1)%scope.matches.length;scope.$digest();target=popUpEl.find("li")[scope.activeIdx];target.parentNode.scrollTop=target.offsetTop;break}});element.bind("focus",function(evt){hasFocus=true;if(minLength===0&&!modelCtrl.$viewValue){$timeout(function(){getMatchesAsync(modelCtrl.$viewValue,evt)},0)}});element.bind("blur",function(evt){if(isSelectOnBlur&&scope.matches.length&&scope.activeIdx!==-1&&!selected){selected=true;scope.$apply(function(){if(angular.isObject(scope.debounceUpdate)&&angular.isNumber(scope.debounceUpdate.blur)){$$debounce(function(){scope.select(scope.activeIdx,evt)},scope.debounceUpdate.blur)}else{scope.select(scope.activeIdx,evt)}})}if(!isEditable&&modelCtrl.$error.editable){modelCtrl.$viewValue="";element.val("")}hasFocus=false;selected=false});var dismissClickHandler=function dismissClickHandler(evt){if(element[0]!==evt.target&&evt.which!==3&&scope.matches.length!==0){resetMatches();if(!$rootScope.$$phase){scope.$digest()}}};$document.on("click",dismissClickHandler);originalScope.$on("$destroy",function(){$document.off("click",dismissClickHandler);if(appendToBody||appendTo){$popup.remove()}if(appendToBody){angular.element($window).off("resize",fireRecalculating);$document.find("body").off("scroll",fireRecalculating)}popUpEl.remove();if(showHint){inputsContainer.remove()}});var $popup=$compile(popUpEl)(scope);if(appendToBody){$document.find("body").append($popup)}else if(appendTo){angular.element(appendTo).eq(0).append($popup)}else{element.after($popup)}this.init=function(_modelCtrl,_ngModelOptions){modelCtrl=_modelCtrl;ngModelOptions=_ngModelOptions;scope.debounceUpdate=modelCtrl.$options&&$parse(modelCtrl.$options.debounce)(originalScope);modelCtrl.$parsers.unshift(function(inputValue){hasFocus=true;if(minLength===0||inputValue&&inputValue.length>=minLength){if(waitTime>0){cancelPreviousTimeout();scheduleSearchWithTimeout(inputValue)}else{getMatchesAsync(inputValue)}}else{isLoadingSetter(originalScope,false);cancelPreviousTimeout();resetMatches()}if(isEditable){return inputValue}if(!inputValue){modelCtrl.$setValidity("editable",true);return null}modelCtrl.$setValidity("editable",false);return undefined});modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue;var locals={};if(!isEditable){modelCtrl.$setValidity("editable",true)}if(inputFormatter){locals.$model=modelValue;return inputFormatter(originalScope,locals)}locals[parserResult.itemName]=modelValue;candidateViewValue=parserResult.viewMapper(originalScope,locals);locals[parserResult.itemName]=undefined;emptyViewValue=parserResult.viewMapper(originalScope,locals);return candidateViewValue!==emptyViewValue?candidateViewValue:modelValue})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function link(originalScope,element,attrs,ctrls){ctrls[2].init(ctrls[0],ctrls[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function($$debounce){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:true,templateUrl:function templateUrl(element,attrs){return attrs.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function link(scope,element,attrs){scope.templateUrl=attrs.templateUrl;scope.isOpen=function(){var isDropdownOpen=scope.matches.length>0;scope.assignIsOpen({isOpen:isDropdownOpen});return isDropdownOpen};scope.isActive=function(matchIdx){return scope.active===matchIdx};scope.selectActive=function(matchIdx){scope.active=matchIdx};scope.selectMatch=function(activeIdx,evt){var debounce=scope.debounce();if(angular.isNumber(debounce)||angular.isObject(debounce)){$$debounce(function(){scope.select({activeIdx:activeIdx,evt:evt})},angular.isNumber(debounce)?debounce:debounce["default"])}else{scope.select({activeIdx:activeIdx,evt:evt})}}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function($templateRequest,$compile,$parse){return{scope:{index:"=",match:"=",query:"="},link:function link(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"uib/template/typeahead/typeahead-match.html";$templateRequest(tplUrl).then(function(tplContent){var tplEl=angular.element(tplContent.trim());element.replaceWith(tplEl);$compile(tplEl)(scope)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function($sce,$injector,$log){var isSanitizePresent;isSanitizePresent=$injector.has("$sanitize");function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function containsHtml(matchItem){return/<.*>/g.test(matchItem)}return function(matchItem,query){if(!isSanitizePresent&&containsHtml(matchItem)){$log.warn("Unsafe use of typeahead please use ngSanitize")}matchItem=query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem;if(!isSanitizePresent){matchItem=$sce.trustAsHtml(matchItem)}return matchItem}}]);angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/accordion/accordion-group.html",'<div class="panel" ng-class="panelClass || \'panel-default\'">\n'+'  <div class="panel-heading" ng-keypress="toggleOpen($event)">\n'+'    <h4 class="panel-title">\n'+'      <div tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></div>\n'+"    </h4>\n"+"  </div>\n"+'  <div class="panel-collapse collapse" uib-collapse="!isOpen">\n'+'	  <div class="panel-body" ng-transclude></div>\n'+"  </div>\n"+"</div>\n"+"")}]);angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]);angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/alert/alert.html","<div class=\"alert\" ng-class=\"['alert-' + (type || 'warning'), closeable ? 'alert-dismissible' : null]\" role=\"alert\">\n"+'    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n'+'        <span aria-hidden="true">&times;</span>\n'+'        <span class="sr-only">Close</span>\n'+"    </button>\n"+"    <div ng-transclude></div>\n"+"</div>\n"+"")}]);angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n'+'  <div class="carousel-inner" ng-transclude></div>\n'+'  <a role="button" href class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1">\n'+'    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n'+'    <span class="sr-only">previous</span>\n'+"  </a>\n"+'  <a role="button" href class="right carousel-control" ng-click="next()" ng-show="slides.length > 1">\n'+'    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n'+'    <span class="sr-only">next</span>\n'+"  </a>\n"+'  <ol class="carousel-indicators" ng-show="slides.length > 1">\n'+'    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n'+'      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n'+"    </li>\n"+"  </ol>\n"+"</div>")}]);angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/slide.html",'<div ng-class="{\n'+"    'active': active\n"+'  }" class="item text-center" ng-transclude></div>\n'+"")}]);angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/datepicker.html",'<div class="uib-datepicker" ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n'+'  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n'+'  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n'+'  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n'+"</div>")}]);angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/day.html",'<table class="uib-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n'+"  <thead>\n"+"    <tr>\n"+'      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n'+'      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n'+'      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n'+"    </tr>\n"+"    <tr>\n"+'      <th ng-if="showWeeks" class="text-center"></th>\n'+'      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n'+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+'    <tr class="uib-weeks" ng-repeat="row in rows track by $index">\n'+'      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n'+'      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n'+'        id="{{::dt.uid}}"\n'+'        ng-class="::dt.customClass">\n'+'        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm"\n'+'          uib-is-class="\n'+"            'btn-info' for selectedDt,\n"+"            'active' for activeDt\n"+'            on dt"\n'+'          ng-click="select(dt.date)"\n'+'          ng-disabled="::dt.disabled"\n'+"          tabindex=\"-1\"><span ng-class=\"::{'text-muted': dt.secondary, 'text-info': dt.current}\">{{::dt.label}}</span></button>\n"+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/month.html",'<table class="uib-monthpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n'+"  <thead>\n"+"    <tr>\n"+'      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n'+'      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n'+'      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n'+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+'    <tr class="uib-months" ng-repeat="row in rows track by $index">\n'+'      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n'+'        id="{{::dt.uid}}"\n'+'        ng-class="::dt.customClass">\n'+'        <button type="button" style="min-width:100%;" class="btn btn-default"\n'+'          uib-is-class="\n'+"            'btn-info' for selectedDt,\n"+"            'active' for activeDt\n"+'            on dt"\n'+'          ng-click="select(dt.date)"\n'+'          ng-disabled="::dt.disabled"\n'+'          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n'+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/datepicker/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/popup.html",'<ul class="uib-datepicker-popup dropdown-menu" dropdown-nested ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n'+"	<li ng-transclude></li>\n"+'	<li ng-if="showButtonBar" style="padding:10px 9px 2px" class="uib-button-bar">\n'+'		<span class="btn-group pull-left">\n'+'			<button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n'+'			<button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n'+"		</span>\n"+'		<button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close()">{{ getText(\'close\') }}</button>\n'+"	</li>\n"+"</ul>\n"+"")}]);angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/year.html",'<table class="uib-yearpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n'+"  <thead>\n"+"    <tr>\n"+'      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n'+'      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n'+'      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n'+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+'    <tr class="uib-years" ng-repeat="row in rows track by $index">\n'+'      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n'+'        id="{{::dt.uid}}"\n'+'        ng-class="::dt.customClass">\n'+'        <button type="button" style="min-width:100%;" class="btn btn-default"\n'+'          uib-is-class="\n'+"            'btn-info' for selectedDt,\n"+"            'active' for activeDt\n"+'            on dt"\n'+'          ng-click="select(dt.date)"\n'+'          ng-disabled="::dt.disabled"\n'+'          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n'+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/modal/backdrop.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/modal/backdrop.html",'<div class="modal-backdrop"\n'+'     uib-modal-animation-class="fade"\n'+'     modal-in-class="in"\n'+"     ng-style=\"{'z-index': 1040 + (index && 1 || 0) + index*10}\"\n"+"></div>\n"+"")}]);angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n'+'    uib-modal-animation-class="fade"\n'+'    modal-in-class="in"\n'+"    ng-style=\"{'z-index': 1050 + index*10, display: 'block'}\">\n"+'    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" uib-modal-transclude></div></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/pager/pager.html",'<ul class="pager">\n'+'  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n'+'  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n'+"</ul>\n"+"")}]);angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/pagination/pagination.html",'<ul class="pagination">\n'+'  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n'+'  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n'+'  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n'+'  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n'+'  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n'+"</ul>\n"+"")}]);angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n'+'  tooltip-animation-class="fade"\n'+"  uib-tooltip-classes\n"+'  ng-class="{ in: isOpen() }">\n'+'  <div class="tooltip-arrow"></div>\n'+'  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n'+"</div>\n"+"")}]);angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n'+'  tooltip-animation-class="fade"\n'+"  tooltip-classes\n"+'  ng-class="{ in: isOpen() }">\n'+'  <div class="tooltip-arrow"></div>\n'+'  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip"\n'+'  tooltip-animation-class="fade"\n'+"  uib-tooltip-classes\n"+'  ng-class="{ in: isOpen() }">\n'+'  <div class="tooltip-arrow"></div>\n'+'  <div class="tooltip-inner" ng-bind="content"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n'+'  tooltip-animation-class="fade"\n'+"  uib-tooltip-classes\n"+'  ng-class="{ in: isOpen() }">\n'+'  <div class="tooltip-arrow"></div>\n'+'  <div class="tooltip-inner"\n'+'    uib-tooltip-template-transclude="contentExp()"\n'+'    tooltip-template-transclude-scope="originScope()"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover-html.html",'<div class="popover"\n'+'  tooltip-animation-class="fade"\n'+"  uib-tooltip-classes\n"+'  ng-class="{ in: isOpen() }">\n'+'  <div class="arrow"></div>\n'+"\n"+'  <div class="popover-inner">\n'+'      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n'+'      <div class="popover-content" ng-bind-html="contentExp()"></div>\n'+"  </div>\n"+"</div>\n"+"")}]);angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover-template.html",'<div class="popover"\n'+'  tooltip-animation-class="fade"\n'+"  uib-tooltip-classes\n"+'  ng-class="{ in: isOpen() }">\n'+'  <div class="arrow"></div>\n'+"\n"+'  <div class="popover-inner">\n'+'      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n'+'      <div class="popover-content"\n'+'        uib-tooltip-template-transclude="contentExp()"\n'+'        tooltip-template-transclude-scope="originScope()"></div>\n'+"  </div>\n"+"</div>\n"+"")}]);angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover.html",'<div class="popover"\n'+'  tooltip-animation-class="fade"\n'+"  uib-tooltip-classes\n"+'  ng-class="{ in: isOpen() }">\n'+'  <div class="arrow"></div>\n'+"\n"+'  <div class="popover-inner">\n'+'      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n'+'      <div class="popover-content" ng-bind="content"></div>\n'+"  </div>\n"+"</div>\n"+"")}]);angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n'+"")}]);angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]);angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n'+'  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n'+"    <span ng-repeat-start=\"r in range track by $index\" class=\"sr-only\">({{ $index < value ? '*' : ' ' }})</span>\n"+'    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" aria-valuetext="{{r.title}}"></i>\n'+"</span>\n"+"")}]);angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}" class="uib-tab">\n'+'  <div ng-click="select()" uib-tab-heading-transclude>{{heading}}</div>\n'+"</li>\n"+"")}]);angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tabset.html","<div>\n"+"  <ul class=\"nav nav-{{type || 'tabs'}}\" ng-class=\"{'nav-stacked': vertical, 'nav-justified': justified}\" ng-transclude></ul>\n"+'  <div class="tab-content">\n'+'    <div class="tab-pane" \n'+'         ng-repeat="tab in tabs" \n'+'         ng-class="{active: tab.active}"\n'+'         uib-tab-content-transclude="tab">\n'+"    </div>\n"+"  </div>\n"+"</div>\n"+"")}]);angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n'+"  <tbody>\n"+'    <tr class="text-center" ng-show="::showSpinners">\n'+'      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n'+"      <td>&nbsp;</td>\n"+'      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n'+'      <td ng-show="showSeconds">&nbsp;</td>\n'+'      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n'+'      <td ng-show="showMeridian"></td>\n'+"    </tr>\n"+"    <tr>\n"+'      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n'+'        <input style="width:50px;" type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n'+"      </td>\n"+'      <td class="uib-separator">:</td>\n'+'      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n'+'        <input style="width:50px;" type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n'+"      </td>\n"+'      <td ng-show="showSeconds" class="uib-separator">:</td>\n'+'      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n'+'        <input style="width:50px;" type="text" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n'+"      </td>\n"+'      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n'+"    </tr>\n"+'    <tr class="text-center" ng-show="::showSpinners">\n'+'      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n'+"      <td>&nbsp;</td>\n"+'      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n'+'      <td ng-show="showSeconds">&nbsp;</td>\n'+'      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n'+'      <td ng-show="showMeridian"></td>\n'+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/typeahead/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | uibTypeaheadHighlight:query"></a>\n'+"")}]);angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n'+'    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n'+'        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n'+"    </li>\n"+"</ul>\n"+"")}]);angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>')});angular.module("ui.bootstrap.tabs").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.uib-tab > div{position:relative;display:block;padding:10px 15px;outline:0;color:#337ab7;}.uib-tab > div:focus,.uib-tab > div:hover{background-color:#eee;color:#23527c;}.uib-tab.disabled > div{color:#777;}.uib-tab.disabled > div:focus,.uib-tab.disabled > div:hover{color:#777;cursor:not-allowed;background-color:transparent;}.nav-tabs > .uib-tab > div{margin-right:2px;line-height:1.42857143;border:1px solid transparent;border-radius:4px 4px 0 0;}.nav-tabs > .uib-tab > div:hover{border-color:#eee #eee #ddd;}.nav-tabs > .uib-tab.active > div,.nav-tabs > .uib-tab.active > div:focus,.nav-tabs > .uib-tab.active > div:hover{color:#555;cursor:default;background-color:#fff;border-color:#ddd #ddd transparent #ddd;}.nav-pills > .uib-tab > div{border-radius:4px;}.nav-pills > .uib-tab.active > div,.nav-pills > .uib-tab.active > div:focus,.nav-pills > .uib-tab.active > div:hover{color:#fff;background-color:#337ab7;}</style>')})},function(module,exports){"use strict";var _createClass=function(){
function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var JsonStorageService=function(){function JsonStorageService($http,$q){_classCallCheck(this,JsonStorageService);this.$http=$http;this.$q=$q;this.rootUrl="https://api.myjson.com"}_createClass(JsonStorageService,[{key:"get",value:function get(id){var deferred=this.$q.defer();var request=this.$http({url:this.rootUrl+"/bins/"+id});request.success(function(data){deferred.resolve(data)}).error(function(){deferred.reject()});return deferred.promise}},{key:"add",value:function add(json){var deferred=this.$q.defer();var request=this.$http({url:this.rootUrl+"/bins",method:"post",data:json});request.success(function(data){var id=data.uri.split("/").pop();deferred.resolve(id)}).error(function(){deferred.reject()});return deferred.promise}},{key:"update",value:function update(id,json){var deferred=this.$q.defer();var request=this.$http({url:this.rootUrl+"/bins/"+id,method:"put",data:json});request.success(function(data){deferred.resolve()}).error(function(){deferred.reject()});return deferred.promise}}]);return JsonStorageService}();exports.default=JsonStorageService;JsonStorageService.$inject=["$http","$q"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=convertToNumber;function convertToNumber($compile,$timeout,$window){return{restrict:"A",require:"ngModel",link:function link(scope,elem,attrs,ngModel){ngModel.$parsers.push(function(val){return parseInt(val,10)});ngModel.$formatters.push(function(val){return""+val})}}}convertToNumber.$inject=["$compile","$timeout","$window"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=multiSelect;var _multiSelect=__webpack_require__(6);var _multiSelect2=_interopRequireDefault(_multiSelect);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function multiSelect($compile,$timeout,$window){return{restrict:"E",replace:true,template:_multiSelect2.default,scope:{buttonText:"=",items:"=",change:"&"},link:function link(scope,elem,attrs){scope.status={isOpen:false};scope.select=function(item){item._selected=!item._selected;if(scope.change){scope.change()}}}}}multiSelect.$inject=["$compile","$timeout","$window"]},function(module,exports){module.exports='<span class=multi-select><div class=btn-group uib-dropdown is-open=status.isOpen auto-close=outsideClick><button type=button class="btn btn-primary" uib-dropdown-toggle>{{buttonText}} <span class=caret></span></button><ul uib-dropdown-menu role=menu aria-labelledby=single-button><li role=menuitem ng-repeat="item in items"><a href=# ng-click=select(item)>{{item.name}}<i class="fa fa-check" ng-show=item._selected></i></a></li></ul></div></span>'},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=collapsiblePanel;function collapsiblePanel($compile,$timeout,$window){return{restrict:"A",link:function link(scope,elem,attrs){var collapsed=attrs.collapsed!==undefined;var cssClass=collapsed?"fa-plus":"fa-minus";var widget=$('<i class="fa '+cssClass+'" style="margin-right: 5px"></i>');var panelHeading=$(".panel-heading",elem);var panelBody=$(".panel-body",elem);applyCollapsed();panelHeading.prepend(widget);panelHeading.on("click",function(){collapsed=!collapsed;applyCollapsed()});function applyCollapsed(){if(collapsed){panelHeading.addClass("collapsed");widget.removeClass("fa-minus");widget.addClass("fa-plus");panelBody.hide()}else{panelHeading.removeClass("collapsed");widget.removeClass("fa-plus");widget.addClass("fa-minus");panelBody.show()}}}}}collapsiblePanel.$inject=["$compile","$timeout","$window"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=validate;function validate($compile,$timeout,$window){return{restrict:"A",require:"ngModel",scope:{validate:"&"},link:function link(scope,elem,attrs,ngModel){ngModel.$options={updateOn:"blur"};ngModel.$parsers.unshift(function(viewValue){var result=scope.validate({value:viewValue});if(result){ngModel.$setViewValue(result.value);ngModel.$render();return result.value}else{ngModel.$setViewValue(ngModel.$modelValue);ngModel.$render();return ngModel.$modelValue}});elem.on("keyup",function(e){if(e.keyCode===13){ngModel.$commitViewValue()}})}}}validate.$inject=["$compile","$timeout","$window"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=segmentTools;var _segmentTools=__webpack_require__(10);var _segmentTools2=_interopRequireDefault(_segmentTools);var _SegmentToolsController=__webpack_require__(11);var _SegmentToolsController2=_interopRequireDefault(_SegmentToolsController);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function segmentTools($compile,$timeout,$window){return{restrict:"E",require:["^toolbox","segmentTools"],scope:{},bindToController:true,template:_segmentTools2.default,controller:_SegmentToolsController2.default,controllerAs:"ctrl",link:function link(scope,elem,attrs,ctrl){var toolboxCtrl=ctrl[0];var segmentToolsCtrl=ctrl[1];toolboxCtrl.onLayerToolInit(segmentToolsCtrl.layer,segmentToolsCtrl)}}}segmentTools.$inject=["$compile","$timeout","$window"]},function(module,exports){module.exports='<div class=segment-tools><div class=form-group><label>Count</label><span>{{ctrl.count}}</span></div><div class=form-group ng-show=ctrl.AppConfig.advancedOptions><label>Connect only existing</label><span><input type=checkbox ng-model=ctrl.connectOnlyExisting></span></div><div class=form-group ng-show=ctrl.AppConfig.advancedOptions><label>Show normals</label><span><input type=checkbox ng-model=ctrl.mapManager.showSegmentNormals></span></div><div><multi-select button-text=ctrl.visibleTypesButtonText items=ctrl.visibleTypes change=ctrl.onVisibleTypesChange()></multi-select></div><div ng-show="ctrl.selectedObjects.length > 0" style="margin-top: 5px"><div class=form-group><label>ID</label><span>{{ctrl.selectedId}}</span></div><div class=form-group><label>Bottom Y</label><span><input ng-model=ctrl.segment.bottomY validate=ctrl.validateInteger(value) ng-change="ctrl.applyToAllSelected(\'bottomY\')"></span></div><div class=form-group><label>Top Y</label><span><input ng-model=ctrl.segment.topY validate=ctrl.validateInteger(value) ng-change="ctrl.applyToAllSelected(\'topY\')"></span></div><div class=form-group><label>TV screen</label><span><input type=checkbox ng-model=ctrl.segment.tvScreen ng-change=ctrl.onTVScreenChange()></span></div><div class=form-group><label>Switch</label><span><input type=checkbox ng-model=ctrl.segment.switch ng-change=ctrl.onSwitchChange()></span></div><div class=form-group ng-show=ctrl.segment.tvScreen><label>Texture</label><span><input ng-model=ctrl.segment.texId ng-change="ctrl.applyToAllSelected(\'texId\')"></span></div></div><div class=buttons><button type=button class="btn btn-primary" ng-click=ctrl.onConvertToSectorsClick()>Convert selected segments to sectors</button> <button type=button class="btn btn-primary" ng-click=ctrl.onFlipNormalsClick() ng-show=ctrl.AppConfig.advancedOptions>Flip normals for selected segments</button> <button type=button class="btn btn-primary" ng-click=ctrl.onRegenerateSidesClick()>Regenerate sides</button></div></div>'},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};Object.defineProperty(exports,"__esModule",{value:true});var _EditorModes=__webpack_require__(12);var _EditorModes2=_interopRequireDefault(_EditorModes);var _BaseToolsController2=__webpack_require__(13);var _BaseToolsController3=_interopRequireDefault(_BaseToolsController2);var _AppConfig=__webpack_require__(15);var _AppConfig2=_interopRequireDefault(_AppConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SegmentToolsController=function(_BaseToolsController){_inherits(SegmentToolsController,_BaseToolsController);function SegmentToolsController(){_classCallCheck(this,SegmentToolsController);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SegmentToolsController).call(this));_this.id="segmentTools";_this.layer=GS.MapLayers.Segment;_this.AppConfig=_AppConfig2.default;_this.isDrawingLine=false;_this.connectOnlyExisting=false;return _this}_createClass(SegmentToolsController,[{key:"init",value:function init(mapManager,actionLog,inCanvas,$timeout){_get(Object.getPrototypeOf(SegmentToolsController.prototype),"init",this).call(this,mapManager,actionLog,inCanvas,$timeout);this.initVisibleTypesMultiSelect()}},{key:"onConvertToSectorsClick",value:function onConvertToSectorsClick(){this.mapManager.convertSegmentsToSectors(this.selected);this.resetSelection()}},{key:"onFlipNormalsClick",value:function onFlipNormalsClick(){this.mapManager.flipSegmentNormals(this.selected)}},{key:"onRegenerateSidesClick",value:function onRegenerateSidesClick(){this.mapManager.convertEdgesToSegments();this.resetSelection()}},{key:"update",value:function update(){var mx=GS.InputHelper.mouseX;var my=GS.InputHelper.mouseY;switch(this.mode){case _EditorModes2.default.Selecting:this.handleSelecting(mx,my);break;case _EditorModes2.default.Drawing:this.handleDrawing(mx,my);break}}},{key:"handleDrawing",value:function handleDrawing(mx,my){var v=new THREE.Vector2(mx,my);this.mapManager.convertToGridCellCoords(v);if(this.isDrawingLine&&GS.InputHelper.shift){var angle=Math.abs(GS.MathHelper.vec2Angle(v,this.lineStart)/2);if(angle>=45&&angle<135){v.x=this.lineStart.x}else{v.y=this.lineStart.y}}var containsSegmentPoint=false;if(this.connectOnlyExisting){containsSegmentPoint=this.mapManager.isSegmentPointAt(v)||this.lineStart!==undefined&&this.mapManager.isSegmentPointAt(this.lineStart)}this.mapManager.drawCursorExtensions(v);var color;if(GS.InputHelper.leftMouseDown){if(this.inCanvas(mx,my)){if(this.isDrawingLine===false){this.isDrawingLine=true;this.lineStart=new THREE.Vector2(mx,my);this.mapManager.convertToGridCellCoords(this.lineStart)}color="#000";if(this.connectOnlyExisting){color=containsSegmentPoint?"#00ff00":"#ff0000"}}if(this.isDrawingLine){this.mapManager.drawSegment(this.lineStart,v,color)}}else{if(this.isDrawingLine){this.isDrawingLine=false;if(this.inCanvas(mx,my)&&(this.connectOnlyExisting&&containsSegmentPoint||!this.connectOnlyExisting)){if(this.lineStart.x!=v.x||this.lineStart.y!=v.y){var seg=this.mapManager.constructLayerObject(this.layer,{start:this.lineStart.clone(),end:v,type:GS.SegmentTypes.User,bottomY:0,topY:64,texId:"wall"});this.mapManager.addLayerObject(this.layer,seg);this.actionLog.push(this.getAddAction(seg.id));this.mapManager.drawSegment(this.lineStart,v)}}}}this.mapManager.drawCursor(v)}},{key:"validateInteger",value:function validateInteger(value){if(!isNaN(value)){return{value:parseInt(value,10)}}else{return false}}},{key:"onTVScreenChange",value:function onTVScreenChange(){var _this2=this;this.selectedObjects.forEach(function(obj){if(_this2.segment.tvScreen){obj.type=GS.SegmentTypes.TVScreen}else{obj.type=GS.SegmentTypes.User}_this2.segment.switch=false})}},{key:"onSwitchChange",value:function onSwitchChange(){var _this3=this;this.selectedObjects.forEach(function(obj){if(_this3.segment.switch){obj.type=GS.SegmentTypes.Switch}else{obj.type=GS.SegmentTypes.User}_this3.segment.tvScreen=false})}},{key:"initVisibleTypesMultiSelect",value:function initVisibleTypesMultiSelect(){var _this4=this;this.visibleTypes=[{propertyName:"showUserDrawnSegments",name:"User-drawn segments"},{propertyName:"showGeneratedInteriorFloorSides",name:"Generated interior floor sides"},{propertyName:"showGeneratedInteriorCeilingSides",name:"Generated interior ceiling sides"},{propertyName:"showGeneratedExteriorSides",name:"Generated exterior sides"},{propertyName:"showTVScreens",name:"TV screens and switches"}];var count=0;this.visibleTypes.forEach(function(x){x._selected=_this4.mapManager[x.propertyName];if(x._selected){count++}});this.visibleTypesButtonText=this.getVisibleTypesText(count)}},{key:"onVisibleTypesChange",value:function onVisibleTypesChange(){var _this5=this;var count=0;this.visibleTypes.forEach(function(x){_this5.mapManager[x.propertyName]=x._selected;if(x._selected){count++}});this.visibleTypesButtonText=this.getVisibleTypesText(count)}},{key:"getVisibleTypesText",value:function getVisibleTypesText(count){var str="Visible segment types: ";if(count<5){return str+count}return str+" All"}},{key:"applyToAllSelected",value:function applyToAllSelected(propertyName){var _this6=this;this.selectedObjects.forEach(function(obj){obj[propertyName]=_this6.segment[propertyName]})}},{key:"selectionChange",value:function selectionChange(){var _this7=this;_get(Object.getPrototypeOf(SegmentToolsController.prototype),"selectionChange",this).call(this);this.selectedObjects=Object.keys(this.selected).map(function(key){return _this7.mapManager.getLayerObject(_this7.layer,key)});if(this.selectedObjects.length>0){if(this.selectedObjects.length===1){var segment=angular.copy(this.selectedObjects[0]);this.selectedId=segment.id;segment.tvScreen=segment.type===GS.SegmentTypes.TVScreen;segment.switch=segment.type===GS.SegmentTypes.Switch;this.segment=segment}else{this.selectedId=this.selectedObjects.length+" selected";this.segment={}}}}}]);return SegmentToolsController}(_BaseToolsController3.default);exports.default=SegmentToolsController},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var EditorModes={Drawing:0,Selecting:1,Disabled:2};exports.default=EditorModes},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _ActionTypes=__webpack_require__(14);var _ActionTypes2=_interopRequireDefault(_ActionTypes);var _EditorModes=__webpack_require__(12);var _EditorModes2=_interopRequireDefault(_EditorModes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var BaseToolsController=function(){function BaseToolsController(){_classCallCheck(this,BaseToolsController);this.count=0;this.layer=undefined;this.isSelecting=false;this.mode=_EditorModes2.default.Selecting;this.selected={};this.selectedObjects=[]}_createClass(BaseToolsController,[{key:"init",value:function init(mapManager,actionLog,inCanvas,$timeout){var _this=this;this.mapManager=mapManager;this.actionLog=actionLog;this.inCanvas=inCanvas;this.$timeout=$timeout;this.count=this.mapManager.getLayerObjectCount(this.layer);this.mapManager.addEventListener("layerObjectCountChange",function(e){if(e.layer==_this.layer){_this.count=_this.mapManager.getLayerObjectCount(_this.layer);_this.$timeout()}})}},{key:"deleteSelected",value:function deleteSelected(){this.actionLog.push(this.getRemoveAction());this.mapManager.removeLayerObjects(this.layer,this.selected);this.selected={};this.selectionChange()}},{key:"resetSelection",value:function resetSelection(){this.selected={};this.selectionChange()}},{key:"onSelectAll",value:function onSelectAll(){this.selected=this.mapManager.getSelectionOfAllLayerObjects(this.layer);this.selectionChange()}},{key:"onEscape",value:function onEscape(){this.selected={};this.selectionChange()}},{key:"onDelete",value:function onDelete(){this.deleteSelected()}},{key:"goTo",value:function goTo(id){var obj=this.mapManager.getLayerObject(this.layer,id);if(obj!==undefined){this.selected={};this.selected[id]=true;this.selectionChange();return true}return false}},{key:"handleSelecting",value:function handleSelecting(mx,my){if(!this.inCanvas(mx,my)){return}var v=new THREE.Vector2(mx,my);if(GS.InputHelper.leftMouseDown){if(this.inCanvas(mx,my)){if(this.isSelecting===false){this.isSelecting=true;this.selectStart=v}}if(this.isSelecting){this.mapManager.drawSelection(this.selectStart,v)}}else{if(this.isSelecting){this.isSelecting=false;var selection=this.mapManager.getLayerObjectsInSelection(this.layer,this.selectStart,v);if(GS.InputHelper.ctrl){this.addSelection(selection)}else{this.selected=selection}this.selectionChange()}}}},{key:"selectionChange",value:function selectionChange(){this.$timeout()}},{key:"addSelection",value:function addSelection(selection){var _this2=this;var n=Object.keys(this.selected).length;if(n===0){this.selected=selection;return}Object.keys(selection).forEach(function(key){if(_this2.selected[key]===undefined){_this2.selected[key]=true}else{delete _this2.selected[key]}})}},{key:"undoAdd",value:function undoAdd(action){this.mapManager.removeLayerObject(this.layer,action.info.id)}},{key:"undoRemove",value:function undoRemove(action){for(var i=0;i<action.info.objects.length;i++){this.mapManager.addLayerObject(this.layer,action.info.objects[i])}}},{key:"getSelected",value:function getSelected(){return this.selected}},{key:"getAddAction",value:function getAddAction(id){var action={type:_ActionTypes2.default.Add,layer:this.layer,info:{id:id}};return action}},{key:"getRemoveAction",value:function getRemoveAction(){var objects=[];for(var i in this.selected){var obj=this.mapManager.getLayerObject(this.layer,i);var clone={};$.extend(true,clone,obj);objects.push(clone)}var action={type:_ActionTypes2.default.Remove,layer:this.layer,info:{objects:objects}};return action}}]);return BaseToolsController}();exports.default=BaseToolsController},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ActionTypes={Add:0,Remove:1};exports.default=ActionTypes},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var AppConfig={advancedOptions:false};exports.default=AppConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=sectorTools;var _sectorTools=__webpack_require__(17);var _sectorTools2=_interopRequireDefault(_sectorTools);var _SectorToolsController=__webpack_require__(18);var _SectorToolsController2=_interopRequireDefault(_SectorToolsController);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function sectorTools($compile,$timeout,$window){return{restrict:"E",require:["^toolbox","sectorTools"],scope:{},bindToController:true,template:_sectorTools2.default,controller:_SectorToolsController2.default,controllerAs:"ctrl",link:function link(scope,elem,attrs,ctrl){var toolboxCtrl=ctrl[0];var sectorToolsCtrl=ctrl[1];toolboxCtrl.onLayerToolInit(sectorToolsCtrl.layer,sectorToolsCtrl)}}}sectorTools.$inject=["$compile","$timeout","$window"]},function(module,exports){module.exports='<div class=sector-tools><div class=form-group><label>Count</label><span>{{ctrl.count}}</span></div><div class=form-group ng-show=ctrl.AppConfig.advancedOptions><label>Visible triangles</label><span><select ng-model=ctrl.mapManager.sectorTriangleMode convert-to-number><option value={{ctrl.SectorTriangleModes.None}}>None<option value={{ctrl.SectorTriangleModes.Rendering}}>Rendering<option value={{ctrl.SectorTriangleModes.Collision}}>Collision</select></span></div><div ng-show="ctrl.selectedObjects.length > 0"><div class=form-group><label>ID</label><span>{{ctrl.selectedId}}</span></div><div class=form-group><label>Floor height</label><span><input ng-model=ctrl.sector.floorTopY validate=ctrl.validateInteger(value) ng-change=ctrl.onFloorHeightChange()></span></div><div class=form-group><label>Ceiling</label><span><input type=checkbox ng-model=ctrl.sector.ceiling ng-change="ctrl.applyToAllSelected(\'ceiling\')"></span></div><div class=form-group><label>Floor-ceiling dist.</label><span><input ng-model=ctrl.sector.floorCeilDist validate=ctrl.validatePositiveInteger(value) ng-change=ctrl.onFloorCeilDistChange()></span></div><div class=form-group><label>Ceiling thickness</label><span><input ng-model=ctrl.sector.ceilThickness validate=ctrl.validatePositiveInteger(value) ng-change=ctrl.onCeilThicknessChange()></span></div><div class=form-group><label>Door</label><span><input type=checkbox ng-model=ctrl.sector.door ng-change=ctrl.onDoorChange()></span></div><div class=form-group ng-show=ctrl.sector.door><label>Door max height</label><span><input ng-model=ctrl.sector.doorMaxHeight validate=ctrl.validateInteger(value) ng-change="ctrl.applyToAllSelected(\'doorMaxHeight\')"></span></div><div class=form-group><label>Elevator</label><span><input type=checkbox ng-model=ctrl.sector.elevator ng-change=ctrl.onElevatorChange()></span></div><div class=form-group ng-show=ctrl.sector.elevator><label>Elevator max height</label><span><input ng-model=ctrl.sector.elevatorMaxHeight validate=ctrl.validateInteger(value) ng-change="ctrl.applyToAllSelected(\'elevatorMaxHeight\')"></span></div><div class=form-group ng-show="ctrl.sector.door || ctrl.sector.elevator"><label>Use vertex colors</label><span><input type=checkbox ng-model=ctrl.sector.useVertexColors ng-change="ctrl.applyToAllSelected(\'useVertexColors\')"></span></div><div class=form-group ng-show="ctrl.sector.elevator && !ctrl.sector.useVertexColors"><label>Floor texture</label><span><input ng-model=ctrl.sector.floorTexId ng-change="ctrl.applyToAllSelected(\'floorTexId\')"></span></div><div class=form-group ng-show="ctrl.sector.door && !ctrl.sector.useVertexColors"><label>Ceiling texture</label><span><input ng-model=ctrl.sector.ceilTexId ng-change="ctrl.applyToAllSelected(\'ceilTexId\')"></span></div><div class=form-group ng-show="(ctrl.sector.door || ctrl.sector.elevator) && !ctrl.sector.useVertexColors"><label>Side texture</label><span><input ng-model=ctrl.sector.sideTexId ng-change="ctrl.applyToAllSelected(\'sideTexId\')"></span></div><div class=form-group><label>Light level</label><span><input ng-model=ctrl.sector.lightLevel validate=ctrl.validateLightLevel(value) ng-change="ctrl.applyToAllSelected(\'lightLevel\')"></span></div><div class=form-group><label>Light color</label><span><input type=color ng-model=ctrl.sector.lightColorStyle ng-change=ctrl.onLightColorChange()></span></div></div></div>'},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};Object.defineProperty(exports,"__esModule",{value:true});var _EditorModes=__webpack_require__(12);var _EditorModes2=_interopRequireDefault(_EditorModes);var _BaseToolsController2=__webpack_require__(13);var _BaseToolsController3=_interopRequireDefault(_BaseToolsController2);var _SectorTriangleModes=__webpack_require__(19);var _SectorTriangleModes2=_interopRequireDefault(_SectorTriangleModes);var _AppConfig=__webpack_require__(15);var _AppConfig2=_interopRequireDefault(_AppConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SectorTools=function(_BaseToolsController){_inherits(SectorTools,_BaseToolsController);function SectorTools(){_classCallCheck(this,SectorTools);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SectorTools).call(this));_this.id="sectorTools";_this.layer=GS.MapLayers.Sector;_this.AppConfig=_AppConfig2.default;_this.SectorTriangleModes=_SectorTriangleModes2.default;_this.mode=_EditorModes2.default.Selecting;return _this}_createClass(SectorTools,[{key:"update",value:function update(){var mx=GS.InputHelper.mouseX;var my=GS.InputHelper.mouseY;switch(this.mode){case _EditorModes2.default.Selecting:this.handleSelecting(mx,my);break}}},{key:"hexToStyle",value:function hexToStyle(hex){return"#"+this.pad(hex.toString(16),6)}},{key:"styleToHex",value:function styleToHex(style){style=style.substr(1);return parseInt(style,16)}},{key:"pad",value:function pad(n,width,z){z=z||"0";n=n+"";return n.length>=width?n:new Array(width-n.length+1).join(z)+n}},{key:"validatePositiveInteger",value:function validatePositiveInteger(value){if(!isNaN(value)&&parseInt(value,10)>=0){return{value:parseInt(value,10)}}else{return false}}},{key:"validateInteger",value:function validateInteger(value){if(!isNaN(value)){return{value:parseInt(value,10)}}else{return false}}},{key:"validateLightLevel",value:function validateLightLevel(value){if(!isNaN(value)&&parseInt(value,10)===parseFloat(value)){var n=parseInt(value,10);if(n<0){n=0}if(n>10){n=10}return{value:n}}else{return false}}},{key:"onFloorHeightChange",value:function onFloorHeightChange(){var _this2=this;this.selectedObjects.forEach(function(obj){var floorCeilDist=obj.ceilBottomY-obj.floorTopY;var ceilThickness=obj.ceilTopY-obj.ceilBottomY;obj.floorTopY=_this2.sector.floorTopY;obj.floorBottomY=_this2.sector.floorTopY;obj.ceilBottomY=_this2.sector.floorTopY+floorCeilDist;obj.ceilTopY=_this2.sector.floorTopY+floorCeilDist+ceilThickness})}},{key:"onFloorCeilDistChange",value:function onFloorCeilDistChange(){var _this3=this;this.selectedObjects.forEach(function(obj){var ceilThickness=obj.ceilTopY-obj.ceilBottomY;obj.ceilBottomY=obj.floorBottomY+_this3.sector.floorCeilDist;obj.ceilTopY=obj.ceilBottomY+ceilThickness})}},{key:"onCeilThicknessChange",value:function onCeilThicknessChange(){var _this4=this;this.selectedObjects.forEach(function(obj){obj.ceilTopY=obj.ceilBottomY+_this4.sector.ceilThickness})}},{key:"onDoorChange",value:function onDoorChange(){var _this5=this;this.selectedObjects.forEach(function(obj){obj.door=_this5.sector.door;if(_this5.sector.door){_this5.sector.elevator=false;obj.elevator=false}})}},{key:"onElevatorChange",value:function onElevatorChange(){var _this6=this;this.selectedObjects.forEach(function(obj){obj.elevator=_this6.sector.elevator;if(_this6.sector.elevator){_this6.sector.door=false;obj.door=false}})}},{key:"onLightColorChange",value:function onLightColorChange(){var _this7=this;this.selectedObjects.forEach(function(obj){var value=_this7.styleToHex(_this7.sector.lightColorStyle);obj.lightColor=value;obj.ceilingCatColor=value})}},{key:"applyToAllSelected",value:function applyToAllSelected(propertyName){var _this8=this;this.selectedObjects.forEach(function(obj){obj[propertyName]=_this8.sector[propertyName]})}},{key:"selectionChange",value:function selectionChange(){var _this9=this;_get(Object.getPrototypeOf(SectorTools.prototype),"selectionChange",this).call(this);this.selectedObjects=Object.keys(this.selected).map(function(key){return _this9.mapManager.getLayerObject(_this9.layer,key)});if(this.selectedObjects.length>0){if(this.selectedObjects.length===1){var sector=angular.copy(this.selectedObjects[0]);this.selectedId=sector.id;sector.ceiling=sector.ceiling!==undefined?sector.ceiling:true;sector.floorCeilDist=sector.ceilBottomY-sector.floorTopY;sector.ceilThickness=sector.ceilTopY-sector.ceilBottomY;sector.door=sector.door!==undefined?sector.door:false;sector.doorMaxHeight=sector.doorMaxHeight!==undefined?sector.doorMaxHeight:16;sector.elevator=sector.elevator!==undefined?sector.elevator:false;sector.elevatorMaxHeight=sector.elevatorMaxHeight!==undefined?sector.elevatorMaxHeight:16;sector.useVertexColors=sector.useVertexColors!==undefined?sector.useVertexColors:false;sector.lightColorStyle=this.hexToStyle(sector.lightColor);this.sector=sector}else{this.selectedId=this.selectedObjects.length+" selected";this.sector={lightColorStyle:"#ad00ad"}}}}}]);return SectorTools}(_BaseToolsController3.default);exports.default=SectorTools},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var SectorTriangleModes={None:0,Rendering:1,Collision:2};exports.default=SectorTriangleModes},function(module,exports,__webpack_require__){
"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=entityTools;var _entityTools=__webpack_require__(21);var _entityTools2=_interopRequireDefault(_entityTools);var _EntityToolsController=__webpack_require__(22);var _EntityToolsController2=_interopRequireDefault(_EntityToolsController);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function entityTools($compile,$timeout,$window){return{restrict:"E",require:["^toolbox","entityTools"],scope:{},bindToController:true,template:_entityTools2.default,controller:_EntityToolsController2.default,controllerAs:"ctrl",link:function link(scope,elem,attrs,ctrl){var toolboxCtrl=ctrl[0];var entityToolsCtrl=ctrl[1];toolboxCtrl.onLayerToolInit(entityToolsCtrl.layer,entityToolsCtrl)}}}entityTools.$inject=["$compile","$timeout","$window"]},function(module,exports){module.exports='<div class=entity-tools><div class=form-group><label>Count</label><span>{{ctrl.count}}</span></div><div class=entity-types><select ng-options="item as item.name for item in ctrl.entityTypes" size=10 ng-model=ctrl.selectedEntityType></select></div><div ng-show="ctrl.selectedObjects.length > 0"><div class=form-group><label>ID</label><span>{{ctrl.selectedId}}</span></div><div class=form-group><label>Y</label><span><input ng-model=ctrl.entity.y validate=ctrl.validateInteger(value) ng-change="ctrl.applyToAllSelected(\'y\')"></span></div><div class=form-group ng-show=ctrl.entity.showRotation><label>Rotation (deg)</label><span><input ng-model=ctrl.entity.rotation validate=ctrl.validateAngle(value) ng-change="ctrl.applyToAllSelected(\'rotation\')"></span></div><div class=form-group><label>Static</label><span><input type=checkbox ng-model=ctrl.entity.isStatic ng-change="ctrl.applyToAllSelected(\'isStatic\')"></span></div><div class=buttons><button type=button class="btn btn-primary" ng-click=ctrl.onComputeYClick()>Compute Y for selected entities</button></div></div></div>'},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};Object.defineProperty(exports,"__esModule",{value:true});var _EditorModes=__webpack_require__(12);var _EditorModes2=_interopRequireDefault(_EditorModes);var _BaseToolsController2=__webpack_require__(13);var _BaseToolsController3=_interopRequireDefault(_BaseToolsController2);var _AppConfig=__webpack_require__(15);var _AppConfig2=_interopRequireDefault(_AppConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var EntityToolsController=function(_BaseToolsController){_inherits(EntityToolsController,_BaseToolsController);function EntityToolsController(){_classCallCheck(this,EntityToolsController);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(EntityToolsController).call(this));_this.AppConfig=_AppConfig2.default;_this.id="entityTools";_this.layer=GS.MapLayers.Entity;_this.mousePressed=false;_this.entityTypes=Object.keys(GS.MapEntities).map(function(x){return{id:x,name:GS.MapEntities[x].name}});_this.selectedEntityType=_this.entityTypes[0];return _this}_createClass(EntityToolsController,[{key:"onComputeYClick",value:function onComputeYClick(){this.mapManager.computeYForEntities(this.selected)}},{key:"update",value:function update(){if(!GS.InputHelper.leftMouseDown){this.mousePressed=false}var mx=GS.InputHelper.mouseX;var my=GS.InputHelper.mouseY;switch(this.mode){case _EditorModes2.default.Selecting:this.handleSelecting(mx,my);break;case _EditorModes2.default.Drawing:this.handleDrawing(mx,my);break}}},{key:"handleDrawing",value:function handleDrawing(mx,my){var v=new THREE.Vector2(mx,my);this.mapManager.convertToGridCellCoords(v);this.mapManager.drawEntity({pos:v,type:this.selectedEntityType.id});if(GS.InputHelper.leftMouseDown&&!this.mousePressed){if(this.inCanvas(mx,my)){var containsEntity=this.mapManager.isEntityAt(v);if(!containsEntity){var ntt=this.mapManager.constructLayerObject(this.layer,{pos:v,y:0,type:this.selectedEntityType.id,rotation:0});this.mapManager.addLayerObject(this.layer,ntt);this.actionLog.push(this.getAddAction(ntt.id))}this.mousePressed=true}}this.mapManager.drawCursor(v)}},{key:"validateInteger",value:function validateInteger(value){if(!isNaN(value)){return{value:parseInt(value,10)}}else{return false}}},{key:"validateAngle",value:function validateAngle(value){if(!isNaN(value)){var n=parseInt(value,10)%360;return{value:n}}else{return false}}},{key:"applyToAllSelected",value:function applyToAllSelected(propertyName){var _this2=this;this.selectedObjects.forEach(function(obj){obj[propertyName]=_this2.entity[propertyName]})}},{key:"selectionChange",value:function selectionChange(){var _this3=this;_get(Object.getPrototypeOf(EntityToolsController.prototype),"selectionChange",this).call(this);this.selectedObjects=Object.keys(this.selected).map(function(key){return _this3.mapManager.getLayerObject(_this3.layer,key)});if(this.selectedObjects.length>0){if(this.selectedObjects.length===1){var entity=angular.copy(this.selectedObjects[0]);this.selectedId=entity.id;entity.isStatic=entity.isStatic!==undefined?entity.isStatic:false;entity.showRotation=GS.MapEntities[entity.type].type==="Monster";this.entity=entity}else{this.selectedId=this.selectedObjects.length+" selected";this.entity={showRotation:true}}}}}]);return EntityToolsController}(_BaseToolsController3.default);exports.default=EntityToolsController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=zoneTools;var _zoneTools=__webpack_require__(24);var _zoneTools2=_interopRequireDefault(_zoneTools);var _ZoneToolsController=__webpack_require__(25);var _ZoneToolsController2=_interopRequireDefault(_ZoneToolsController);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function zoneTools($compile,$timeout,$window){return{restrict:"E",require:["^toolbox","zoneTools"],scope:{},bindToController:true,template:_zoneTools2.default,controller:_ZoneToolsController2.default,controllerAs:"ctrl",link:function link(scope,elem,attrs,ctrl){var toolboxCtrl=ctrl[0];var zoneToolsCtrl=ctrl[1];toolboxCtrl.onLayerToolInit(zoneToolsCtrl.layer,zoneToolsCtrl)}}}zoneTools.$inject=["$compile","$timeout","$window"]},function(module,exports){module.exports='<div class=zone-tools><div class=form-group><label>Count</label><span>{{ctrl.count}}</span></div><div ng-show="ctrl.selectedObjects.length > 0"><div class=form-group><label>ID</label><span>{{ctrl.selectedId}}</span></div><div class=form-group><label>Name</label><span><input ng-model=ctrl.selectedName validate=ctrl.validateZoneName(value) ng-change=ctrl.onNameChange()></span></div></div></div>'},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};Object.defineProperty(exports,"__esModule",{value:true});var _EditorModes=__webpack_require__(12);var _EditorModes2=_interopRequireDefault(_EditorModes);var _BaseToolsController2=__webpack_require__(13);var _BaseToolsController3=_interopRequireDefault(_BaseToolsController2);var _AppConfig=__webpack_require__(15);var _AppConfig2=_interopRequireDefault(_AppConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ZoneToolsController=function(_BaseToolsController){_inherits(ZoneToolsController,_BaseToolsController);function ZoneToolsController(){_classCallCheck(this,ZoneToolsController);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ZoneToolsController).call(this));_this.AppConfig=_AppConfig2.default;_this.id="zoneTools";_this.layer=GS.MapLayers.Zone;_this.isDrawingZone=false;return _this}_createClass(ZoneToolsController,[{key:"update",value:function update(){var mx=GS.InputHelper.mouseX;var my=GS.InputHelper.mouseY;switch(this.mode){case _EditorModes2.default.Selecting:this.handleSelecting(mx,my);break;case _EditorModes2.default.Drawing:this.handleDrawing(mx,my);break}}},{key:"handleDrawing",value:function handleDrawing(mx,my){var v=new THREE.Vector2(mx,my);this.mapManager.convertToGridCellCoords(v);this.mapManager.drawCursorExtensions(v);if(GS.InputHelper.leftMouseDown){if(this.inCanvas(mx,my)){if(this.isDrawingZone===false){this.isDrawingZone=true;this.zoneStart=new THREE.Vector2(mx,my);this.mapManager.convertToGridCellCoords(this.zoneStart)}}if(this.isDrawingZone){this.mapManager.drawZone(this.zoneStart,v)}}else{if(this.isDrawingZone){this.isDrawingZone=false;if(this.inCanvas(mx,my)){if(!this.zoneStart.equalsEpsilon(v)){var zone=this.mapManager.constructLayerObject(this.layer,{start:this.zoneStart.clone(),end:v});this.mapManager.addLayerObject(this.layer,zone);this.actionLog.push(this.getAddAction(zone.id));this.mapManager.drawZone(this.zoneStart,v)}}}}this.mapManager.drawCursor(v)}},{key:"validateZoneName",value:function validateZoneName(value){var validate=function validate(name){var re=/^[0-9a-zA-Z_]+$/;return re.exec(name)};var zoneNameError=["invalid zone name:","only a-z, A-Z, 0-9 and _ are allowed as characters","name must be at least 1 character long"].join("\n");if(validate(value)){return{value:value}}else{alert(zoneNameError);return false}}},{key:"onNameChange",value:function onNameChange(){var _this2=this;this.selectedObjects.forEach(function(obj){obj.name=_this2.selectedName})}},{key:"selectionChange",value:function selectionChange(){var _this3=this;_get(Object.getPrototypeOf(ZoneToolsController.prototype),"selectionChange",this).call(this);this.selectedObjects=Object.keys(this.selected).map(function(key){return _this3.mapManager.getLayerObject(_this3.layer,key)});if(this.selectedObjects.length>0){if(this.selectedObjects.length===1){var zone=this.selectedObjects[0];this.selectedId=zone.id;this.selectedName=zone.name}else{this.selectedId=this.selectedObjects.length+" selected";this.selectedName=""}}}}]);return ZoneToolsController}(_BaseToolsController3.default);exports.default=ZoneToolsController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _toolbox=__webpack_require__(27);var _toolbox2=_interopRequireDefault(_toolbox);var _ToolboxController=__webpack_require__(28);var _ToolboxController2=_interopRequireDefault(_ToolboxController);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var component={template:_toolbox2.default,controller:_ToolboxController2.default,controllerAs:"ctrl"};exports.default=component},function(module,exports){module.exports='<div class=toolbox><div class="panel panel-primary file-buttons"><input type=file id=field-import class=hide> <button type=button class="btn btn-primary" title=New ng-click=ctrl.clearMap()><i class="fa fa-file"></i></button> <button type=button class="btn btn-primary" title=Save ng-click=ctrl.onSaveMapClick()><i class="fa fa-save"></i></button> <button type=button class="btn btn-primary" title=Import ng-click=ctrl.importMap()><i class="fa fa-upload"></i></button> <button type=button class="btn btn-primary" title=Download ng-click=ctrl.mapManager.downloadMap()><i class="fa fa-download"></i></button> <button type=button class="btn btn-primary" title="Load sample map" ng-click=ctrl.onLoadSampleMapClick()><i class="fa fa-magic"></i></button> <a href=../play?testmap target=_blank><button type=button class="btn btn-primary" title="Play current map"><i class="fa fa-play"></i></button></a></div><div class="panel panel-primary" collapsible-panel collapsed><div class=panel-heading>Map</div><div class=panel-body><div class=form-group><label>Map name</label><span><input ng-model=ctrl.mapManager.map.name validate=ctrl.validateMapName(value)></span></div><div class=form-group><label>Has script file</label><span><input type=checkbox ng-model=ctrl.mapManager.map.hasScript></span></div><div class=form-group><label>Start position</label><span>X:<input class=position-text ng-model=ctrl.mapManager.map.playerStartPosition.x validate=ctrl.validateInteger(value)> Y:<input class=position-text ng-model=ctrl.mapManager.map.playerStartPosition.y validate=ctrl.validateInteger(value)></span></div><div class=form-group><label>Collision triangles</label><span>{{ctrl.mapManager.map.triangleCount}}</span></div></div></div><div class="panel panel-primary" collapsible-panel collapsed><div class=panel-heading>General</div><div class=panel-body><div class=form-group><label>Advanced options</label><span><input type=checkbox ng-model=ctrl.AppConfig.advancedOptions></span></div><div class=form-group><label>Position</label><span id=position-field></span></div><div class=form-group><label>Snap to grid</label><span><input type=checkbox ng-model=ctrl.mapManager.snapToGrid></span></div><div class=form-group ng-hide=!ctrl.mapManager.snapToGrid><label>Grid cell size</label><span><input class=pos-textbox ng-model=ctrl.mapManager.map.cellSize validate=ctrl.validatePositiveInteger(value)></span></div></div></div><div class="panel panel-primary layer-panel" collapsible-panel><div class=panel-heading>Layer</div><div class=panel-body><div class="btn-group layer-buttons"><label class="btn btn-primary" style="width: 30%" ng-model=ctrl.layer uib-btn-radio=ctrl.MapLayers.Segment>Segment</label><label class="btn btn-primary" style="width: 24%" ng-model=ctrl.layer uib-btn-radio=ctrl.MapLayers.Sector>Sector</label><label class="btn btn-primary" style="width: 24%" ng-model=ctrl.layer uib-btn-radio=ctrl.MapLayers.Entity>Entity</label><label class="btn btn-primary" style="width: 22%" ng-model=ctrl.layer uib-btn-radio=ctrl.MapLayers.Zone>Zone</label></div><div class=inner><div class=form-group><label>Mode</label><span><div class="btn-group editor-mode"><label class="btn btn-primary" ng-model=ctrl.layerTools[ctrl.layer].mode uib-btn-radio=ctrl.EditorModes.Selecting ng-change=ctrl.onEditorModeChange() title=Select><i class="fa fa-mouse-pointer"></i></label><label class="btn btn-primary" ng-model=ctrl.layerTools[ctrl.layer].mode uib-btn-radio=ctrl.EditorModes.Drawing ng-disabled="ctrl.layer === ctrl.MapLayers.Sector" ng-change=ctrl.onEditorModeChange() title=Draw><i class="fa fa-pencil"></i></label></div></span></div><segment-tools ng-show="ctrl.layer === ctrl.MapLayers.Segment"></segment-tools><sector-tools ng-show="ctrl.layer === ctrl.MapLayers.Sector"></sector-tools><entity-tools ng-show="ctrl.layer === ctrl.MapLayers.Entity"></entity-tools><zone-tools ng-show="ctrl.layer === ctrl.MapLayers.Zone"></zone-tools></div></div></div><cookie-law-warning></cookie-law-warning></div>'},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _ActionTypes=__webpack_require__(14);var _ActionTypes2=_interopRequireDefault(_ActionTypes);var _EditorModes=__webpack_require__(12);var _EditorModes2=_interopRequireDefault(_EditorModes);var _AppConfig=__webpack_require__(15);var _AppConfig2=_interopRequireDefault(_AppConfig);var _CanvasManager=__webpack_require__(29);var _CanvasManager2=_interopRequireDefault(_CanvasManager);var _MapManager=__webpack_require__(30);var _MapManager2=_interopRequireDefault(_MapManager);var _sampleMap=__webpack_require__(32);var _sampleMap2=_interopRequireDefault(_sampleMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ToolboxController=function(){function ToolboxController($timeout){_classCallCheck(this,ToolboxController);this.$timeout=$timeout;this.MapLayers=GS.MapLayers;this.EditorModes=_EditorModes2.default;this.AppConfig=_AppConfig2.default;this.canvas=new _CanvasManager2.default;this.layer=GS.MapLayers.Segment;this.MenuCategory={A:0,B:1,C:2,D:3};this.menuCategory=this.MenuCategory.A;this.keys={Escape:27,Delete:46,A:65,Z:90,G:71,Minus:189,Plus:187,Zero:48};this.actionLog=[];this.init()}_createClass(ToolboxController,[{key:"init",value:function init(){this.canvas.init();this.initComponents();this.initMenuControls();this.initModifyOriginEvent();this.importTestMap();this.draw()}},{key:"initModifyOriginEvent",value:function initModifyOriginEvent(){var _this=this;$(document).mousemove(function(e){if(GS.InputHelper.rightMouseDown){var mx=GS.InputHelper.mouseX;var my=GS.InputHelper.mouseY;var dx=mx-_this.ox;var dy=my-_this.oy;_this.ox=mx;_this.oy=my;_this.mapManager.modifyOrigin(dx,dy);$("#map-canvas").css("cursor","move")}else{_this.ox=GS.InputHelper.mouseX;_this.oy=GS.InputHelper.mouseY;$("#map-canvas").css("cursor","default")}})}},{key:"initComponents",value:function initComponents(){this.mapManager=new _MapManager2.default(this.canvas.bufferCanvas,this.canvas.bufferCtx);this.mapManager.init();this.layerTools={}}},{key:"onLayerToolInit",value:function onLayerToolInit(layer,layerTool){var _this2=this;var inCanvas=function inCanvas(mx,my){return _this2.inCanvas(mx,my)};this.layerTools[layer]=layerTool;this.layerTools[layer].init(this.mapManager,this.actionLog,inCanvas,this.$timeout)}},{key:"initMenuControls",value:function initMenuControls(){var _this3=this;this.mapManager.addEventListener("mapLoad",function(){return _this3.$timeout()});this.mapManager.addEventListener("mapLoad",function(){return window.map=_this3.mapManager.map});this.mapManager.addEventListener("triangleCountChange",function(){return _this3.$timeout()});$("#field-import").change(function(){_this3.importMap()})}},{key:"onEditorModeChange",value:function onEditorModeChange(){var mode=this.layerTools[this.layer].mode;for(var i in this.layerTools){this.layerTools[i].mode=mode}this.layerTools[GS.MapLayers.Sector].mode=_EditorModes2.default.Selecting}},{key:"onSaveMapClick",value:function onSaveMapClick(){this.saveMap(this.mapManager.map)}},{key:"onLoadSampleMapClick",value:function onLoadSampleMapClick(){window.localStorage.testMap=_sampleMap2.default;window.location.reload()}},{key:"validateMapName",value:function validateMapName(value){var validate=function validate(name){var re=/^[0-9a-zA-Z_]+$/;return re.exec(name)};var mapNameError=["invalid map name:","only a-z, A-Z, 0-9 and _ are allowed as characters","name must be at least 1 character long"].join("\n");if(validate(value)){return{value:value}}else{alert(mapNameError);return false}}},{key:"validateInteger",value:function validateInteger(value){if(!isNaN(value)){return{value:parseInt(value,10)}}else{return false}}},{key:"validatePositiveInteger",value:function validatePositiveInteger(value){if(!isNaN(value)&&parseInt(value,10)>=0){return{value:parseInt(value,10)}}else{return false}}},{key:"saveMap",value:function saveMap(map){window.localStorage.testMap=JSON.stringify(map)}},{key:"clearMap",value:function clearMap(){window.localStorage.removeItem("testMap");window.location.reload()}},{key:"importTestMap",value:function importTestMap(){var testMap=window.localStorage.testMap;if(!testMap){var loadedSampleMapOnce=window.localStorage.loadedSampleMapOnce;if(!loadedSampleMapOnce){window.localStorage.loadedSampleMapOnce=true;window.localStorage.testMap=_sampleMap2.default;testMap=_sampleMap2.default}}if(testMap){this.mapManager.importMap(testMap);this.actionLog.length=0;for(var i in this.layerTools){this.layerTools[i].resetSelection()}}}},{key:"importMap",value:function importMap(){var _this4=this;var importField=$("#field-import");var files=importField[0].files;if(files===undefined||files.length===0){importField.trigger("click");return}var file=files[0];var fileReader=new FileReader;fileReader.onload=function(e){_this4.mapManager.importMap(e.target.result);_this4.actionLog.length=0;for(var i in _this4.layerTools){_this4.layerTools[i].resetSelection()}};fileReader.onerror=function(e){alert("File read error: "+e.target.error.code)};fileReader.readAsText(file);importField.val("")}},{key:"update",value:function update(){this.updatePositionLabel();if(this.layerTools[this.layer]){this.layerTools[this.layer].update()}this.processKeyboardInput();this.processZoom()}},{key:"updatePositionLabel",value:function updatePositionLabel(){var mx=GS.InputHelper.mouseX;var my=GS.InputHelper.mouseY;if(this.inCanvas(mx,my)){var v=new THREE.Vector2(mx,my);this.mapManager.convertToGridCellCoords(v);$("#position-field").text("X: "+v.x.toFixed(0)+", Y: "+v.y.toFixed(0))}else{$("#position-field").text("X: ---, Y: ---")}}},{key:"processKeyboardInput",value:function processKeyboardInput(){GS.InputHelper.checkPressedKeys();if(!GS.InputHelper.keysPressed&&GS.InputHelper.ctrl&&GS.InputHelper.isKeyDown(this.keys.A)){this.layerTools[this.layer].onSelectAll()}if(!GS.InputHelper.keysPressed&&GS.InputHelper.ctrl&&GS.InputHelper.isKeyDown(this.keys.G)){GS.InputHelper.keyState[this.keys.G]=false;this.showGoTo()}if(!GS.InputHelper.keysPressed&&GS.InputHelper.isKeyDown(this.keys.Escape)){this.layerTools[this.layer].onEscape()}if(!GS.InputHelper.keysPressed&&GS.InputHelper.ctrl&&GS.InputHelper.isKeyDown(this.keys.Z)){this.undoLastAction()}if(!GS.InputHelper.keysPressed&&GS.InputHelper.isKeyDown(this.keys.Delete)){this.layerTools[this.layer].onDelete()}}},{key:"processZoom",value:function processZoom(){var mx=GS.InputHelper.mouseX;var my=GS.InputHelper.mouseY;if(!this.inCanvas(mx,my)){GS.InputHelper.mouseWheelEvents.length=0;return}while(GS.InputHelper.mouseWheelEvents.length>0){var delta=GS.InputHelper.mouseWheelEvents.shift();if(delta<0){this.mapManager.modifyZoom(-1)}if(delta>0){this.mapManager.modifyZoom(1)}}}},{key:"showGoTo",value:function showGoTo(){var str=window.prompt("Go to layer object ID:","");var n=parseInt(str);if(!isNaN(n)){if(this.layerTools[this.layer].goTo(n)){return}}alert("layer object not found")}},{key:"inCanvas",value:function inCanvas(mx,my){return mx<this.canvas.canvasWidth}},{key:"undoLastAction",value:function undoLastAction(){var action=this.actionLog.pop();if(action){switch(action.type){case _ActionTypes2.default.Add:this.layerTools[action.layer].undoAdd(action);break;case _ActionTypes2.default.Remove:this.layerTools[action.layer].undoRemove(action);break}}}},{key:"draw",value:function draw(){var _this5=this;this.canvas.clearBuffer();var selected;if(this.layerTools[this.layer]){selected=this.layerTools[this.layer].getSelected()}this.mapManager.drawLayer(this.canvas.bufferCtx,this.layer,selected);this.update();this.canvas.clearScreen();this.drawOtherLayers();this.canvas.flip();requestAnimationFrame(function(){return _this5.draw()})}},{key:"drawOtherLayers",value:function drawOtherLayers(){this.canvas.clearTranslucent();switch(this.layer){case GS.MapLayers.Segment:this.mapManager.drawLayer(this.canvas.translucentCtx,GS.MapLayers.Sector);this.mapManager.drawLayer(this.canvas.translucentCtx,GS.MapLayers.Entity);break;case GS.MapLayers.Entity:this.mapManager.drawLayer(this.canvas.translucentCtx,GS.MapLayers.Sector);this.mapManager.drawLayer(this.canvas.translucentCtx,GS.MapLayers.Segment);break;case GS.MapLayers.Sector:this.mapManager.drawLayer(this.canvas.translucentCtx,GS.MapLayers.Entity);break;case GS.MapLayers.Zone:this.mapManager.drawLayer(this.canvas.translucentCtx,GS.MapLayers.Sector);this.mapManager.drawLayer(this.canvas.translucentCtx,GS.MapLayers.Segment);this.mapManager.drawLayer(this.canvas.translucentCtx,GS.MapLayers.Entity);break}}}]);return ToolboxController}();exports.default=ToolboxController;ToolboxController.$inject=["$timeout"]},function(module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var CanvasManager=function(){function CanvasManager(){_classCallCheck(this,CanvasManager)}_createClass(CanvasManager,[{key:"init",value:function init(){var _this=this;this.canvasContainer=document.getElementById("canvas-container");this.menuContainer=document.getElementById("menu-container");this.calculateSizes();this.screenCanvas=this.createCanvas();this.screenCanvas.id="map-canvas";this.screenCtx=this.getCanvasContext(this.screenCanvas);this.canvasContainer.appendChild(this.screenCanvas);this.bufferCanvas=this.createCanvas();this.bufferCtx=this.getCanvasContext(this.bufferCanvas);this.translucentCanvas=this.createCanvas();this.translucentCtx=this.getCanvasContext(this.translucentCanvas);window.addEventListener("resize",function(){return _this.onResize()},false);this.onResize()}},{key:"createCanvas",value:function createCanvas(){var canvas=document.createElement("canvas");canvas.width=this.canvasWidth;canvas.height=this.canvasHeight;canvas.style.backgroundColor="rgba(255, 255, 255, 1)";return canvas}},{key:"getCanvasContext",value:function getCanvasContext(canvas){var ctx=canvas.getContext("2d");ctx.globalCompositeOperation="source-over";ctx.save();return ctx}},{key:"calculateSizes",value:function calculateSizes(){var menuWidth=300;this.menuHeight=window.innerHeight;this.canvasWidth=window.innerWidth-menuWidth;this.canvasHeight=window.innerHeight}},{key:"onResize",value:function onResize(){this.calculateSizes();this.screenCanvas.width=this.canvasWidth;this.screenCanvas.height=this.canvasHeight;this.bufferCanvas.width=this.canvasWidth;this.bufferCanvas.height=this.canvasHeight;this.translucentCanvas.width=this.canvasWidth;this.translucentCanvas.height=this.canvasHeight;this.canvasContainer.width=this.canvasWidth+"px";this.canvasContainer.height=this.canvasHeight+"px";this.menuContainer.style.height=this.menuHeight+"px";this.menuContainer.style.marginLeft=this.canvasWidth+"px"}},{key:"clearBuffer",value:function clearBuffer(){this.bufferCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight)}},{key:"clearScreen",value:function clearScreen(){this.screenCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight)}},{key:"clearTranslucent",value:function clearTranslucent(){this.translucentCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight)}},{key:"flip",value:function flip(){this.screenCtx.globalAlpha=.25;this.screenCtx.drawImage(this.translucentCanvas,0,0);this.screenCtx.globalAlpha=1;this.screenCtx.drawImage(this.bufferCanvas,0,0)}}]);return CanvasManager}();exports.default=CanvasManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _EdgeTool=__webpack_require__(31);var _EdgeTool2=_interopRequireDefault(_EdgeTool);var _SectorTriangleModes=__webpack_require__(19);var _SectorTriangleModes2=_interopRequireDefault(_SectorTriangleModes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function MapManager(canvas,ctx){this.canvas=canvas;this.ctx=ctx;this.map={name:this.generateName(),cellSize:4,playerStartPosition:new THREE.Vector2,triangleCount:0};this.map.layerObjectIds={};this.map.layerObjectIds[GS.MapLayers.Segment]=0;this.map.layerObjectIds[GS.MapLayers.Sector]=0;this.map.layerObjectIds[GS.MapLayers.Entity]=0;this.map.layerObjectIds[GS.MapLayers.Zone]=0;this.map.layerObjects={};this.map.layerObjects[GS.MapLayers.Segment]=[];this.map.layerObjects[GS.MapLayers.Sector]=[];this.map.layerObjects[GS.MapLayers.Entity]=[];this.map.layerObjects[GS.MapLayers.Zone]=[];this.zoom={value:1,min:1,max:5,speed:.5};this.defaultOrigin=new THREE.Vector2(768,448);this.offset=new THREE.Vector2(0,0);this.origin=this.defaultOrigin.clone();this.showSegmentNormals=true;this.snapToGrid=true;this.showUserDrawnSegments=true;this.showGeneratedInteriorFloorSides=true;this.showGeneratedInteriorCeilingSides=true;this.showGeneratedExteriorSides=true;this.showTVScreens=true;this.sectorTriangleMode=_SectorTriangleModes2.default.None;this.applyCorrectionsOnImport=true;this.entitySize=8}MapManager.prototype={init:function init(){var that=this;
this.edgeTool=new _EdgeTool2.default(this.map)},generateName:function generateName(){return"testMap"},modifyZoom:function modifyZoom(value){this.zoom.value+=this.zoom.speed*value;this.zoom.value=GS.MathHelper.clamp(this.zoom.value,this.zoom.min,this.zoom.max)},resetZoom:function resetZoom(value){this.zoom.value=this.zoom.min},modifyOrigin:function modifyOrigin(dx,dy){this.origin.x-=dx;this.origin.y-=dy;this.offset.x-=dx;this.offset.y-=dy},convertToGridCoords:function convertToGridCoords(v){v.sub(this.origin).add(this.offset).divideScalar(this.zoom.value).add(this.origin);return v},convertToGridCellCoords:function convertToGridCellCoords(v){this.convertToGridCoords(v);if(this.snapToGrid){v.x=Math.round(v.x/this.map.cellSize)*this.map.cellSize;v.y=Math.round(v.y/this.map.cellSize)*this.map.cellSize}},convertToScreenCoords:function convertToScreenCoords(v){v=v.sub(this.origin).multiplyScalar(this.zoom.value).add(this.origin).sub(this.offset);return v},drawLayer:function drawLayer(ctx,layer,selected){switch(layer){case GS.MapLayers.Segment:this.drawSegmentLayer(ctx,selected);break;case GS.MapLayers.Sector:this.drawSectorLayer(ctx,selected);break;case GS.MapLayers.Entity:this.drawEntityLayer(ctx,selected);break;case GS.MapLayers.Zone:this.drawZoneLayer(ctx,selected);break}},drawCursorExtensions:function drawCursorExtensions(pos){var crossSize=8;pos=this.convertToScreenCoords(pos.clone());this.ctx.save();this.ctx.strokeStyle="#c0c0c0";this.ctx.lineWidth=1;this.ctx.beginPath();this.ctx.moveTo(0,pos.y);this.ctx.lineTo(this.canvas.width,pos.y);this.ctx.moveTo(pos.x,0);this.ctx.lineTo(pos.x,this.canvas.height);this.ctx.stroke();this.ctx.closePath();this.ctx.restore()},drawCursor:function drawCursor(pos,extended){var crossSize=8;pos=this.convertToScreenCoords(pos.clone());this.ctx.save();this.ctx.strokeStyle="#000";this.ctx.lineWidth=3;this.ctx.beginPath();this.ctx.moveTo(pos.x-crossSize,pos.y);this.ctx.lineTo(pos.x+crossSize,pos.y);this.ctx.moveTo(pos.x,pos.y-crossSize);this.ctx.lineTo(pos.x,pos.y+crossSize);this.ctx.stroke();this.ctx.closePath();this.ctx.restore()},drawSelection:function drawSelection(start,end){var x0=Math.min(start.x,end.x);var x1=Math.max(start.x,end.x);var y0=Math.min(start.y,end.y);var y1=Math.max(start.y,end.y);var width=x1-x0;var height=y1-y0;this.ctx.save();this.ctx.fillStyle="rgba(0, 128, 255, 0.25)";this.ctx.fillRect(x0,y0,width,height);this.ctx.strokeStyle="rgba(0, 128, 255, 1)";this.ctx.lineWidth=1;this.ctx.strokeRect(x0,y0,width,height);this.ctx.restore()},forEachLayerObject:function forEachLayerObject(layer,func){var objList=this.map.layerObjects[layer];for(var i=0;i<objList.length;i++){var obj=objList[i];func(obj)}},getLayerObjectCount:function getLayerObjectCount(layer){return this.map.layerObjects[layer].length},getLayerObject:function getLayerObject(layer,id){for(var i=0;i<this.map.layerObjects[layer].length;i++){var obj=this.map.layerObjects[layer][i];if(obj.id==id){return obj}}return undefined},constructLayerObject:function constructLayerObject(layer,params){var obj={id:this.map.layerObjectIds[layer]++};$.extend(obj,params);return obj},addLayerObject:function addLayerObject(layer,obj){this.map.layerObjects[layer].push(obj);this.dispatchEvent({type:"layerObjectCountChange",layer:layer});this.map.triangleCount=this.getTriangleCount();this.dispatchEvent({type:"triangleCountChange"})},removeLayerObject:function removeLayerObject(layer,id){this.map.layerObjects[layer]=this.map.layerObjects[layer].filter(function(a){return a.id!=id});this.dispatchEvent({type:"layerObjectCountChange",layer:layer});this.map.triangleCount=this.getTriangleCount();this.dispatchEvent({type:"triangleCountChange"})},removeLayerObjects:function removeLayerObjects(layer,selected){this.map.layerObjects[layer]=this.map.layerObjects[layer].filter(function(a){return selected[a.id]===undefined});this.dispatchEvent({type:"layerObjectCountChange",layer:layer});this.map.triangleCount=this.getTriangleCount();this.dispatchEvent({type:"triangleCountChange"})},getSelectionOfAllLayerObjects:function getSelectionOfAllLayerObjects(layer,condition){condition=condition||function(obj){return true};var selected={};for(var i=0;i<this.map.layerObjects[layer].length;i++){var obj=this.map.layerObjects[layer][i];if(layer==GS.MapLayers.Segment){if(this.isSegmentVisible(obj)){selected[obj.id]=condition(obj)}}else{selected[obj.id]=condition(obj)}}return selected},getLayerObjectsInSelection:function getLayerObjectsInSelection(layer,start,end){start=this.convertToGridCoords(start.clone());end=this.convertToGridCoords(end.clone());var x0=Math.min(start.x,end.x);var x1=Math.max(start.x,end.x);var y0=Math.min(start.y,end.y);var y1=Math.max(start.y,end.y);var selected={};for(var i=0;i<this.map.layerObjects[layer].length;i++){var obj=this.map.layerObjects[layer][i];if(layer==GS.MapLayers.Segment){if(this.isSegmentVisible(obj)&&this.layerObjectIntersectsWithBox(layer,obj,x0,y0,x1,y1)){selected[obj.id]=true}}else{if(this.layerObjectIntersectsWithBox(layer,obj,x0,y0,x1,y1)){selected[obj.id]=true}}}return selected},layerObjectIntersectsWithBox:function layerObjectIntersectsWithBox(layer,obj,x0,y0,x1,y1){var box=(new THREE.Box2).setFromPoints([new THREE.Vector2(x0,y0),new THREE.Vector2(x1,y1)]);switch(layer){case GS.MapLayers.Segment:return GS.LineHelper.intersectionLineSegmentBox(obj,box);case GS.MapLayers.Sector:return GS.PolygonHelper.intersectionSectorBox(obj,box);case GS.MapLayers.Entity:return this.entityIntersectsWithBox(obj,box);case GS.MapLayers.Zone:return this.zoneIntersectsWithBox(obj,box)}},zoneIntersectsWithBox:function zoneIntersectsWithBox(zone,box1){var box0=(new THREE.Box2).setFromPoints([zone.start,zone.end]);return box0.isIntersectionBox(box1)},entityIntersectsWithBox:function entityIntersectsWithBox(ntt,box1){var size=this.entitySize;var end=ntt.pos.clone().add(new THREE.Vector2(size,size));var box0=new THREE.Box2(ntt.pos,end);return box0.isIntersectionBox(box1)},drawSegmentLayer:function drawSegmentLayer(ctx,selected){var getColor=function getColor(){return"#000"};if(selected!==undefined&&selected!=={}){getColor=function(obj){return selected[obj.id]!==undefined?"#0000ff":"#000"}}ctx.save();var segs=this.map.layerObjects[GS.MapLayers.Segment];for(var i=0;i<segs.length;i++){if(!this.isSegmentVisible(segs[i])){continue}var seg=segs[i];var start=this.convertToScreenCoords(seg.start.clone());var end=this.convertToScreenCoords(seg.end.clone());ctx.strokeStyle=getColor(seg);ctx.lineWidth=3;ctx.beginPath();ctx.moveTo(start.x,start.y);ctx.lineTo(end.x,end.y);ctx.stroke();ctx.closePath()}if(this.showSegmentNormals){this.drawSegmentNormals(ctx,selected)}ctx.restore()},drawSegmentNormals:function drawSegmentNormals(ctx,selected){var getColor=function getColor(){return"#ff00ff"};if(selected!==undefined&&selected!=={}){getColor=function(obj){return selected[obj.id]!==undefined?"#0080ff":"#ff00ff"}}var segs=this.map.layerObjects[GS.MapLayers.Segment];for(var i=0;i<segs.length;i++){var seg=segs[i];if(!this.isSegmentVisible(seg)){continue}var start=this.convertToScreenCoords(seg.start.clone());var end=this.convertToScreenCoords(seg.end.clone());var normalStart=new THREE.Vector2;var normalEnd=(new THREE.Vector2).subVectors(end,start);var center=normalEnd.clone().divideScalar(2);var offset=GS.MathHelper.vec2Normal(normalStart,normalEnd).multiplyScalar(10);ctx.strokeStyle=getColor(seg);ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(start.x+center.x,start.y+center.y);ctx.lineTo(start.x+center.x+offset.x,start.y+center.y+offset.y);ctx.stroke();ctx.closePath()}},isSegmentVisible:function isSegmentVisible(seg){switch(seg.type){case GS.SegmentTypes.User:return this.showUserDrawnSegments;case GS.SegmentTypes.InteriorFloor:return this.showGeneratedInteriorFloorSides;case GS.SegmentTypes.InteriorCeiling:return this.showGeneratedInteriorCeilingSides;case GS.SegmentTypes.Exterior:return this.showGeneratedExteriorSides;case GS.SegmentTypes.TVScreen:case GS.SegmentTypes.Switch:return this.showTVScreens}},drawSegment:function drawSegment(start,end,color){color=color!==undefined?color:"#000";this.ctx.save();start=this.convertToScreenCoords(start.clone());end=this.convertToScreenCoords(end.clone());this.ctx.strokeStyle=color;this.ctx.lineWidth=3;this.ctx.beginPath();this.ctx.moveTo(start.x,start.y);this.ctx.lineTo(end.x,end.y);this.ctx.stroke();this.ctx.closePath();this.ctx.restore()},isSegmentPointAt:function isSegmentPointAt(pos){var segs=this.map.layerObjects[GS.MapLayers.Segment];for(var i=0;i<segs.length;i++){var seg=segs[i];if(seg.start.x==pos.x&&seg.start.y==pos.y||seg.end.x==pos.x&&seg.end.y==pos.y)return true}return false},convertSegmentsToSectors:function convertSegmentsToSectors(selected){if(Object.keys(selected).length>=3){var segments=[];for(var i in selected){var seg=this.getLayerObject(GS.MapLayers.Segment,i);segments.push(seg)}var cellSize=this.snapToGrid?this.map.cellSize:undefined;var result=GS.PolygonHelper.getTriangulatedPolygonsFromLineSegments(segments,cellSize);if(result.polygons.length>0){for(var i=0;i<result.polygons.length;i++){var polygon=result.polygons[i];var sector=this.constructLayerObject(GS.MapLayers.Sector,{vertexArray:polygon.vertexArray,vertices:polygon.vertices,indices:polygon.indices,floorBottomY:0,floorTopY:0,ceilBottomY:64,ceilTopY:64,ceiling:true});this.addLayerObject(GS.MapLayers.Sector,sector);this.applySectorDefaults(sector)}}}},flipSegmentNormals:function flipSegmentNormals(selected){if(Object.keys(selected).length>=1){for(var i in selected){var seg=this.getLayerObject(GS.MapLayers.Segment,i);var aux=seg.start;seg.start=seg.end;seg.end=aux}}},computeYForEntities:function computeYForEntities(selected){if(Object.keys(selected).length>=1){for(var i in selected){var ntt=this.getLayerObject(GS.MapLayers.Entity,i);var center=ntt.pos.clone().add(new THREE.Vector2(this.entitySize/2,this.entitySize/2));var sectors=this.map.layerObjects[GS.MapLayers.Sector];for(var j=0;j<sectors.length;j++){if(GS.PolygonHelper.sectorContainsPoint(sectors[j],center)){ntt.y=sectors[j].floorTopY;break}}}}},drawSectorLayer:function drawSectorLayer(ctx,selected){ctx.save();this.drawSectors(ctx,selected,false);this.drawSectors(ctx,selected,true);ctx.restore()},getSectorColor:function(){var lineColor=new THREE.Color;var fillColor=new THREE.Color;var hsl={};return function(sector,selected,drawSelected){if(sector.door===true){lineColor.setRGB(0,.75,1);fillColor.setRGB(0,.5,1)}else if(sector.elevator===true){lineColor.setRGB(1,1,0);fillColor.setRGB(.75,.75,0)}else{lineColor.setRGB(0,0,0);fillColor.setHex(sector.lightColor)}fillColor.getHSL(hsl);fillColor.setHSL(hsl.h,hsl.s,.25+sector.lightLevel*.05);if(selected!==undefined&&drawSelected){lineColor.setRGB(0,.5,1)}function toHexStr(color){return"#"+color.getHexString()}return{lineColor:toHexStr(lineColor),fillColor:toHexStr(fillColor)}}}(),drawSectors:function drawSectors(ctx,selected,drawSelected){var sectors=this.map.layerObjects[GS.MapLayers.Sector];for(var i=0;i<sectors.length;i++){var sector=sectors[i];if(selected!==undefined){if(!drawSelected&&selected[sector.id]!==undefined){continue}if(drawSelected&&selected[sector.id]===undefined){continue}}var screenCoords=this.convertToScreenCoords(sector.vertices[0].clone());ctx.beginPath();ctx.moveTo(screenCoords.x,screenCoords.y);for(var j=1;j<sector.vertices.length;j++){var p=sector.vertices[j];screenCoords=this.convertToScreenCoords(p.clone());ctx.lineTo(screenCoords.x,screenCoords.y)}ctx.closePath();var color=this.getSectorColor(sector,selected,drawSelected);ctx.fillStyle=color.fillColor;ctx.fill();ctx.lineWidth=3;ctx.strokeStyle=color.lineColor;ctx.stroke();if(this.sectorTriangleMode!==_SectorTriangleModes2.default.None){var v,idx;if(this.sectorTriangleMode===_SectorTriangleModes2.default.Rendering){v=sector.vertices;idx=sector.indices}else if(this.sectorTriangleMode===_SectorTriangleModes2.default.Collision){v=sector.collisionVertices;idx=sector.collisionIndices}if(v!==undefined){for(var j=0;j<idx.length;j+=3){var v0=this.convertToScreenCoords(v[idx[j]].clone());var v1=this.convertToScreenCoords(v[idx[j+1]].clone());var v2=this.convertToScreenCoords(v[idx[j+2]].clone());ctx.beginPath();ctx.moveTo(v0.x,v0.y);ctx.lineTo(v1.x,v1.y);ctx.lineTo(v2.x,v2.y);ctx.closePath();ctx.lineWidth=1;ctx.strokeStyle=color.lineColor;ctx.stroke()}}}}},drawEntityLayer:function drawEntityLayer(ctx,selected){ctx.save();var entities=this.map.layerObjects[GS.MapLayers.Entity];for(var i=0;i<entities.length;i++){var ntt=entities[i];var selectedValue=selected!==undefined?selected[ntt.id]:undefined;this.drawEntity(ntt,selectedValue)}ctx.restore()},drawEntity:function drawEntity(ntt,selected){var name=GS.MapEntities[ntt.type].name;var backColor=selected!==undefined?"#0000ff":"#ff0000";var textColor="#ffffff";this.ctx.save();var entityOffset=4*this.zoom.value;var size=this.entitySize*this.zoom.value;var start=this.convertToScreenCoords(ntt.pos.clone());var end=start.clone().add(new THREE.Vector2(size,size));var center=start.clone().add(new THREE.Vector2(size/2,size/2));var maxWidth=Math.floor((end.x-start.x)*.75);if(GS.MapEntities[ntt.type].type==="Monster"){var normalEnd=new THREE.Vector2(size*Math.sin(Math.PI/180*(180-ntt.rotation)),size*Math.cos(Math.PI/180*(180-ntt.rotation))).add(center);this.ctx.strokeStyle="#000";this.ctx.lineWidth=3;this.ctx.beginPath();this.ctx.moveTo(center.x,center.y);this.ctx.lineTo(normalEnd.x,normalEnd.y);this.ctx.closePath();this.ctx.stroke()}this.ctx.fillStyle=backColor;this.ctx.lineWidth=1;this.ctx.beginPath();this.ctx.moveTo(start.x,start.y);this.ctx.lineTo(end.x,start.y);this.ctx.lineTo(end.x,end.y);this.ctx.lineTo(start.x,end.y);this.ctx.lineTo(start.x,start.y);this.ctx.closePath();this.ctx.fill();this.ctx.strokeStyle="#000";this.ctx.stroke();var fontSize=12;this.ctx.fillStyle=textColor;this.ctx.font=fontSize+"px 'Lucida Console', Monaco, monospace";this.ctx.textAlign="center";this.ctx.textBaseline="middle";var charWidth=this.ctx.measureText(ntt.type).width;var numChars=Math.max(1,Math.floor(maxWidth/charWidth));name=name.substr(0,numChars);this.ctx.fillText(name,center.x,center.y);this.ctx.restore()},isEntityAt:function isEntityAt(pos){var entities=this.map.layerObjects[GS.MapLayers.Entity];for(var i=0;i<entities.length;i++){var ntt=entities[i];if(ntt.pos.x==pos.x&&ntt.pos.y==pos.y)return true}return false},drawZone:function drawZone(start,end){var colors=this.getZoneColors();start=this.convertToScreenCoords(start.clone());end=this.convertToScreenCoords(end.clone());var x0=Math.min(start.x,end.x);var x1=Math.max(start.x,end.x);var y0=Math.min(start.y,end.y);var y1=Math.max(start.y,end.y);var width=x1-x0;var height=y1-y0;this.ctx.save();this.ctx.fillStyle=colors.backColor;this.ctx.fillRect(x0,y0,width,height);this.ctx.strokeStyle=colors.lineColor;this.ctx.lineWidth=1;this.ctx.strokeRect(x0,y0,width,height);this.ctx.restore()},getZoneColors:function getZoneColors(zone,selected){var result={backColor:"rgba(0, 128, 0, 0.25)",lineColor:"rgba(0, 128, 0, 1)"};if(selected!==undefined&&selected!=={}&&selected[zone.id]!==undefined){result.backColor="rgba(0, 255, 0, 0.25)";result.lineColor="rgba(0, 255, 0, 1)"}return result},drawZoneLayer:function drawZoneLayer(ctx,selected){ctx.save();var zones=this.map.layerObjects[GS.MapLayers.Zone];for(var i=0;i<zones.length;i++){var zone=zones[i];var colors=this.getZoneColors(zone,selected);var start=this.convertToScreenCoords(zone.start.clone());var end=this.convertToScreenCoords(zone.end.clone());var x0=Math.min(start.x,end.x);var x1=Math.max(start.x,end.x);var y0=Math.min(start.y,end.y);var y1=Math.max(start.y,end.y);var width=x1-x0;var height=y1-y0;this.ctx.fillStyle=colors.backColor;this.ctx.fillRect(x0,y0,width,height);this.ctx.strokeStyle=colors.lineColor;this.ctx.lineWidth=1;this.ctx.strokeRect(x0,y0,width,height)}ctx.restore()},convertEdgesToSegments:function convertEdgesToSegments(){var that=this;this.edgeTool.computeEdges();var all=this.getSelectionOfAllLayerObjects(GS.MapLayers.Segment,function(seg){return seg.type!==GS.SegmentTypes.TVScreen&&seg.type!==GS.SegmentTypes.Switch?true:undefined});this.removeLayerObjects(GS.MapLayers.Segment,all);this.map.layerObjectIds[GS.MapLayers.Segment]=0;function addEdges(edges){for(var i=0;i<edges.length;i++){edges[i].texId="wall";var segment=that.constructLayerObject(GS.MapLayers.Segment,edges[i]);var sectors=that.map.layerObjects[GS.MapLayers.Sector];var sector=sectors.filter(function(item){return item.id===segment.sectorId});if(sector.length===1){segment.lightColor=sector[0].lightColor}that.addLayerObject(GS.MapLayers.Segment,segment)}}addEdges(this.edgeTool.interiorEdges.elements);addEdges(this.edgeTool.exteriorEdges.elements);GS.PolygonHelper.retriangulateSegments(this.map.layerObjects[GS.MapLayers.Segment]);this.map.sectorLinks=this.edgeTool.sectorLinks},getTriangleCount:function getTriangleCount(){var count=0;var segs=this.map.layerObjects[GS.MapLayers.Segment];for(var i=0;i<segs.length;i++){if(segs[i].type!==GS.SegmentTypes.TVScreen&&segs[i].type!==GS.SegmentTypes.Switch){count+=2}}var sectors=this.map.layerObjects[GS.MapLayers.Sector];for(var i=0;i<sectors.length;i++){var sector=sectors[i];if(sector.collisionIndices===undefined){continue}var hasFloor=sector.elevator!==true;var hasCeiling=sector.ceiling===true&&sector.door!==true;if(hasFloor){count+=sector.collisionIndices.length/3}if(hasCeiling){count+=sector.collisionIndices.length/3}if(sector.door===true){count+=sector.collisionIndices.length/3;count+=sector.collisionVertices.length*2}else if(sector.elevator===true){count+=sector.collisionIndices.length/3;count+=sector.collisionVertices.length*2}}return count},importMap:function importMap(jsonStr){var error=false;var map;try{map=JSON.parse(jsonStr,function(k,v){if(v instanceof Object){if(v.x!==undefined&&v.y!==undefined&&v.z!==undefined){return new THREE.Vector3(v.x,v.y,v.z)}else if(v.x!==undefined&&v.y!==undefined){return new THREE.Vector2(v.x,v.y)}}return v})}catch(e){error=true;alert("import map error:\n"+e)}if(error){return}this.map=map;if(this.map.playerStartPosition!==undefined){this.origin.copy(this.map.playerStartPosition);this.offset.copy(this.origin).sub(this.defaultOrigin)}this.map.triangleCount=this.getTriangleCount();this.dispatchEvent({type:"triangleCountChange"});this.edgeTool.map=this.map;if(this.applyCorrectionsOnImport){this.applyMapCorrections()}this.dispatchEvent({type:"mapLoad"});for(var layer in GS.MapLayers){this.dispatchEvent({type:"layerObjectCountChange",layer:GS.MapLayers[layer]})}},applySectorDefaults:function applySectorDefaults(sector){sector.floorBottomY=sector.floorBottomY||0;sector.floorTopY=sector.floorTopY||0;sector.ceilBottomY=sector.ceilBottomY||64;sector.ceilTopY=sector.ceilTopY||64;sector.ceiling=sector.ceiling!==undefined?sector.ceiling:true;sector.door=sector.door!==undefined?sector.door:false;sector.doorMaxHeight=sector.doorMaxHeight!==undefined?sector.doorMaxHeight:16;sector.elevator=sector.elevator!==undefined?sector.elevator:false;sector.elevatorMaxHeight=sector.elevatorMaxHeight!==undefined?sector.elevatorMaxHeight:16;sector.useVertexColors=sector.useVertexColors!==undefined?sector.useVertexColors:false;sector.floorTexId=sector.floorTexId||"wall";sector.ceilTexId=sector.ceilTexId||"wall";sector.sideTexId=sector.sideTexId||"wall";sector.lightLevel=sector.lightLevel!==undefined?sector.lightLevel:5;sector.lightColor=sector.lightColor!==undefined?sector.lightColor:16777215;sector.ceilingCatColor=sector.lightColor!==undefined?sector.lightColor:16777215},applyMapCorrections:function applyMapCorrections(){if(this.map.name===undefined){this.map.name=this.generateName()}if(this.map.hasScript===undefined){this.map.hasScript=false}if(this.map.layerObjects[GS.MapLayers.Zone]===undefined){this.map.layerObjectIds[GS.MapLayers.Zone]=0;this.map.layerObjects[GS.MapLayers.Zone]=[]}var sectors=this.map.layerObjects[GS.MapLayers.Sector];for(var i=0;i<sectors.length;i++){this.applySectorDefaults(sectors[i])}var segments=this.map.layerObjects[GS.MapLayers.Segment];for(var i=0;i<segments.length;i++){var seg=segments[i];seg.bottomY=seg.bottomY!==undefined?seg.bottomY:0;seg.topY=seg.topY!==undefined?seg.topY:64;seg.type=seg.type!==undefined?seg.type:GS.SegmentTypes.User;seg.texId=seg.texId||"wall"}var entities=this.map.layerObjects[GS.MapLayers.Entity];for(var i=0;i<entities.length;i++){var ntt=entities[i];ntt.y=ntt.y||0;ntt.isStatic=ntt.isStatic!==undefined?ntt.isStatic:false;ntt.rotation=ntt.rotation||0}},downloadMap:function downloadMap(){var json=JSON.stringify(this.map);var filename="map.json";if(!window.navigator.msSaveOrOpenBlob){var a=document.createElement("a");a.href="data:application/json;charset=utf-8,"+encodeURIComponent(json);a.target="_blank";a.download=filename;a.style.display="none";document.body.appendChild(a);a.click();$(a).remove()}else{var blobObject=new Blob([json]);window.navigator.msSaveOrOpenBlob(blobObject,filename)}}};THREE.EventDispatcher.prototype.apply(MapManager.prototype);exports.default=MapManager},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function EdgeTool(map){this.map=map;this.equals=function(a,b){return a.type==b.type&&(a.start.equalsEpsilon(b.start)&&a.end.equalsEpsilon(b.end)||a.end.equalsEpsilon(b.start)&&a.start.equalsEpsilon(b.end))};this.interiorEdges=new GS.Set(undefined,this.equals);this.exteriorEdges=new GS.Set(undefined,this.equals)}EdgeTool.prototype={computeEdges:function computeEdges(){this.interiorEdges.elements=[];this.exteriorEdges.elements=[];GS.PolygonHelper.retriangulateSectors(this.map.layerObjects[GS.MapLayers.Sector]);GS.PolygonHelper.detriangulateSectors(this.map.layerObjects[GS.MapLayers.Sector]);this.sectorLinks=new GS.Set(undefined,function(a,b){return a.start==b.start&&a.end==b.end||a.end==b.start&&a.start==b.end});var edges=new GS.Set(undefined,function(a,b){if(a.sector.id==b.sector.id){return a.start.equalsEpsilon(b.start)&&a.end.equalsEpsilon(b.end)||a.end.equalsEpsilon(b.start)&&a.start.equalsEpsilon(b.end)}else{return false}});var sectors=this.map.layerObjects[GS.MapLayers.Sector];for(var i=0;i<sectors.length;i++){var sector=sectors[i];this.addSectorEdges(sector,edges)}this.processEdges(edges);var links=[];for(var i=0;i<this.sectorLinks.elements.length;i++){var link=this.sectorLinks.elements[i];links.push(link.start,link.end)}this.sectorLinks=links},addSectorEdges:function addSectorEdges(sector,edges){var that=this;var v=sector.vertices;var sectors=that.map.layerObjects[GS.MapLayers.Sector];function addEdge(i,j){var edge={start:v[i],end:v[j],sector:sector};edges.add(edge)}for(var i=0;i<v.length-1;i++){addEdge(i,i+1)}addEdge(v.length-1,0)},processEdges:function processEdges(edges){for(var i=0;i<edges.elements.length;i++){var edge=edges.elements[i];var sharedEdge=false;var adjacentSector=null;for(var j=0;j<edges.elements.length;j++){if(i!=j&&this.equals(edge,edges.elements[j])){sharedEdge=true;adjacentSector=edges.elements[j].sector;break}}if(sharedEdge){this.sectorLinks.add({start:edge.sector.id,end:adjacentSector.id});this.addInteriorFloorEdge(edge.start,edge.end,edge.sector,adjacentSector);this.addInteriorCeilEdge(edge.start,edge.end,edge.sector,adjacentSector)}else{this.addExteriorEdge(edge.start,edge.end,edge.sector)}}},addInteriorFloorEdge:function addInteriorFloorEdge(start,end,sector,adjacentSector){var currentSector=adjacentSector;var edge={start:start,end:end,type:GS.SegmentTypes.InteriorFloor};if(adjacentSector.floorTopY>sector.floorTopY){var aux=edge.start;edge.start=edge.end;edge.end=aux;currentSector=sector}edge.bottomY=Math.min(adjacentSector.floorTopY,sector.floorTopY);edge.topY=Math.max(adjacentSector.floorTopY,sector.floorTopY);edge.sectorId=currentSector.id;if(edge.bottomY!=edge.topY){this.interiorEdges.add(edge)}},addInteriorCeilEdge:function addInteriorCeilEdge(start,end,sector,adjacentSector){var currentSector=adjacentSector;var edge={start:start,end:end,type:GS.SegmentTypes.InteriorCeiling};if(adjacentSector.ceilBottomY<sector.ceilBottomY){var aux=edge.start;edge.start=edge.end;edge.end=aux;currentSector=sector}if(adjacentSector.ceiling&&sector.ceiling){edge.bottomY=Math.min(adjacentSector.ceilBottomY,sector.ceilBottomY);edge.topY=Math.max(adjacentSector.ceilBottomY,sector.ceilBottomY)}else{if(adjacentSector.ceiling&&adjacentSector.ceilBottomY<adjacentSector.ceilTopY){edge.bottomY=adjacentSector.ceilBottomY;edge.topY=adjacentSector.ceilTopY;var aux=edge.start;edge.start=edge.end;edge.end=aux;currentSector=sector}else if(sector.ceiling&&sector.ceilBottomY<sector.ceilTopY){edge.bottomY=sector.ceilBottomY;edge.topY=sector.ceilTopY}}edge.sectorId=currentSector.id;if(edge.bottomY!=edge.topY){this.interiorEdges.add(edge)}},addExteriorEdge:function addExteriorEdge(start,end,sector){var edge={start:end,end:start,sectorId:sector.id,type:GS.SegmentTypes.Exterior};edge.bottomY=sector.floorTopY;edge.topY=sector.ceilBottomY;this.exteriorEdges.add(edge)}};exports.default=EdgeTool},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var map='{"name":"testMap","cellSize":4,"playerStartPosition":{"x":752,"y":400},"triangleCount":240,"layerObjectIds":{"0":70,"2":29,"3":12,"4":0},"layerObjects":{"0":[{"id":0,"start":{"x":779.4285714285714,"y":182.85714285714286},"end":{"x":772.5,"y":169},"type":1,"bottomY":0,"topY":8,"sectorId":0,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":779.4285714285714,"y":8,"z":182.85714285714286},{"x":772.5,"y":8,"z":169},{"x":772.5,"y":0,"z":169},{"x":779.4285714285714,"y":0,"z":182.85714285714286}],"bottomRightIndex":2},{"id":1,"start":{"x":779.4285714285714,"y":182.85714285714286},"end":{"x":772.5,"y":169},"type":2,"bottomY":56,"topY":64,"sectorId":0,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":779.4285714285714,"y":64,"z":182.85714285714286},{"x":772.5,"y":64,"z":169},{"x":772.5,"y":56,"z":169},{"x":779.4285714285714,"y":56,"z":182.85714285714286}],"bottomRightIndex":2},{"id":2,"start":{"x":668.4444444444445,"y":167.11111111111111},"end":{"x":660.5714285714286,"y":182.85714285714286},"type":1,"bottomY":0,"topY":8,"sectorId":0,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":668.4444444444445,"y":8,"z":167.11111111111111},{"x":660.5714285714286,"y":8,"z":182.85714285714286},{"x":660.5714285714286,"y":0,"z":182.85714285714286},{"x":668.4444444444445,"y":0,"z":167.11111111111111}],"bottomRightIndex":2},{"id":3,"start":{"x":668.4444444444445,"y":167.11111111111111},"end":{"x":660.5714285714286,"y":182.85714285714286},"type":2,"bottomY":56,"topY":64,"sectorId":0,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":668.4444444444445,"y":64,"z":167.11111111111111},{"x":660.5714285714286,"y":64,"z":182.85714285714286},{"x":660.5714285714286,"y":56,"z":182.85714285714286},{"x":668.4444444444445,"y":56,"z":167.11111111111111}],"bottomRightIndex":2},{"id":4,"start":{"x":697,"y":147.5},"end":{"x":678.8571428571429,"y":156.57142857142858},"type":1,"bottomY":0,"topY":8,"sectorId":0,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":697,"y":8,"z":147.5},{"x":678.8571428571429,"y":8,"z":156.57142857142858},{"x":678.8571428571429,"y":0,"z":156.57142857142858},{"x":697,"y":0,"z":147.5}],"bottomRightIndex":2},{"id":5,"start":{"x":697,"y":147.5},"end":{"x":678.8571428571429,"y":156.57142857142858},"type":2,"bottomY":56,"topY":64,"sectorId":0,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":697,"y":64,"z":147.5},{"x":678.8571428571429,"y":64,"z":156.57142857142858},{"x":678.8571428571429,"y":56,"z":156.57142857142858},{"x":697,"y":56,"z":147.5}],"bottomRightIndex":2},{"id":6,"start":{"x":728,"y":144},"end":{"x":708,"y":144},"type":1,"bottomY":0,"topY":8,"sectorId":0,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":728,"y":8,"z":144},{"x":708,"y":8,"z":144},{"x":708,"y":0,"z":144},{"x":728,"y":0,"z":144}],"bottomRightIndex":2},{"id":7,"start":{"x":728,"y":144},"end":{"x":708,"y":144},"type":2,"bottomY":56,"topY":64,"sectorId":0,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":728,"y":64,"z":144},{"x":708,"y":64,"z":144},{"x":708,"y":56,"z":144},{"x":728,"y":56,"z":144}],"bottomRightIndex":2},{"id":8,"start":{"x":760,"y":156},"end":{"x":741.3333333333334,"y":146.66666666666666},"type":1,"bottomY":0,"topY":8,"sectorId":0,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":760,"y":8,"z":156},{"x":741.3333333333334,"y":8,"z":146.66666666666666},{"x":741.3333333333334,"y":0,"z":146.66666666666666},{"x":760,"y":0,"z":156}],"bottomRightIndex":2},{"id":9,"start":{"x":760,"y":156},"end":{"x":741.3333333333334,"y":146.66666666666666},"type":2,"bottomY":56,"topY":64,"sectorId":0,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":760,"y":64,"z":156},{"x":741.3333333333334,"y":64,"z":146.66666666666666},{"x":741.3333333333334,"y":56,"z":146.66666666666666},{"x":760,"y":56,"z":156}],"bottomRightIndex":2},{"id":10,"start":{"x":745.3333333333334,"y":142.66666666666666},"end":{"x":764,"y":152},"type":1,"bottomY":0,"topY":8,"sectorId":28,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":745.3333333333334,"y":8,"z":142.66666666666666},{"x":764,"y":8,"z":152},{"x":764,"y":0,"z":152},{"x":745.3333333333334,"y":0,"z":142.66666666666666}],"bottomRightIndex":2},{"id":11,"start":{"x":677.1428571428571,"y":151.42857142857142},"end":{"x":694,"y":143},"type":1,"bottomY":0,"topY":8,"sectorId":28,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":677.1428571428571,"y":8,"z":151.42857142857142},{"x":694,"y":8,"z":143},{"x":694,"y":0,"z":143},{"x":677.1428571428571,"y":0,"z":151.42857142857142}],"bottomRightIndex":2},{"id":12,"start":{"x":708,"y":140},"end":{"x":728,"y":140},"type":1,"bottomY":0,"topY":8,"sectorId":28,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":708,"y":8,"z":140},{"x":728,"y":8,"z":140},{"x":728,"y":0,"z":140},{"x":708,"y":0,"z":140}],"bottomRightIndex":2},{"id":13,"start":{"x":656.6451612903226,"y":181.5483870967742},"end":{"x":663.6,"y":165.9},"type":1,"bottomY":0,"topY":8,"sectorId":28,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":656.6451612903226,"y":8,"z":181.5483870967742},{"x":663.6,"y":8,"z":165.9},{"x":663.6,"y":0,"z":165.9},{"x":656.6451612903226,"y":0,"z":181.5483870967742}],"bottomRightIndex":2},{"id":14,"start":{"x":776.5714285714286,"y":166.28571428571428},"end":{"x":783.3548387096774,"y":181.5483870967742},"type":1,"bottomY":0,"topY":8,"sectorId":28,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":776.5714285714286,"y":8,"z":166.28571428571428},{"x":783.3548387096774,"y":8,"z":181.5483870967742},{"x":783.3548387096774,"y":0,"z":181.5483870967742},{"x":776.5714285714286,"y":0,"z":166.28571428571428}],"bottomRightIndex":2},{"id":15,"start":{"x":772.5,"y":169},"end":{"x":768,"y":160},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,4,2,4,5,2,5,0],"vertices":[{"x":772.5,"y":64,"z":169},{"x":768,"y":64,"z":160},{"x":768,"y":0,"z":160},{"x":772.5,"y":0,"z":169},{"x":772.5,"y":8,"z":169},{"x":772.5,"y":56,"z":169}],"bottomRightIndex":2},{"id":16,"start":{"x":784,"y":192},"end":{"x":779.4285714285714,"y":182.85714285714286},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,0,2,3,0,3,4,4,5,0],"vertices":[{"x":784,"y":64,"z":192},{"x":779.4285714285714,"y":64,"z":182.85714285714286},{"x":779.4285714285714,"y":56,"z":182.85714285714286},{"x":779.4285714285714,"y":8,"z":182.85714285714286},{"x":779.4285714285714,"y":0,"z":182.85714285714286},{"x":784,"y":0,"z":192}],"bottomRightIndex":4},{"id":17,"start":{"x":788,"y":192},"end":{"x":784,"y":192},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":788,"y":64,"z":192},{"x":784,"y":64,"z":192},{"x":784,"y":0,"z":192},{"x":788,"y":0,"z":192}],"bottomRightIndex":2},{"id":18,"start":{"x":816,"y":192},"end":{"x":788,"y":192},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":816,"y":64,"z":192},{"x":788,"y":64,"z":192},{"x":788,"y":0,"z":192},{"x":816,"y":0,"z":192}],"bottomRightIndex":2},{"id":19,"start":{"x":816,"y":288},"end":{"x":816,"y":192},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":816,"y":64,"z":288},{"x":816,"y":64,"z":192},{"x":816,"y":0,"z":192},{"x":816,"y":0,"z":288}],"bottomRightIndex":2},{"id":20,"start":{"x":752,"y":272},"end":{"x":752,"y":288},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":752,"y":64,"z":272},{"x":752,"y":64,"z":288},{"x":752,"y":0,"z":288},{"x":752,"y":0,"z":272}],"bottomRightIndex":2},{"id":21,"start":{"x":720,"y":272},"end":{"x":752,"y":272},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":720,"y":64,"z":272},{"x":752,"y":64,"z":272},{"x":752,"y":0,"z":272},{"x":720,"y":0,"z":272}],"bottomRightIndex":2},{"id":22,"start":{"x":672,"y":272},"end":{"x":704,"y":272},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":672,"y":64,"z":272},{"x":704,"y":64,"z":272},{"x":704,"y":0,"z":272},{"x":672,"y":0,"z":272}],"bottomRightIndex":2},{"id":23,"start":{"x":640,"y":272},"end":{"x":672,"y":272},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":640,"y":64,"z":272},{"x":672,"y":64,"z":272},{"x":672,"y":0,"z":272},{"x":640,"y":0,"z":272}],"bottomRightIndex":2},{"id":24,"start":{"x":640,"y":192},"end":{"x":640,"y":272},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":640,"y":64,"z":192},{"x":640,"y":64,"z":272},{"x":640,"y":0,"z":272},{"x":640,"y":0,"z":192}],"bottomRightIndex":2},{"id":25,"start":{"x":652,"y":192},"end":{"x":640,"y":192},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":652,"y":64,"z":192},{"x":640,"y":64,"z":192},{"x":640,"y":0,"z":192},{"x":652,"y":0,"z":192}],"bottomRightIndex":2},{"id":26,"start":{"x":656,"y":192},"end":{"x":652,"y":192},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":656,"y":64,"z":192},{"x":652,"y":64,"z":192},{"x":652,"y":0,"z":192},{"x":656,"y":0,"z":192}],"bottomRightIndex":2},{"id":27,"start":{"x":660.5714285714286,"y":182.85714285714286},"end":{"x":656,"y":192},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,4,2,4,5,2,5,0],"vertices":[{"x":660.5714285714286,"y":64,"z":182.85714285714286},{"x":656,"y":64,"z":192},{"x":656,"y":0,"z":192},{"x":660.5714285714286,"y":0,"z":182.85714285714286},{"x":660.5714285714286,"y":8,"z":182.85714285714286},{"x":660.5714285714286,"y":56,"z":182.85714285714286}],"bottomRightIndex":2},{"id":28,"start":{"x":672,"y":160},"end":{"x":668.4444444444445,"y":167.11111111111111},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,0,2,3,0,3,4,4,5,0],"vertices":[{"x":672,"y":64,"z":160},{"x":668.4444444444445,"y":64,"z":167.11111111111111},{"x":668.4444444444445,"y":56,"z":167.11111111111111},{"x":668.4444444444445,"y":8,"z":167.11111111111111},{"x":668.4444444444445,"y":0,"z":167.11111111111111},{"x":672,"y":0,"z":160}],"bottomRightIndex":4},{"id":29,"start":{"x":678.8571428571429,"y":156.57142857142858},"end":{"x":672,"y":160},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,4,2,4,5,2,5,0],"vertices":[{"x":678.8571428571429,"y":64,"z":156.57142857142858},{"x":672,"y":64,"z":160},{"x":672,"y":0,"z":160},{"x":678.8571428571429,"y":0,"z":156.57142857142858},{"x":678.8571428571429,"y":8,"z":156.57142857142858},{"x":678.8571428571429,"y":56,"z":156.57142857142858}],"bottomRightIndex":2},{"id":30,"start":{"x":704,"y":144},"end":{"x":697,"y":147.5},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,0,2,3,0,3,4,4,5,0],"vertices":[{"x":704,"y":64,"z":144},{"x":697,"y":64,"z":147.5},{"x":697,"y":56,"z":147.5},{"x":697,"y":8,"z":147.5},{"x":697,"y":0,"z":147.5},{"x":704,"y":0,"z":144}],"bottomRightIndex":4},{"id":31,"start":{"x":708,"y":144},"end":{"x":704,"y":144},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,4,2,4,5,2,5,0],"vertices":[{"x":708,"y":64,"z":144},{"x":704,"y":64,"z":144},{"x":704,"y":0,"z":144},{"x":708,"y":0,"z":144},{"x":708,"y":8,"z":144},{"x":708,"y":56,"z":144}],"bottomRightIndex":2},{"id":32,"start":{"x":736,"y":144},"end":{"x":728,"y":144},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,0,2,3,0,3,4,4,5,0],"vertices":[{"x":736,"y":64,"z":144},{"x":728,"y":64,"z":144},{"x":728,"y":56,"z":144},{"x":728,"y":8,"z":144},{"x":728,"y":0,"z":144},{"x":736,"y":0,"z":144}],"bottomRightIndex":4},{"id":33,"start":{"x":741.3333333333334,"y":146.66666666666666},"end":{"x":736,"y":144},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,4,2,4,5,2,5,0],"vertices":[{"x":741.3333333333334,"y":64,"z":146.66666666666666},{"x":736,"y":64,"z":144},{"x":736,"y":0,"z":144},{"x":741.3333333333334,"y":0,"z":146.66666666666666},{"x":741.3333333333334,"y":8,"z":146.66666666666666},{"x":741.3333333333334,"y":56,"z":146.66666666666666}],"bottomRightIndex":2},{"id":34,"start":{"x":768,"y":160},"end":{"x":760,"y":156},"sectorId":0,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,0,2,3,0,3,4,4,5,0],"vertices":[{"x":768,"y":64,"z":160},{"x":760,"y":64,"z":156},{"x":760,"y":56,"z":156},{"x":760,"y":8,"z":156},{"x":760,"y":0,"z":156},{"x":768,"y":0,"z":160}],"bottomRightIndex":4},{"id":35,"start":{"x":720,"y":304},"end":{"x":720,"y":272},"sectorId":1,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":720,"y":64,"z":304},{"x":720,"y":64,"z":272},{"x":720,"y":0,"z":272},{"x":720,"y":0,"z":304}],"bottomRightIndex":2},{"id":36,"start":{"x":704,"y":272},"end":{"x":704,"y":304},"sectorId":1,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":704,"y":64,"z":272},{"x":704,"y":64,"z":304},{"x":704,"y":0,"z":304},{"x":704,"y":0,"z":272}],"bottomRightIndex":2},{"id":37,"start":{"x":816,"y":304},"end":{"x":816,"y":288},"sectorId":2,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":816,"y":64,"z":304},{"x":816,"y":64,"z":288},{"x":816,"y":0,"z":288},{"x":816,"y":0,"z":304}],"bottomRightIndex":2},{"id":38,"start":{"x":752,"y":288},"end":{"x":752,"y":304},"sectorId":2,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":752,"y":64,"z":288},{"x":752,"y":64,"z":304},{"x":752,"y":0,"z":304},{"x":752,"y":0,"z":288}],"bottomRightIndex":2},{"id":39,"start":{"x":640,"y":432},"end":{"x":864,"y":432},"sectorId":3,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":640,"y":64,"z":432},{"x":864,"y":64,"z":432},{"x":864,"y":0,"z":432},{"x":640,"y":0,"z":432}],"bottomRightIndex":2},{"id":40,"start":{"x":640,"y":304},"end":{"x":640,"y":432},"sectorId":3,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":640,"y":64,"z":304},{"x":640,"y":64,"z":432},{"x":640,"y":0,"z":432},{"x":640,"y":0,"z":304}],"bottomRightIndex":2},{"id":41,"start":{"x":704,"y":304},"end":{"x":640,"y":304},"sectorId":3,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":704,"y":64,"z":304},{"x":640,"y":64,"z":304},{"x":640,"y":0,"z":304},{"x":704,"y":0,"z":304}],"bottomRightIndex":2},{"id":42,"start":{"x":752,"y":304},"end":{"x":720,"y":304},"sectorId":3,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":752,"y":64,"z":304},{"x":720,"y":64,"z":304},{"x":720,"y":0,"z":304},{"x":752,"y":0,"z":304}],"bottomRightIndex":2},{"id":43,"start":{"x":864,"y":304},"end":{"x":816,"y":304},"sectorId":3,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":864,"y":64,"z":304},{"x":816,"y":64,"z":304},{"x":816,"y":0,"z":304},{"x":864,"y":0,"z":304}],"bottomRightIndex":2},{"id":44,"start":{"x":864,"y":432},"end":{"x":864,"y":304},"sectorId":3,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":864,"y":64,"z":432},{"x":864,"y":64,"z":304},{"x":864,"y":0,"z":304},{"x":864,"y":0,"z":432}],"bottomRightIndex":2},{"id":45,"start":{"x":760,"y":156},"end":{"x":764,"y":152},"sectorId":15,"type":3,"bottomY":8,"topY":56,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":760,"y":56,"z":156},{"x":764,"y":56,"z":152},{"x":764,"y":8,"z":152},{"x":760,"y":8,"z":156}],"bottomRightIndex":2},{"id":46,"start":{"x":745.3333333333334,"y":142.66666666666666},"end":{"x":741.3333333333334,"y":146.66666666666666},"sectorId":15,"type":3,"bottomY":8,"topY":56,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":745.3333333333334,"y":56,"z":142.66666666666666},{"x":741.3333333333334,"y":56,"z":146.66666666666666},{"x":741.3333333333334,"y":8,"z":146.66666666666666},{"x":745.3333333333334,"y":8,"z":142.66666666666666}],"bottomRightIndex":2},{"id":47,"start":{"x":697,"y":147.5},"end":{"x":694,"y":143},"sectorId":16,"type":3,"bottomY":8,"topY":56,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":697,"y":56,"z":147.5},{"x":694,"y":56,"z":143},{"x":694,"y":8,"z":143},{"x":697,"y":8,"z":147.5}],"bottomRightIndex":2},{"id":48,"start":{"x":677.1428571428571,"y":151.42857142857142},"end":{"x":678.8571428571429,"y":156.57142857142858},"sectorId":16,"type":3,"bottomY":8,"topY":56,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":677.1428571428571,"y":56,"z":151.42857142857142},{"x":678.8571428571429,"y":56,"z":156.57142857142858},{"x":678.8571428571429,"y":8,"z":156.57142857142858},{"x":677.1428571428571,"y":8,"z":151.42857142857142}],"bottomRightIndex":2},{"id":49,"start":{"x":728,"y":144},"end":{"x":728,"y":140},"sectorId":19,"type":3,"bottomY":8,"topY":56,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":728,"y":56,"z":144},{"x":728,"y":56,"z":140},{"x":728,"y":8,"z":140},{"x":728,"y":8,"z":144}],"bottomRightIndex":2},{"id":50,"start":{"x":708,"y":140},"end":{"x":708,"y":144},"sectorId":19,"type":3,"bottomY":8,"topY":56,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":708,"y":56,"z":140},{"x":708,"y":56,"z":144},{"x":708,"y":8,"z":144},{"x":708,"y":8,"z":140}],"bottomRightIndex":2},{"id":51,"start":{"x":668.4444444444445,"y":167.11111111111111},"end":{"x":663.6,"y":165.9},"sectorId":20,"type":3,"bottomY":8,"topY":56,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":668.4444444444445,"y":56,"z":167.11111111111111},{"x":663.6,"y":56,"z":165.9},{"x":663.6,"y":8,"z":165.9},{"x":668.4444444444445,"y":8,"z":167.11111111111111}],"bottomRightIndex":2},{"id":52,"start":{"x":656.6451612903226,"y":181.5483870967742},"end":{"x":660.5714285714286,"y":182.85714285714286},"sectorId":20,"type":3,"bottomY":8,"topY":56,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":656.6451612903226,"y":56,"z":181.5483870967742},{"x":660.5714285714286,"y":56,"z":182.85714285714286},{"x":660.5714285714286,"y":8,"z":182.85714285714286},{"x":656.6451612903226,"y":8,"z":181.5483870967742}],"bottomRightIndex":2},{"id":53,"start":{"x":779.4285714285714,"y":182.85714285714286},"end":{"x":783.3548387096774,"y":181.5483870967742},"sectorId":21,"type":3,"bottomY":8,"topY":56,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":779.4285714285714,"y":56,"z":182.85714285714286},{"x":783.3548387096774,"y":56,"z":181.5483870967742},{"x":783.3548387096774,"y":8,"z":181.5483870967742},{"x":779.4285714285714,"y":8,"z":182.85714285714286}],"bottomRightIndex":2},{"id":54,"start":{"x":776.5714285714286,"y":166.28571428571428},"end":{"x":772.5,"y":169},"sectorId":21,"type":3,"bottomY":8,"topY":56,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":776.5714285714286,"y":56,"z":166.28571428571428},{"x":772.5,"y":56,"z":169},{"x":772.5,"y":8,"z":169},{"x":776.5714285714286,"y":8,"z":166.28571428571428}],"bottomRightIndex":2},{"id":55,"start":{"x":620,"y":96},"end":{"x":620,"y":188},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":620,"y":64,"z":96},{"x":620,"y":64,"z":188},{"x":620,"y":0,"z":188},{"x":620,"y":0,"z":96}],"bottomRightIndex":2},{"id":56,"start":{"x":832,"y":96},"end":{"x":620,"y":96},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":832,"y":64,"z":96},{"x":620,"y":64,"z":96},{"x":620,"y":0,"z":96},{"x":832,"y":0,"z":96}],"bottomRightIndex":2},{"id":57,"start":{"x":832,"y":188},"end":{"x":832,"y":96},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":832,"y":64,"z":188},{"x":832,"y":64,"z":96},{"x":832,"y":0,"z":96},{"x":832,"y":0,"z":188}],"bottomRightIndex":2},{"id":58,"start":{"x":786.2222222222222,"y":188},"end":{"x":832,"y":188},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":786.2222222222222,"y":64,"z":188},{"x":832,"y":64,"z":188},{"x":832,"y":0,"z":188},{"x":786.2222222222222,"y":0,"z":188}],"bottomRightIndex":2},{"id":59,"start":{"x":783.3548387096774,"y":181.5483870967742},"end":{"x":786.2222222222222,"y":188},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,4,2,4,5,2,5,0],"vertices":[{"x":783.3548387096774,"y":64,"z":181.5483870967742},{"x":786.2222222222222,"y":64,"z":188},{"x":786.2222222222222,"y":0,"z":188},{"x":783.3548387096774,"y":0,"z":181.5483870967742},{"x":783.3548387096774,"y":8,"z":181.5483870967742},{"x":783.3548387096774,"y":56,"z":181.5483870967742}],"bottomRightIndex":2},{"id":60,"start":{"x":772,"y":156},"end":{"x":776.5714285714286,"y":166.28571428571428},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,0,2,3,0,3,4,4,5,0],"vertices":[{"x":772,"y":64,"z":156},{"x":776.5714285714286,"y":64,"z":166.28571428571428},{"x":776.5714285714286,"y":56,"z":166.28571428571428},{"x":776.5714285714286,"y":8,"z":166.28571428571428},{"x":776.5714285714286,"y":0,"z":166.28571428571428},{"x":772,"y":0,"z":156}],"bottomRightIndex":4},{"id":61,"start":{"x":764,"y":152},"end":{"x":772,"y":156},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,4,2,4,5,2,5,0],"vertices":[{"x":764,"y":64,"z":152},{"x":772,"y":64,"z":156},{"x":772,"y":0,"z":156},{"x":764,"y":0,"z":152},{"x":764,"y":8,"z":152},{"x":764,"y":56,"z":152}],"bottomRightIndex":2},{"id":62,"start":{"x":740,"y":140},"end":{"x":745.3333333333334,"y":142.66666666666666},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,0,2,3,0,3,4,4,5,0],"vertices":[{"x":740,"y":64,"z":140},{"x":745.3333333333334,"y":64,"z":142.66666666666666},{"x":745.3333333333334,"y":56,"z":142.66666666666666},{"x":745.3333333333334,"y":8,"z":142.66666666666666},{"x":745.3333333333334,"y":0,"z":142.66666666666666},{"x":740,"y":0,"z":140}],"bottomRightIndex":4},{"id":63,"start":{"x":728,"y":140},"end":{"x":740,"y":140},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,4,2,4,5,2,5,0],"vertices":[{"x":728,"y":64,"z":140},{"x":740,"y":64,"z":140},{"x":740,"y":0,"z":140},{"x":728,"y":0,"z":140},{"x":728,"y":8,"z":140},{"x":728,"y":56,"z":140}],"bottomRightIndex":2},{"id":64,"start":{"x":700,"y":140},"end":{"x":708,"y":140},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,0,2,3,0,3,4,4,5,0],"vertices":[{"x":700,"y":64,"z":140},{"x":708,"y":64,"z":140},{"x":708,"y":56,"z":140},{"x":708,"y":8,"z":140},{"x":708,"y":0,"z":140},{"x":700,"y":0,"z":140}],"bottomRightIndex":4},{"id":65,"start":{"x":694,"y":143},"end":{"x":700,"y":140},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,4,2,4,5,2,5,0],"vertices":[{"x":694,"y":64,"z":143},{"x":700,"y":64,"z":140},{"x":700,"y":0,"z":140},{"x":694,"y":0,"z":143},{"x":694,"y":8,"z":143},{"x":694,"y":56,"z":143}],"bottomRightIndex":2},{"id":66,"start":{"x":668,"y":156},"end":{"x":677.1428571428571,"y":151.42857142857142},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,0,2,3,0,3,4,4,5,0],"vertices":[{"x":668,"y":64,"z":156},{"x":677.1428571428571,"y":64,"z":151.42857142857142},{"x":677.1428571428571,"y":56,"z":151.42857142857142},{"x":677.1428571428571,"y":8,"z":151.42857142857142},{"x":677.1428571428571,"y":0,"z":151.42857142857142},{"x":668,"y":0,"z":156}],"bottomRightIndex":4},{"id":67,"start":{"x":663.6,"y":165.9},"end":{"x":668,"y":156},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,4,2,4,5,2,5,0],"vertices":[{"x":663.6,"y":64,"z":165.9},{"x":668,"y":64,"z":156},{"x":668,"y":0,"z":156},{"x":663.6,"y":0,"z":165.9},{"x":663.6,"y":8,"z":165.9},{"x":663.6,"y":56,"z":165.9}],"bottomRightIndex":2},{"id":68,"start":{"x":653.7777777777778,"y":188},"end":{"x":656.6451612903226,"y":181.5483870967742},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,0,2,3,0,3,4,4,5,0],"vertices":[{"x":653.7777777777778,"y":64,"z":188},{"x":656.6451612903226,"y":64,"z":181.5483870967742},{"x":656.6451612903226,"y":56,"z":181.5483870967742},{"x":656.6451612903226,"y":8,"z":181.5483870967742},{"x":656.6451612903226,"y":0,"z":181.5483870967742},{"x":653.7777777777778,"y":0,"z":188}],"bottomRightIndex":4},{"id":69,"start":{"x":620,"y":188},"end":{"x":653.7777777777778,"y":188},"sectorId":28,"type":3,"bottomY":0,"topY":64,"texId":"wall","lightColor":16777215,"indices":[0,1,2,2,3,0],"vertices":[{"x":620,"y":64,"z":188},{"x":653.7777777777778,"y":64,"z":188},{"x":653.7777777777778,"y":0,"z":188},{"x":620,"y":0,"z":188}],"bottomRightIndex":2}],"2":[{"id":0,"vertices":[{"x":768,"y":160},{"x":772.5,"y":169},{"x":779.4285714285714,"y":182.85714285714286},{"x":784,"y":192},{"x":788,"y":192},{"x":816,"y":192},{"x":816,"y":288},{"x":752,"y":288},{"x":752,"y":272},{"x":720,"y":272},{"x":704,"y":272},{"x":672,"y":272},{"x":640,"y":272},{"x":640,"y":192},{"x":652,"y":192},{"x":656,"y":192},{"x":660.5714285714286,"y":182.85714285714286},{"x":668.4444444444445,"y":167.11111111111111},{"x":672,"y":160},{"x":678.8571428571429,"y":156.57142857142858},{"x":697,"y":147.5},{"x":704,"y":144},{"x":708,"y":144},{"x":728,"y":144},{"x":736,"y":144},{"x":741.3333333333334,"y":146.66666666666666},{"x":760,"y":156}],"indices":[3,4,5,1,2,3,0,1,3,3,5,6,0,3,6,0,6,7,0,7,8,0,8,9,0,9,10,0,10,11,0,11,12,12,13,14,12,14,15,0,12,15,0,15,16,0,16,17,0,17,18,0,18,19,0,19,20,0,20,21,0,21,22,0,22,23,23,24,25,23,25,26,0,23,26],"floorBottomY":0,"floorTopY":0,"ceilBottomY":64,"ceilTopY":64,"ceiling":true,"door":false,"doorMaxHeight":16,"elevator":false,"elevatorMaxHeight":16,"useVertexColors":false,"floorTexId":"wall","ceilTexId":"wall","sideTexId":"wall","lightLevel":5,"lightColor":16777215,"ceilingCatColor":16777215,"collisionVertices":[{"x":768,"y":160},{"x":772.5,"y":169},{"x":779.4285714285714,"y":182.85714285714286},{"x":784,"y":192},{"x":816,"y":192},{"x":816,"y":288},{"x":752,"y":288},{"x":752,"y":272},{"x":640,"y":272},{"x":640,"y":192},{"x":656,"y":192},{"x":660.5714285714286,"y":182.85714285714286},{"x":668.4444444444445,"y":167.11111111111111},{"x":672,"y":160},{"x":678.8571428571429,"y":156.57142857142858},{"x":697,"y":147.5},{"x":704,"y":144},{"x":736,"y":144},{"x":741.3333333333334,"y":146.66666666666666},{"x":760,"y":156}],"collisionIndices":[1,2,3,0,1,3,3,4,5,0,3,5,0,5,6,0,6,7,0,7,8,8,9,10,0,8,10,0,10,11,0,11,12,0,12,13,0,13,14,0,14,15,0,15,16,16,17,18,16,18,19,0,16,19]},{"id":1,"vertices":[{"x":720,"y":272},{"x":720,"y":304},{"x":704,"y":304},{"x":704,"y":272}],"indices":[0,1,2,0,2,3],"floorBottomY":0,"floorTopY":0,"ceilBottomY":64,"ceilTopY":64,"ceiling":true,"door":true,"doorMaxHeight":32,"elevator":false,"elevatorMaxHeight":16,"useVertexColors":true,"floorTexId":"wall","ceilTexId":"wall","sideTexId":"wall","lightLevel":5,"lightColor":16777215,"ceilingCatColor":16777215,"collisionVertices":[{"x":720,"y":272},{"x":720,"y":304},{"x":704,"y":304},{"x":704,"y":272}],"collisionIndices":[0,1,2,0,2,3]},{"id":2,"vertices":[{"x":816,"y":288},{"x":816,"y":304},{"x":752,"y":304},{"x":752,"y":288}],"indices":[0,1,2,0,2,3],"floorBottomY":0,"floorTopY":0,"ceilBottomY":64,"ceilTopY":64,"ceiling":true,"door":true,"doorMaxHeight":32,"elevator":false,"elevatorMaxHeight":16,"useVertexColors":false,"floorTexId":"wall","ceilTexId":"wall","sideTexId":"wall","lightLevel":5,"lightColor":16777215,"ceilingCatColor":16777215,"collisionVertices":[{"x":816,"y":288},{"x":816,"y":304},{"x":752,"y":304},{"x":752,"y":288}],"collisionIndices":[0,1,2,0,2,3]},{"id":3,"vertices":[{"x":864,"y":432},{"x":640,"y":432},{"x":640,"y":304},{"x":704,"y":304},{"x":720,"y":304},{"x":752,"y":304},{"x":816,"y":304},{"x":864,"y":304}],"indices":[0,1,2,0,2,3,0,3,4,0,4,5,0,5,6,0,6,7],"floorBottomY":0,"floorTopY":0,"ceilBottomY":64,"ceilTopY":64,"ceiling":true,"door":false,"doorMaxHeight":16,"elevator":false,"elevatorMaxHeight":16,"useVertexColors":false,"floorTexId":"wall","ceilTexId":"wall","sideTexId":"wall","lightLevel":5,"lightColor":16777215,"ceilingCatColor":16777215,"collisionVertices":[{"x":864,"y":432},{"x":640,"y":432},{"x":640,"y":304},{"x":864,"y":304}],"collisionIndices":[0,1,2,0,2,3]},{"id":15,"vertices":[{"x":764,"y":152},{"x":760,"y":156},{"x":741.3333333333334,"y":146.66666666666666},{"x":745.3333333333334,"y":142.66666666666666}],"indices":[0,1,2,0,2,3],"floorBottomY":8,"floorTopY":8,"ceilBottomY":56,"ceilTopY":56,"ceiling":true,"door":false,"doorMaxHeight":16,"elevator":false,"elevatorMaxHeight":16,"useVertexColors":false,"floorTexId":"wall","ceilTexId":"wall","sideTexId":"wall","lightLevel":5,"lightColor":16777215,"ceilingCatColor":16777215,"collisionVertices":[{"x":764,"y":152},{"x":760,"y":156},{"x":741.3333333333334,"y":146.66666666666666},{"x":745.3333333333334,"y":142.66666666666666}],"collisionIndices":[0,1,2,0,2,3]},{"id":16,"vertices":[{"x":694,"y":143},{"x":697,"y":147.5},{"x":678.8571428571429,"y":156.57142857142858},{"x":677.1428571428571,"y":151.42857142857142}],"indices":[0,1,2,0,2,3],"floorBottomY":8,"floorTopY":8,"ceilBottomY":56,"ceilTopY":56,"ceiling":true,"door":false,"doorMaxHeight":16,"elevator":false,"elevatorMaxHeight":16,"useVertexColors":false,"floorTexId":"wall","ceilTexId":"wall","sideTexId":"wall","lightLevel":5,"lightColor":16777215,"ceilingCatColor":16777215,"collisionVertices":[{"x":694,"y":143},{"x":697,"y":147.5},{"x":678.8571428571429,"y":156.57142857142858},{"x":677.1428571428571,"y":151.42857142857142}],"collisionIndices":[0,1,2,0,2,3]},{"id":19,"vertices":[{"x":728,"y":140},{"x":728,"y":144},{"x":708,"y":144},{"x":708,"y":140}],"indices":[0,1,2,0,2,3],"floorBottomY":8,"floorTopY":8,"ceilBottomY":56,"ceilTopY":56,"ceiling":true,"door":false,"doorMaxHeight":16,"elevator":false,"elevatorMaxHeight":16,"useVertexColors":false,"floorTexId":"wall","ceilTexId":"wall","sideTexId":"wall","lightLevel":5,"lightColor":16777215,"ceilingCatColor":16777215,"collisionVertices":[{"x":728,"y":140},{"x":728,"y":144},{"x":708,"y":144},{"x":708,"y":140}],"collisionIndices":[0,1,2,0,2,3]},{"id":20,"vertices":[{"x":663.6,"y":165.9},{"x":668.4444444444445,"y":167.11111111111111},{"x":660.5714285714286,"y":182.85714285714286},{"x":656.6451612903226,"y":181.5483870967742}],"indices":[0,1,2,0,2,3],"floorBottomY":8,"floorTopY":8,"ceilBottomY":56,"ceilTopY":56,"ceiling":true,"door":false,"doorMaxHeight":16,"elevator":false,"elevatorMaxHeight":16,"useVertexColors":false,"floorTexId":"wall","ceilTexId":"wall","sideTexId":"wall","lightLevel":5,"lightColor":16777215,"ceilingCatColor":16777215,"collisionVertices":[{"x":663.6,"y":165.9},{"x":668.4444444444445,"y":167.11111111111111},{"x":660.5714285714286,"y":182.85714285714286},{"x":656.6451612903226,"y":181.5483870967742}],"collisionIndices":[0,1,2,0,2,3]},{"id":21,"vertices":[{"x":783.3548387096774,"y":181.5483870967742},{"x":779.4285714285714,"y":182.85714285714286},{"x":772.5,"y":169},{"x":776.5714285714286,"y":166.28571428571428}],"indices":[0,1,2,0,2,3],"floorBottomY":8,"floorTopY":8,"ceilBottomY":56,"ceilTopY":56,"ceiling":true,"door":false,"doorMaxHeight":16,"elevator":false,"elevatorMaxHeight":16,"useVertexColors":false,"floorTexId":"wall","ceilTexId":"wall","sideTexId":"wall","lightLevel":5,"lightColor":16777215,"ceilingCatColor":16777215,"collisionVertices":[{"x":783.3548387096774,"y":181.5483870967742},{"x":779.4285714285714,"y":182.85714285714286},{"x":772.5,"y":169},{"x":776.5714285714286,"y":166.28571428571428}],"collisionIndices":[0,1,2,0,2,3]},{"id":28,"vertices":[{"x":620,"y":188},{"x":620,"y":96},{"x":832,"y":96},{"x":832,"y":188},{"x":786.2222222222222,"y":188},{"x":783.3548387096774,"y":181.5483870967742},{"x":776.5714285714286,"y":166.28571428571428},{"x":772,"y":156},{"x":764,"y":152},{"x":745.3333333333334,"y":142.66666666666666},{"x":740,"y":140},{"x":728,"y":140},{"x":708,"y":140},{"x":700,"y":140},{"x":694,"y":143},{"x":677.1428571428571,"y":151.42857142857142},{"x":668,"y":156},{"x":663.6,"y":165.9},{"x":656.6451612903226,"y":181.5483870967742},{"x":653.7777777777778,"y":188}],"indices":[2,3,4,2,4,5,2,5,6,2,6,7,2,7,8,2,8,9,2,9,10,1,2,10,1,10,11,1,11,12,1,12,13,1,13,14,1,14,15,1,15,16,0,1,16,0,16,17,0,17,18,0,18,19],"floorBottomY":0,"floorTopY":0,"ceilBottomY":64,"ceilTopY":64,"ceiling":false,"door":false,"doorMaxHeight":16,"elevator":false,"elevatorMaxHeight":16,"useVertexColors":false,"floorTexId":"wall","ceilTexId":"wall","sideTexId":"wall","lightLevel":5,"lightColor":16777215,"ceilingCatColor":16777215,"collisionVertices":[{"x":620,"y":188},{"x":620,"y":96},{"x":832,"y":96},{"x":832,"y":188},{"x":786.2222222222222,"y":188},{"x":783.3548387096774,"y":181.5483870967742},{"x":776.5714285714286,"y":166.28571428571428},{"x":772,"y":156},{"x":764,"y":152},{"x":745.3333333333334,"y":142.66666666666666},{"x":740,"y":140},{"x":700,"y":140},{"x":694,"y":143},{"x":677.1428571428571,"y":151.42857142857142},{"x":668,"y":156},{"x":663.6,"y":165.9},{"x":656.6451612903226,"y":181.5483870967742},{"x":653.7777777777778,"y":188}],"collisionIndices":[2,3,4,2,4,5,2,5,6,2,6,7,2,7,8,2,8,9,2,9,10,1,2,10,1,10,11,1,11,12,1,12,13,1,13,14,0,1,14,0,14,15,0,15,16,0,16,17]}],"3":[{"id":1,"pos":{"x":848,"y":416},"y":0,"type":"A","rotation":0},{"id":3,"pos":{"x":648,"y":416},"y":0,"type":"A","rotation":0},{"id":4,"pos":{"x":784,"y":264},"y":0,"type":"N","rotation":180},{"id":5,"pos":{"x":688,"y":168},"y":0,"type":"E","rotation":0},{"id":6,"pos":{"x":720,"y":160},"y":0,"type":"E","rotation":0},{"id":7,"pos":{"x":744,"y":168},"y":0,"type":"E","rotation":0},{"id":8,"pos":{"x":672,"y":184},"y":0,"type":"E","rotation":0},{"id":9,"pos":{"x":760,"y":184},"y":0,"type":"E","rotation":0},{"id":10,"pos":{"x":648,"y":200},"y":0,"type":"M","rotation":0},{"id":11,"pos":{"x":708,"y":284},"y":0,"type":"D","rotation":0}],"4":[]},"sectorLinks":[0,21,0,2,0,1,0,20,0,16,0,19,0,15,1,3,2,3,15,28,16,28,19,28,20,28,21,28]}';
exports.default=map},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _cookieLawWarning=__webpack_require__(34);var _cookieLawWarning2=_interopRequireDefault(_cookieLawWarning);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var component={template:_cookieLawWarning2.default,controllerAs:"ctrl",controller:function(){function CookieLawWarningController(){_classCallCheck(this,CookieLawWarningController);this.isVisible=window.localStorage.cookieLawOk===undefined}_createClass(CookieLawWarningController,[{key:"close",value:function close(){this.isVisible=false;window.localStorage.cookieLawOk=true}}]);return CookieLawWarningController}()};exports.default=component},function(module,exports){module.exports='<div class=cookie-law-warning><div class="alert alert-info" ng-show=ctrl.isVisible>This site uses HTML5 local storage to transfer maps between the map editor and the game itself.<div class=text-right style="margin-top: 15px"><button type=button class="btn btn-primary" ng-click=ctrl.close()>I understand</button></div></div></div>'}]);